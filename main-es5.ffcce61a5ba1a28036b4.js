function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_unsupportedIterableToArray(t,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,o=[],a=!0,s=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(o.push(n.value),!e||o.length!==e);a=!0);}catch(c){s=!0,i=c}finally{try{a||null==r.return||r.return()}finally{if(s)throw i}}return o}}function _arrayWithHoles(t){if(Array.isArray(t))return t}function _createForOfIteratorHelper(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=_unsupportedIterableToArray(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(t,e):void 0}}function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _createClass(t,e,r){return e&&_defineProperties(t.prototype,e),r&&_defineProperties(t,r),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"/WLi":function(t,e,r){"use strict";r.r(e),e.default='<div>\r\n  <select class="form-control" [(ngModel)]="chosenTag" id="field.name" name="field.name" (change)="updateCheckedTag()">\r\n      <option *ngFor="let opt of field" [value]="opt.label">{{opt.label}}</option>\r\n  </select>\r\n</div>'},0:function(t,e,r){t.exports=r("zUnb")},"033P":function(t,e,r){"use strict";r.r(e),e.default='<div class="asset-list">\r\n  <div class="subitem-title" (click)="expandPanel()">Image List</div>\r\n\r\n  <div *ngIf="showSubitem" class="subitem asset-subitem">\r\n\r\n\t<div *ngFor="let asset of getActiveFeatures()" (click)="jumpToImage(asset)" class="asset-container" [ngClass]="{\'highlight\': isActiveFeature(asset)}">\r\n\r\n\t  <div class="name-group">\r\n\t\t{{ getAssetDisplay(asset) }}\r\n\t  </div>\r\n\r\n\t  <div class="button-group">\r\n\t\t<div (click)="deleteAsset(asset.id)">\r\n\t\t  <i class="fas fa-minus"\r\n\t\t\t matTooltip="Delete"\r\n\t\t\t matTooltipPosition="above">\r\n\t\t  </i>\r\n\t\t</div>\r\n\t  </div>\r\n\t</div>\r\n  </div>\r\n</div>\r\n'},"0NOL":function(t,e,r){"use strict";r.r(e),e.default='<h4> Select Files </h4>\r\n<small><em> Note: Only files are selectable, not folders. Double click on a folder to navigate into it. </em></small>\r\n<hr>\r\n<select (ngModelChange)="selectSystem($event)" [(ngModel)]="selectedSystem">\r\n\t<option [ngValue]="myDataSystem"> My Data </option>\r\n\t<option [ngValue]="communityDataSystem"> Community Data</option>\r\n\t<option [ngValue]="publishedDataSystem"> Published Data</option>\r\n\t<optgroup label="My Projects">\r\n\t\t<option *ngFor="let project of projects" [ngValue]="project">{{project.description}}</option>\r\n\t</optgroup>\r\n</select>\r\n\r\n<div class="fileslisting"  infiniteScroll [infiniteScrollDistance]="2" [infiniteScrollThrottle]="100" [scrollWindow]="false" (scrolled)="getFiles()">\r\n\t<div class="clickable" class="grid-x file-row" (dblclick)="toRoot()">\r\n\t\t<i class="fas fa-folder"></i>\r\n\t\t<span > Home </span>\r\n\t</div>\r\n\t<div class="clickable" class="grid-x file-row">\r\n\t\t<i class="fas fa-folder-open"></i>\r\n\t\t<span class="lineBreak"> {{selectedPath}} </span>\r\n\t</div>\r\n\t<div *ngIf="retrievalError" class="grid-x file-row" class="error">\r\n\t\tError retrieving files\r\n\t</div>\r\n\t<div class="grid-x file-row" *ngFor="let file of filesList; let fileIndex = index" [ngClass]="{\'selected\':selectedFiles.has(file.path)}">\r\n\t\t<div class="clickable" (click)="select($event, file, fileIndex)"  (dblclick)="browse(file)">\r\n\r\n\t\t\t<i class="fas fa-folder" *ngIf="file.type === \'dir\'" ></i>\r\n\t\t\t<i class="far fa-file" *ngIf="file.type !== \'dir\'"></i>\r\n\t\t\t<span > {{ file.name }} </span>\r\n\t\t</div>\r\n\t\t<div class="size">\r\n\t\t\t{{file.length | filesize }}\r\n\t\t</div>\r\n\t</div>\r\n\t<div class="grid-x" *ngIf="inProgress">\r\n\t\t<div class="cell medium-12">\r\n\t\t  <i class="fas fa-spin fa-atom"></i>\r\n\t\t</div>\r\n\t  </div>\r\n</div>\r\n\r\n<div class="button-group">\r\n\t<button mat-raised-button color="basic" (click)="selectAll()">Select all</button>\r\n\t<button mat-raised-button color="warn" class="button warning" (click)="cancel()">Done</button>\r\n\t<button mat-raised-button color="primary" class="button" [disabled]="!selectedFiles.size" (click)="chooseFiles()">Import</button>\r\n</div>\r\n'},"1NWJ":function(t,e,r){"use strict";r.r(e),e.default=":host .drop-container {\n  background: #fff;\n  border-radius: 6px;\n  height: 150px;\n  width: 100%;\n  box-shadow: 1px 2px 20px rgba(10, 10, 10, 0.1);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border: 2px dashed #c0c4c7;\n}\n:host p {\n  font-size: 16px;\n  font-weight: 400;\n  color: #c0c4c7;\n}\n:host .upload-button {\n  display: inline-block;\n  border: none;\n  outline: none;\n  cursor: pointer;\n  color: #5754a3;\n}\n:host .upload-button input {\n  display: none;\n}\n:host .dropzone {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-direction: column;\n  border-radius: 5px;\n  background: white;\n  margin: 10px 0;\n}\n:host .dropzone.hovering {\n  border: 2px solid #f16624;\n  color: #dadada !important;\n}\n:host progress::-webkit-progress-value {\n  transition: width 0.1s ease;\n}"},"503e":function(t,e,r){"use strict";r.r(e),e.default='<div [formGroup]="form">\r\n  <div *ngIf="!field.value" class="drop-container dropzone" dropZone (hovered)="toggleHover($event)"\r\n       (dropped)="field.onUpload($event)" [class.hovering]="isHovering">\r\n    <p class="m-0">\r\n      Drag a file here or\r\n      <label class="upload-button">\r\n\t<input type="file" multiple="" (change)="field.onUpload($event.target.files)"> browse\r\n      </label>\r\n      to upload.\r\n    </p>\r\n  </div>\r\n  <div *ngIf="field.value">\r\n    \x3c!-- <button type="button" class="btn btn-primary">Change</button> --\x3e\r\n    <div class="card">\r\n      <img class="card-img-top" [src]="field.value">\r\n    </div>\r\n  </div>\r\n</div>\r\n'},"6CRC":function(t,e,r){"use strict";r.r(e),e.default=""},"7E2L":function(t,e,r){"use strict";r.r(e),e.default='<h4> Select Files </h4>\r\n<small><em> If no folder is selected, the file will be saved in the root of your selected system. </em></small>\r\n<hr>\r\n<select (ngModelChange)="selectSystem($event)" [(ngModel)]="selectedSystem">\r\n\t<option [ngValue]="myDataSystem"> My Data </option>\r\n\t<option [ngValue]="communityDataSystem"> Community Data</option>\r\n\t<option [ngValue]="publishedDataSystem"> Published Data</option>\r\n\t<optgroup label="My Projects">\r\n\t\t<option *ngFor="let project of projects" [ngValue]="project">{{project.description}}</option>\r\n\t</optgroup>\r\n</select>\r\n<div class="fileslisting"  infiniteScroll [infiniteScrollDistance]="2" [infiniteScrollThrottle]="100" [scrollWindow]="false" (scrolled)="getFiles()">\r\n\t<div class="grid-x file-row" *ngFor="let file of filesList" [ngClass]="{\'selected\':selectedFiles.has(file.path)}">\r\n\t\t<div class="clickable" (dblclick)="browse(file)">\r\n\t\t\t<i class="fas fa-folder" *ngIf="file.type === \'dir\'" ></i>\r\n\t\t\t<i class="far fa-file" *ngIf="file.type !== \'dir\'"></i>\r\n\t\t\t<span > {{ file.name }} </span>\r\n\t\t</div>\r\n\t\t<div class="size">\r\n\t\t\t{{file.length | filesize }}\r\n\t\t</div>\r\n\t</div>\r\n\t<div class="grid-x" *ngIf="inProgress">\r\n\t\t<div class="cell medium-12">\r\n\t\t  <i class="fas fa-spin fa-atom"></i>\r\n\t\t</div>\r\n\t  </div>\r\n\r\n</div>\r\n\r\n<form [formGroup]="downloadSelectForm" (ngSubmit)="update()" id="current-project-form">\r\n    <div>\r\n        <small><em> If no filename is specified, it will default to the project ID number. </em></small>\r\n    </div>\r\n\r\n    <mat-form-field>\r\n        <input matInput type="text" formControlName="Name" appearance="filled"  required="false">\r\n    </mat-form-field>\r\n</form>\r\n<span class="radio-box">\r\n<mat-radio-group [(ngModel)]="fileExtension">\r\n    <mat-radio-button value=".csv">.csv</mat-radio-button>\r\n    <mat-radio-button value=".json">.json</mat-radio-button>\r\n</mat-radio-group>\r\n</span>\r\n\r\n<div class="button-group">\r\n\t<button mat-raised-button color="warn" class="button warning" (click)="cancel()">Cancel</button>\r\n\t<button mat-raised-button color="primary" class="button" (click)="chooseFiles()">Save</button>\r\n</div>\r\n'},"8lyn":function(t,e,r){"use strict";r.r(e),e.default=":host .top-bar {\n  height: 40px;\n  padding: 5px;\n  padding-left: 0.5em;\n  flex-wrap: nowrap;\n  position: fixed;\n  overflow: hidden;\n  width: 100%;\n  z-index: 999;\n}\n:host .top-bar-right .top-bar-left {\n  -webkit-box-flex: 0;\n  flex-wrap: nowrap;\n  flex: 0 1 auto;\n  max-width: 100%;\n}\n@media print, screen and (min-width: 40em) {\n  :host .top-bar {\n    flex-wrap: nowrap;\n    flex: 0 1 auto;\n  }\n}"},AZwa:function(t,e,r){"use strict";r.r(e),e.default='\x3c!-- <div class="grid-x"> --\x3e\r\n\r\n\x3c!--   <div class="top-bar" style="background-color: black" id="navbar"> --\x3e\r\n\r\n\x3c!--\t<div class="top-bar-left"> --\x3e\r\n\x3c!--\t  <img src="assets/logo.svg" width="30PX"> --\x3e\r\n\x3c!--\t  <span style="color: white">Taggit</span> --\x3e\r\n\x3c!--\t</div> --\x3e\r\n\r\n\r\n\x3c!--\t<div class="top-bar-right"> --\x3e\r\n\x3c!--\t  <div class="light-blue" *ngIf="currentUser">{{ currentUser.username }}</div> --\x3e\r\n\x3c!--\t</div> --\x3e\r\n\r\n\x3c!--   </div> --\x3e\r\n\r\n\x3c!--   <\\!-- <div class="cell control-bar"> -\\-> --\x3e\r\n\x3c!--   <\\!--\t<app-control-bar></app-control-bar> -\\-> --\x3e\r\n\x3c!--   <\\!-- </div> -\\-> --\x3e\r\n\x3c!-- </div> --\x3e\r\n\r\n<app-control-bar></app-control-bar>\r\n\x3c!-- NOTE Router Outlet was here --\x3e\r\n<app-image-gallery></app-image-gallery>\r\n\r\n\x3c!-- NOTE Leaflet was here --\x3e\r\n'},Af46:function(t,e,r){"use strict";r.r(e),e.default="<p>\r\n  notfound works!\r\n</p>\r\n"},"Ag+R":function(t,e,r){"use strict";r.r(e),e.default=":host {\n  min-height: 20em;\n}\n:host .fileslisting {\n  height: 20em;\n  overflow-y: scroll;\n  padding: 0px 20px;\n}\n:host .file-row {\n  display: flex;\n  background: #f9f9f9;\n  border: 1px solid transparent;\n  user-select: none;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n}\n:host .clickable {\n  flex: 1;\n  max-width: 20em;\n}\n:host .size {\n  align-items: flex-end;\n}\n:host .file-row:hover {\n  border: 1px solid;\n}\n:host .file-row.selected {\n  background: #d3d3d3;\n}\n:host .mat-radio-button ~ .mat-radio-button {\n  margin-left: 16px;\n}\n:host .radio-box {\n  position: relative;\n  bottom: 45px;\n  left: 45%;\n}"},FN4D:function(t,e,r){"use strict";r.r(e),e.default=""},I57P:function(t,e,r){"use strict";r.r(e),e.default=":host {\n  overflow-y: scroll;\n}\n:host .select-group {\n  max-height: 20%;\n}\n:host .subitem-title {\n  text-align: left;\n  color: #555;\n  font-size: 14px;\n  padding: 10px;\n  background-color: #F1F1F1;\n  display: flex;\n  justify-content: space-between;\n}\n:host .subitem {\n  border-width: 0px 10px;\n  border-color: #F1F1F1;\n  border-style: solid;\n  overflow-y: scroll;\n  background-color: #FFFFFF;\n  height: 100%;\n}\n:host .group-subitem {\n  height: 100px;\n}\n:host .subitem-scroll {\n  border-width: 5px;\n}\n:host .boxed input[type=radio] {\n  display: none;\n}\n:host .boxed label {\n  background-color: #fff;\n  transition: all 0.3s;\n}\n:host .boxed input[type=radio]:checked + label {\n  background-color: #B3E5FF;\n}\n:host .group-container {\n  display: flex;\n  flex-direction: row;\n  margin: 0;\n  justify-content: space-between;\n}\n:host .name-group {\n  display: inline-block;\n  padding: 3px;\n}\n:host .button-group {\n  margin: 0;\n  display: flex;\n  flex-direction: row;\n}\n:host .button-group div {\n  padding: 3px;\n}\n:host .fa {\n  font-weight: 900;\n  display: inline-block;\n  font-style: normal;\n  font-variant: normal;\n  text-rendering: auto;\n  font-family: Font Awesome\\ 5 Free;\n  line-height: 1;\n}\n:host .fa option {\n  font-weight: 900;\n}"},IElf:function(t,e,r){"use strict";r.r(e),e.default=":host {\n  background-color: #F1F1F1;\n}"},MHpZ:function(t,e,r){"use strict";r.r(e),e.default='<div class="create-prompt">\r\n  <div class="subitem-title" (click)="expandPanel()">\r\n\t<span>\r\n\t  Create Tag\r\n\t</span>\r\n\t\x3c!-- <span style="cursor: pointer" --\x3e\r\n\t\x3c!--\t  (click)="addFormItem(); clearLabel(); clearOption()" --\x3e\r\n\t\x3c!--\t  matTooltip="Add Form Item" --\x3e\r\n\t\x3c!--\t  style="cursor: pointer; margin-right: 20px" --\x3e\r\n\t\x3c!--\t  matTooltipPosition="above"> --\x3e\r\n\t\x3c!--   <i class="fas fa-plus"></i> --\x3e\r\n\t\x3c!-- </span> --\x3e\r\n  </div> \x3c!-- subitem-title --\x3e\r\n\r\n  <div *ngIf="showSubitem" class="subitem">\r\n\t<form class="form-type-form">\r\n\t  <div *ngFor="let control of enabledControls; let idx = index" class="box form">\r\n\t\t<input type="radio" [id]="control" value="control.toLowerCase()" name="form-type" [checked]="(idx === 0)" (change)="selectInputForm(control.toLowerCase())">\r\n\t\t<label style="cursor: pointer; margin: 3px; padding: 3px; font-size: 10px" [for]="control">{{ control }}</label>\r\n\t  </div> \x3c!-- form-type-form --\x3e\r\n\t</form>\r\n\r\n\t<div *ngIf="formType == \'text\'; else optionForms">\r\n\t  <div class="form-name">\r\n\t\t<mat-form-field class="input-label-group">\r\n\t\t  <mat-label>Label</mat-label>\r\n\t\t  <input matInput placeholder="Label" #labelValue [(ngModel)]="labelFilter" (keyup)="inputFormLabel($event)" name="labelFilter" class="tiny" type="text">\r\n\t\t</mat-form-field>\r\n\t  </div> \x3c!--form-name --\x3e\r\n\t</div> \x3c!-- formtype --\x3e\r\n\r\n\t<ng-template #optionForms>\r\n\t  <div class="form-name">\r\n\r\n\t\t<mat-form-field class="input-label-group">\r\n\t\t  <mat-label>Label</mat-label>\r\n\t\t  <input matInput placeholder="Label" #labelValue [(ngModel)]="labelFilter" (keyup)="inputFormLabel($event)" name="labelFilter" class="tiny" type="text">\r\n\t\t</mat-form-field>\r\n\t\t<mat-form-field class="input-label-group">\r\n\t\t  <mat-label>Options</mat-label>\r\n\t\t  <div class="input-group">\r\n\t\t\t<input matInput #optionValue class="input-group-field" placeholder="Option" type="text" [(ngModel)]="optionFilter" name="optionFilter" (keyup.enter)="addOptionItem(optionValue.value); optionValue.value = \'\'; clearOption()">\r\n\t\t  </div> \x3c!-- input-group --\x3e\r\n\t\t</mat-form-field>\r\n\r\n\t\t<div class="input-group-button">\r\n\t\t  <button mat-button color="accent" class="button" (click)="addOptionItem(optionValue.value); optionValue.value = \'\'; clearOption()">\r\n\t\t\t<i class="fas fa-plus"></i>\r\n\t\t  </button>\r\n\t\t</div> \x3c!-- input-group-button --\x3e\r\n\r\n\t\t<ul class="form-option-container">\r\n\t\t  <li *ngFor="let opt of formOptions" class="list-group">\r\n\t\t\t<div [className]="showOpt">\r\n\t\t\t  {{opt.label}}\r\n\t\t\t</div> \x3c!-- showopt --\x3e\r\n\t\t\t<div class="button-group">\r\n\t\t\t  <div (click)="deleteOption(opt)">\r\n\t\t\t\t<i class="fas fa-minus"\r\n\t\t\t\t   matTooltip="Delete"\r\n\t\t\t\t   matTooltipPosition="above"\r\n\t\t\t\t   style="cursor: pointer">\r\n\t\t\t\t</i>\r\n\t\t\t  </div> \x3c!-- delete opt --\x3e\r\n\r\n\t\t\t  <div (click)="openRenameOptionModal(renameOptionModal)">\r\n\t\t\t\t<i class="fas fa-edit"\r\n\t\t\t\t   style="cursor: pointer"\r\n\t\t\t\t   matTooltip="Rename"\r\n\t\t\t\t   matTooltipPosition="above">\r\n\t\t\t\t</i>\r\n\t\t\t  </div>\r\n\r\n\t\t\t  <ng-template #renameOptionModal>\r\n\t\t\t\t<input matInput #optionRename\r\n\t\t\t\t\t   placeholder="Rename Option">\r\n\t\t\t\t<br/>\r\n\t\t\t\t<br/>\r\n\t\t\t\t<div class="button-group">\r\n\t\t\t\t  <button matDialogClose\r\n\t\t\t\t\t\t  mat-raised-button\r\n\t\t\t\t\t\t  color="primary"\r\n\t\t\t\t\t\t  (click)="renameOption(opt, optionRename.value)">Rename</button>\r\n\t\t\t\t  <button matDialogClose\r\n\t\t\t\t\t\t  mat-button>Cancel</button>\r\n\t\t\t\t</div>\r\n\t\t\t  </ng-template>\r\n\r\n\t\t\t</div> \x3c!-- button group --\x3e\r\n\r\n\t\t  </li>\r\n\t\t</ul>\r\n\t  </div> \x3c!-- form name --\x3e\r\n\t</ng-template> \x3c!-- form options --\x3e\r\n\r\n\t<button mat-raised-button color="primary" (click)="addFormItem(); clearLabel(); clearOption()">Save</button>\r\n\t<button mat-button color="primary" (click)="cancelCreate(); clearLabel(); clearOption()">Cancel</button>\r\n\r\n  </div> \x3c!-- subitem --\x3e\r\n</div> \x3c!-- create-group --\x3e\r\n'},N3QO:function(t,e,r){"use strict";r.r(e),e.default=":host .img-list-container {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));\n  grid-gap: 1em;\n  height: 100%;\n  padding: 1em;\n}\n:host #no-img {\n  font-size: 32px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 70vh;\n}\n:host #no-proj {\n  font-size: 32px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 70vh;\n}\n:host #new-proj {\n  font-size: 32px;\n  display: flex;\n  height: 100vh;\n  justify-content: center;\n  align-items: center;\n}\n:host app-image-box {\n  height: 100%;\n}\n:host .masonry-item {\n  width: 200px;\n}\n:host img-spin {\n  position: relative;\n  bottom: 0px;\n  left: 0px;\n  width: 100%;\n  height: 100px;\n  background: #fff;\n}\n:host load-spin {\n  position: relative;\n  width: 100%;\n  height: 100px;\n  background: #fff;\n}\n:host .side-bar-container {\n  background-color: #F1F1F1;\n  position: fixed;\n  width: 25%;\n  margin-right: 0px;\n  height: calc(100vh - 50px);\n  right: 0;\n}\n:host .success {\n  margin-right: 20%;\n}\n:host .danger {\n  margin-right: 0%;\n}\n:host #gallery-container-container {\n  position: relative;\n  width: 100%;\n  height: auto;\n  text-align: center;\n  display: flex;\n  flex-direction: column;\n  margin-top: 0px;\n}\n:host #loading-load {\n  position: relative;\n  width: 100%;\n  height: auto;\n  text-align: center;\n  flex-direction: column;\n  margin-top: 50px;\n}\n:host #gallery-container {\n  position: relative;\n  width: 100%;\n  height: auto;\n  text-align: center;\n  display: flex;\n  flex-direction: column;\n}\n:host #gallery-container .gallery-image {\n  height: 100%;\n  display: inline-flex;\n  justify-content: center;\n  align-items: center;\n}\n:host #gallery-container .gallery-image img {\n  max-width: 100%;\n  max-height: 100%;\n  margin: 0 auto;\n}\n:host .imager {\n  width: 75%;\n  height: calc(100vh - 50px);\n  background-color: #fefefe;\n}\n:host .view-image {\n  max-width: 100%;\n  height: auto;\n}\n:host .gallery-btn {\n  width: 35px;\n  height: 35px;\n  background: #000;\n  color: #fff;\n  text-align: center;\n  line-height: 35px;\n  cursor: pointer;\n  transition: all 0.4s ease;\n  font-size: 20px;\n  box-sizing: border-box;\n  padding-left: 2px;\n  position: fixed;\n  bottom: 10px;\n}\n:host .gallery-btn:hover {\n  background: #222;\n}\n:host .gallery-close {\n  top: 10px;\n}\n:host .gallery-close .gallery-next {\n  right: 10px;\n}\n:host .gallery-prev {\n  right: 50px;\n}\n:host .gallery-prev .gallery-next {\n  bottom: 10px;\n}\n@media (min-width: 478px) {\n  :host .img-list-container img:nth-child(3n):not(last-of-type) {\n    grid-row-end: span 2;\n  }\n}\n@media (max-width: 768px) {\n  :host .img-list-container {\n    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));\n  }\n}\n@media (max-width: 450px) {\n  :host .img-list-container {\n    grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));\n  }\n}"},P1jy:function(t,e,r){"use strict";r.r(e),e.default='<h4>Share this project</h4>\r\n<small><em> People you share your project with will have full ability to edit and delete this project on Taggit and on HazMapper. </em></small>\r\n\r\n<form [formGroup]="projShareForm" (ngSubmit)="submit()" id="share-project-form">\r\n    <mat-form-field>\r\n        <mat-label>Username:</mat-label>\r\n        <input matInput type="text" formControlName="name" required="true">\r\n    </mat-form-field>\r\n\r\n<div class="button-group small">\r\n    <button mat-raised-button color="warn" class="button small warning" type="button" (click)="close()">Close</button>\r\n    <button mat-raised-button color="primary" class="button small align-right" type="submit" [disabled]="!projShareForm.valid">Add Member</button>\r\n</div>\r\n\r\n<br>\r\n<h5>Current Users</h5>\r\n<div *ngFor="let user of projectUsers">\r\n    <br>\r\n    <mat-card class="card-container">\r\n        <span class="card-item">\r\n            {{user.username}}\r\n        </span>\r\n        <span class="card-buttons">\r\n            <button mat-raised-button color="warn" class="button small warning" type="button" [disabled]="onlyOne" (click)="delete(user.username)">\r\n                <i class="fas fa-trash"></i>\r\n            </button>\r\n        </span>\r\n    </mat-card>\r\n</div>\r\n</form>'},Pwca:function(t,e,r){"use strict";r.r(e),e.default='<div *ngIf="loaded; else loader" id="loading-load">\r\n  <div *ngIf="projectsExist; else noProjWarn" id="gallery-container">\r\n\t<div *ngIf="imagesExist; else noImgWarn" id="gallery-container-container">\r\n\t  <div [ngClass]="status ? \'success\' : \'danger\'"\r\n\t\t   infiniteScroll\r\n\t\t   [infiniteScrollDistance]="1"\r\n\t\t   [infiniteScrollThrottle]="1500"\r\n\t\t   (scrolled)="onScroll()"\r\n\t\t   class="img-list-container"\r\n\t\t   *ngIf="!showSidebar; else elseBlock">\r\n\t\t<app-image-box\r\n\t\t  *ngFor="let feat of featureListScroll"\r\n\t\t  [feature]="feat">\r\n\t\t</app-image-box>\r\n\t  </div>\r\n\r\n\t  <ngx-spinner\r\n\t\tbdOpacity = 0.9\r\n\t\tbdColor = ""\r\n\t\tsize = "default"\r\n\t\tcolor = "#3ADB76"\r\n\t\ttype = "line-scale-pulse-out"\r\n\t\tid = "img-spin"\r\n\t\t[fullScreen] = "false">\r\n\t  </ngx-spinner>\r\n\t  <ng-template #elseBlock>\r\n\t\t<div *ngIf="groupExist; else noImgDisplay">\r\n\t\t  <div class="imager">\r\n\t\t\t<img class="view-image" [src]="getPath()">\r\n\t\t  </div>\r\n\t\t</div>\r\n\t\t<ng-template #noImgDisplay> No Images exist for this Group </ng-template>\r\n\t\t\x3c!-- <div (click)="otherPath(1)">next</div> --\x3e\r\n\t\t\x3c!-- <div (click)="otherPath(-1)">prev</div> --\x3e\r\n\r\n\r\n\t\t\x3c!-- <img [src]="getPath()"> --\x3e\r\n\t\t\x3c!-- <button class="button" (click)="otherPath(1)">next</button> --\x3e\r\n\t\t\x3c!-- <button class="button" (click)="otherPath(-1)">prev</button> --\x3e\r\n\r\n\t\t\x3c!-- <app-image-list> --\x3e\r\n\t\t  \x3c!--   <\\!-- *ngFor="let feat of features.features" -\\-> --\x3e\r\n\t\t\t\x3c!--   <\\!-- [feature]="feat" -\\-> --\x3e\r\n\r\n\t\t\t  \x3c!--   <\\!-- *ngFor="let feat of features.features" -\\-> --\x3e\r\n\t\t\t\t\x3c!--   <\\!-- [feature]="features.features" -\\-> --\x3e\r\n\t\t\t\t  \x3c!--   <\\!-- (clickRequest)="addGroupList($event)" -\\-> --\x3e\r\n\t\t\t\t\t\x3c!-- </app-image-list> --\x3e\r\n\r\n\t  </ng-template>\r\n\t  <div *ngIf="showSidebar" class="side-bar-container">\r\n\t\t<app-side-bar></app-side-bar>\r\n\t  </div>\r\n\t</div>\r\n\t<ng-template #noImgWarn>\r\n\t  <div id="no-img">\r\n\t\tNo images have been imported!<br>Please import images through the menu.\r\n\t  </div>\r\n\t</ng-template>\r\n  </div>\r\n\r\n  <ng-template #noProjWarn>\r\n\t<div id="no-proj">\r\n\t  No project has been created!<br>Please create a project through the menu.\r\n\t</div>\r\n  </ng-template>\r\n\r\n  \x3c!-- <div id="gallery-container"> --\x3e\r\n\t\x3c!--   <div [ngClass]="status ? \'success\' : \'danger\'"> --\x3e\r\n\t  \x3c!--\t<div class="img-list-container" *ngIf="!showSidebar; else elseBlock"> --\x3e\r\n\t\t\x3c!--\t  <app-image-box --\x3e\r\n\t\t\x3c!--\t\t*ngFor="let feat of features.features" --\x3e\r\n\t\t\x3c!--\t\t[feature]="feat" --\x3e\r\n\t\t\x3c!--\t\t(clickRequest)="addGroupList($event)"> --\x3e\r\n\t\t  \x3c!--\t  </app-image-box> --\x3e\r\n\t\t\x3c!--\t</div> --\x3e\r\n\r\n\t  \x3c!--\t<ng-template #elseBlock> --\x3e\r\n\t\t\x3c!--\t  <app-image-list> --\x3e\r\n\t\t  \x3c!--\t  </app-image-list> --\x3e\r\n\t\t\x3c!--\t</ng-template> --\x3e\r\n\r\n\t  \x3c!--   </div> --\x3e\r\n\t\x3c!--   <div *ngIf="showSidebar" class="side-bar-container"> --\x3e\r\n\t  \x3c!--\t<app-side-bar></app-side-bar> --\x3e\r\n\t  \x3c!--   </div> --\x3e\r\n\t\x3c!-- </div> --\x3e\r\n\r\n</div>\r\n\r\n<ng-template #loader>\r\n  <div *ngIf="projectsExist; else createProj" id="loader">\r\n\tLoading...\r\n  </div>\r\n\r\n  <ng-template #createProj> \r\n\t<div id="new-proj" (click)="openCreateProjectModal()">\r\n\t\tStart a new project\r\n\t</div>\r\n</ng-template>\r\n\r\n\r\n  \x3c!-- <ngx-spinner\r\n\tbdOpacity = 0.9\r\n\tbdColor = ""\r\n\tsize = "default"\r\n\tcolor = "#3ADB76"\r\n\ttype = "line-scale-pulse-out"\r\n\tid = "load-spin"\r\n\t[fullScreen] = "false">\r\n  </ngx-spinner> --\x3e\r\n</ng-template>\r\n'},"T+fY":function(t,e,r){"use strict";r.r(e),e.default='<div class="form-group row" *ngFor="let tag of field">\r\n  <label class="col-md-3 form-control-label" [attr.for]="tag.label">\r\n\t{{field.label}}\r\n\t<strong class="text-danger" *ngIf="tag.required">*</strong>\r\n  </label>\r\n  <div class="col-md-9" [ngSwitch]="tag.type">\r\n\t<app-form-color *ngSwitchCase="\'color\'" [field]="field" [form]="form"></app-form-color>\r\n\t<app-form-textbox *ngSwitchCase="\'text\'" [field]="field" [form]="form"></app-form-textbox>\r\n\t<app-form-dropdown *ngSwitchCase="\'dropdown\'" [field]="field" [form]="form"></app-form-dropdown>\r\n\t<app-form-checkbox *ngSwitchCase="\'checkbox\'" [field]="field" [form]="form"></app-form-checkbox>\r\n\t<app-form-radio *ngSwitchCase="\'radio\'" [field]="field" [form]="form"></app-form-radio>\r\n\t\x3c!-- <app-form-file *ngSwitchCase="\'file\'" [field]="field" [form]="form"></app-form-file> --\x3e\r\n\t<div class="alert alert-danger my-1 p-2 fadeInDown animated" *ngIf="!isValid && isDirty">{{tag.label}} is required</div>\r\n  </div>\r\n</div>\r\n'},T7o7:function(t,e,r){"use strict";r.r(e),e.default=":host .subitem-title {\n  text-align: left;\n  color: #555;\n  font-size: 14px;\n  padding: 10px;\n  background-color: #F1F1F1;\n  display: flex;\n  justify-content: space-between;\n}\n:host .subitem {\n  border-width: 0px 10px;\n  border-color: #F1F1F1;\n  border-style: solid;\n  overflow-y: scroll;\n  background-color: #FFFFFF;\n  height: 100%;\n}\n:host .subitem-scroll {\n  border-width: 5px;\n}\n:host .asset-list {\n  max-height: 20%;\n}\n:host .asset-subitem {\n  height: 100px;\n}\n:host .asset-container {\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  cursor: pointer;\n}\n:host .highlight {\n  background-color: #B3E5FF;\n}\n:host .name-group {\n  display: inline-block;\n  padding: 3px;\n}\n:host .button-group {\n  margin: 0;\n  display: flex;\n  flex-direction: row;\n}\n:host .button-group div {\n  padding: 3px;\n  padding-right: 5px;\n}"},VzVu:function(t,e,r){"use strict";r.r(e),e.default="\x3c!--The content below is only a placeholder and can be replaced.--\x3e\r\n<router-outlet></router-outlet>\r\n"},X9m5:function(t,e,r){"use strict";r.r(e),e.default='<div id="callback">\r\n    <div>\r\n\t<i class="fas fa-spinner"></i>\r\n    </div>\r\n</div>\r\n'},"ay+3":function(t,e,r){"use strict";r.r(e),e.default='<div class="img-container">\r\n  <img [ngClass]="status ? \'img-selected\' : \'img-unselected\'"\r\n\t   [src]="featureSource"\r\n\t   (click)="imageSelect()"\r\n\t   class="img-responsive img-target"\r\n\t   title={{featurePath}}>\r\n  <div class="top-overlay">\r\n\t<div class="image-option"\r\n\t\t matTooltip="Zoom"\r\n\t\t matTooltipPosition="below"\r\n\t\t (click)="imageZoom(diffSizes)">\r\n\t  <i class="fas fa-search-plus"></i>\r\n\t</div>\r\n\r\n\t<ng-template #diffSizes>\r\n\t  <div class="zoom-content">\r\n\t\t<div class="img-container">\r\n\t\t  <img [src]="featureSource" title={{featurePath}}>\r\n\t\t</div>\r\n\t\t<div class="img-details">\r\n\t\t  <div class="detail-container">\r\n\t\t\t<div class="title">\r\n\t\t\t  Coordinates\r\n\t\t\t</div>\r\n\t\t\t<div class="detail-contents">\r\n\t\t\t  <div class="detail-item">\r\n\t\t\t\t{{coordinates[0]}},\r\n\t\t\t  </div>\r\n\t\t\t  <div class="detail-item">\r\n\t\t\t\t{{coordinates[1]}}\r\n\t\t\t  </div>\r\n\t\t\t</div>\r\n\t\t  </div>\r\n\t\t  <div class="detail-container">\r\n\t\t\t<div class="title">\r\n\t\t\t  Image Source\r\n\t\t\t</div>\r\n\t\t\t<div class="detail-contents">\r\n\t\t\t  <div class="detail-item">\r\n\t\t\t\t{{featurePath}}\r\n\t\t\t  </div>\r\n\t\t\t</div>\r\n\t\t  </div>\r\n\t\t</div>\r\n\t\t<button mat-button class="close-button" matDialogClose aria-label="Close modal" type="button">\r\n\t\t  <span aria-hidden="true">&times;</span>\r\n\t\t</button>\r\n\t  </div>\r\n\t</ng-template>\r\n\r\n\t<div class="image-option"\r\n\t\t matTooltip="Remove"\r\n\t\t matTooltipPosition="below"\r\n\t\t (click)="openImageDeleteModal(deleteImage)">\r\n\t  <i class="fas fa-trash"></i>\r\n\t</div>\r\n\r\n\t<ng-template #deleteImage>\r\n\t  <div *ngIf="tempGroup.length === 1">\r\n\t  This image will be deleted from the current project. It will not be deleted from the Data Depot.\r\n\t  </div>\r\n\r\n\t  <div *ngIf="tempGroup.length > 1">\r\n\t\t{{tempGroup.length}} images will be deleted from the current project. They will not be deleted from the Data Depot.\r\n\t\t</div>\r\n\r\n\t  <button mat-raised-button color="primary" matDialogClose (click)="imageDelete()">Delete Image</button>\r\n\t  <button mat-button matDialogClose>Cancel</button>\r\n\t</ng-template>\r\n\r\n\t<div class="image-option"\r\n\t\t matTooltip="Add To Group"\r\n\t\t matTooltipPosition="below"\r\n\t\t (click)="openImageAddModal(addMoreToGroup)">\r\n\t  <i class="fas fa-plus"></i>\r\n\t</div>\r\n\r\n\t<ng-template #addMoreToGroup>\r\n\r\n\t  <mat-form-field appearance="fill">\r\n\t\t<mat-label>Groups</mat-label>\r\n\t\t<mat-select matNativeControl required [(value)]="activeGroup">\r\n\t\t  <mat-option>\r\n\t\t\tNone\r\n\t\t  </mat-option>\r\n\t\t  <mat-option *ngFor="let group of groupList" [value]="group.name">\r\n\t\t\t{{ group.name }}\r\n\t\t  </mat-option>\r\n\t\t</mat-select>\r\n\t  </mat-form-field>\r\n\r\n\t  \x3c!-- <select #selectGroup class="form-control" [value]="activeGroup"> --\x3e\r\n\t  \x3c!--\t<option *ngFor="let group of groupList"> --\x3e\r\n\t  \x3c!--\t  {{ group.name }} --\x3e\r\n\t  \x3c!--\t</option> --\x3e\r\n\t  \x3c!-- </select> --\x3e\r\n\t  \x3c!-- <button mat-raised-button color="primary" matDialogClose (click)="selectGroupForm(selectGroup.value)">Add To Group</button> --\x3e\r\n\t  <p>\r\n\t\t<button mat-raised-button color="primary" matDialogClose (click)="addGroups(activeGroup)" [disabled]="!activeGroup">Add To Group</button>\r\n\t\t<button mat-button color="secondary" matDialogClose>Cancel</button>\r\n\t  </p>\r\n\r\n\t  \x3c!-- <button mat-raised-button color="primary" class="button" matDialogClose aria-label="Close modal" type="button"> --\x3e\r\n\t  \x3c!--\t<span aria-hidden="true">&times;</span> --\x3e\r\n\t  \x3c!-- </button> --\x3e\r\n\t</ng-template>\r\n  </div>\r\n\r\n  <div class="bottom-overlay">\r\n\r\n\t\x3c!-- <div class="color-container"> --\x3e\r\n\t  \x3c!-- TODO This should be an iff relationship --\x3e\r\n\t  <div *ngIf="hasGroup && colors.length > 0">\r\n\r\n\t\t<div *ngIf="colors.length < 5; else dotdot" class="group-tags">\r\n\t\t  <div *ngFor="let color of colors"\r\n\t\t\t   class="center"\r\n\t\t\t   (mouseover)="getGroupNameFromColor(color)"\r\n\t\t\t   [matTooltip]="currentGroup"\r\n\t\t\t   matTooltipPosition="above">\r\n\t\t\t<svg class="box" width="25px" height="75px" (click)="deleteFromGroup(color)">\r\n\t\t\t  \x3c!-- <rect width="15px" height="15px" [style.fill]="color"/> --\x3e\r\n\t\t\t  <rect width="15px" height="15px" x="5" y="30" [style.fill]="color"/>\r\n\t\t\t  <rect class="inner-del" width="25px" height="15px" rx="3" x="0" y="0" style="fill: #ffffff"/>\r\n\t\t\t  <rect  class="inner-del" width="15px" height="5px" x="5" y="5" style="fill: #DE6363"/>\r\n\t\t\t</svg>\r\n\t\t  </div>\r\n\t\t</div>\r\n\r\n\t\t<ng-template #dotdot class="text">\r\n\t\t  <div class="image-option"\r\n\t\t\t   (click)="openMoreGroupsModal(moreGroupsModal)">\r\n\t\t\t<i class="fas fa-ellipsis-h"></i>\r\n\t\t  </div>\r\n\t\t</ng-template>\r\n\r\n\t\t\x3c!-- TODO Should close modal once zero groups --\x3e\r\n\t\t<ng-template #moreGroupsModal>\r\n\t\t  <div style="display: flex; justify-content: center; align-items: center">\r\n\t\t\t<div *ngFor="let color of colors"\r\n\t\t\t\t class="center-temp"\r\n\t\t\t\t style="display: flex"\r\n\t\t\t\t (mouseover)="getGroupNameFromColor(color)"\r\n\t\t\t\t [matTooltip]="currentGroup"\r\n\t\t\t\t matTooltipPosition="right">\r\n\t\t\t  <svg style="padding: 1" (click)="deleteFromGroup(color)" width="15px" height="15px">\r\n\t\t\t\t<rect width="15px" height="15px" [style.fill]="color"/>\r\n\t\t\t\t<rect class="inner-del-temp" width="8px" height="4px" x="3.3" y="5.5" style="fill: #000"/>\r\n\t\t\t  </svg>\r\n\t\t\t</div>\r\n\t\t  </div>\r\n\t\t</ng-template>\r\n\r\n\t  </div>\r\n\t\x3c!-- </div> --\x3e\r\n\r\n  </div>\r\n\r\n</div>\r\n'},c6cR:function(t,e,r){"use strict";r.r(e),e.default="\x3c!-- <p>side-bar works!</p> --\x3e\r\n\x3c!-- <app-preset-generator></app-preset-generator> --\x3e\r\n\x3c!-- <app-tagger></app-tagger> --\x3e\r\n<app-select-group></app-select-group>\r\n<app-select-image></app-select-image>\r\n<router-outlet></router-outlet>\r\n"},crnd:function(t,e){function r(t){return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}))}r.keys=function(){return[]},r.resolve=r,t.exports=r,r.id="crnd"},"dTB+":function(t,e,r){"use strict";r.r(e),e.default=":host {\n  display: block;\n  font-size: 0.8em;\n  height: calc(100vh - 50px);\n}\n:host .lat-lon-label {\n  font-size: 0.8em;\n  color: #4d4d4d;\n}\n:host .active-project {\n  background-color: #1aff8c;\n}\n:host .menu button.dropdown.button {\n  padding: 0.85em 1em;\n}\n:host .switch {\n  margin: 0;\n}\n:host .button.tiny {\n  margin: 0;\n}\n:host .no-show-option {\n  display: none;\n}\n:host .show-option {\n  display: block;\n}\n:host .create-prompt {\n  max-height: 500px;\n  height: 500px;\n}\n:host .select-group {\n  max-height: 20%;\n  height: 20%;\n}\n:host .subitem-title {\n  text-align: left;\n  color: #555;\n  font-size: 14px;\n  padding: 10px;\n  background-color: #F1F1F1;\n  display: flex;\n  justify-content: space-between;\n}\n:host .input-label-group {\n  padding: 10px;\n  display: block;\n}\n:host .input-group {\n  display: inline-block;\n}\n:host .form-name {\n  text-align: center;\n}\n:host .input-group-button {\n  display: inline-block;\n}\n:host .subitem {\n  border-width: 0px 10px;\n  border-color: #F1F1F1;\n  border-style: solid;\n  overflow-y: auto;\n  background-color: #FFFFFF;\n  height: 40vh;\n  padding: 20px;\n}\n:host .subitem-scroll {\n  border-width: 5px;\n}\n:host .preset-descriptions {\n  max-height: 20%;\n  height: 20%;\n}\n:host .boxed input[type=radio] {\n  display: none;\n}\n:host .boxed label {\n  background-color: #fff;\n  transition: all 0.3s;\n}\n:host .boxed input[type=radio]:checked + label {\n  background-color: #B3E5FF;\n}\n:host .group-container {\n  display: flex;\n  flex-direction: row;\n  margin: 0;\n  justify-content: space-between;\n}\n:host .button-group {\n  margin: 0;\n  display: flex;\n  flex-direction: row;\n}\n:host .form-option-container {\n  padding: 0px;\n}\n:host .list-group {\n  display: flex;\n  flex-direction: row;\n  margin: 0;\n  justify-content: space-between;\n}\n:host .list-suboptions {\n  background-color: #F0F0F0;\n}\n:host .button-group div {\n  padding: 3px;\n}\n:host .name-group {\n  display: inline-block;\n  padding: 3px;\n}\n:host .form-item-container {\n  display: flex;\n  flex-direction: row;\n  margin: 0;\n  justify-content: space-between;\n}\n:host .form-type-form {\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  margin: 5px;\n  margin-bottom: 15px;\n}\n:host .form-type-form input[type=radio] {\n  display: none;\n}\n:host .form-type-form label {\n  border-style: solid;\n  border-width: 1px;\n  border-color: #ddd;\n  transition: all 0.3s;\n}\n:host .form-type-form input[type=radio]:checked + label {\n  border-style: solid;\n  border-width: 1px;\n  border-color: #000;\n}\n:host .changed {\n  color: #F07575;\n}\n:host .unchanged {\n  color: #555555;\n}\n:host .asset-list {\n  max-height: 20%;\n  height: 20%;\n}\n:host .asset-container {\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  cursor: pointer;\n}\n:host .highlight {\n  background-color: #B3E5FF;\n}"},dagV:function(t,e,r){"use strict";r.r(e),e.default='\x3c!--<div *ngIf="!field.multiline">\r\n  <input [attr.type]="field.type" class="form-control"  [id]="field.name" [name]="field.name" [(ngModel)]="note" (change)="updateNotes()">\r\n</div>\r\nNote! Right now, this tag is set to only use a text area, it seems like this component was set up to switch between the two when the imput\r\nbecame too large. However, how this was done isn\'t clear, and a text area just looks better, in my opinion--\x3e\r\n<div>\r\n  <textarea  [id]="field.name"\r\n\t\trows="9" class="form-control" [placeholder]="notes" [(ngModel)]="note" (keyup)="updateNotes()"></textarea>\r\n</div>\r\n'},dp4s:function(t,e,r){"use strict";r.r(e),e.default=":host #share-project-form {\n  display: flex;\n  flex-direction: column;\n  text-align: center;\n  padding: 5em;\n}\n\n.card-container {\n  display: flex;\n  justify-content: space-between;\n  width: 99%;\n}\n\n.card-item {\n  text-align: center;\n  align-items: center;\n}\n\n.card-buttons {\n  align-items: flex-end;\n}"},eC1z:function(t,e,r){"use strict";r.r(e),e.default='<div id="map" style="min-height: calc(100vh - 67px)"></div>\r\n'},fIZ9:function(t,e,r){"use strict";r.r(e),e.default='<div  class="form-check form-check">\r\n  <label class="form-check-label">\r\n      <input class="form-check-input" [(ngModel)]="chosenTag" type="radio" id="inlineCheckbox2" value={{field.label}} (change)="updateCheckedTag()" /> \r\n          {{field.label}}\r\n      </label>\r\n</div>'},fWOx:function(t,e,r){"use strict";r.r(e),e.default=":host #create-project-form {\n  display: flex;\n  flex-direction: column;\n  text-align: center;\n  padding: 5em;\n}"},if2z:function(t,e,r){"use strict";r.r(e),e.default=":host .img-container {\n  position: relative;\n}\n:host .img-container img {\n  -o-object-fit: cover;\n     object-fit: cover;\n  cursor: default;\n  width: 100%;\n  height: 100%;\n  transition: opacity 0.3s ease;\n  backface-visibility: hidden;\n  max-width: 100%;\n  max-height: 100%;\n  margin: 0 auto;\n}\n:host .top-overlay {\n  display: flex;\n  flex-direction: row;\n  transition: 0.3s ease;\n  opacity: 0;\n  position: absolute;\n  right: 10px;\n  top: 10px;\n  cursor: pointer;\n  text-align: center;\n}\n:host .bottom-overlay {\n  display: flex;\n  flex-direction: row;\n  transition: 0.3s ease;\n  opacity: 1;\n  position: absolute;\n  right: 10px;\n  bottom: 10px;\n  text-align: center;\n}\n:host .img-container:hover img {\n  opacity: 0.9;\n}\n:host .img-container:hover .top-overlay {\n  opacity: 0.9;\n}\n:host .img-container:hover .top-overlay:hover {\n  opacity: 1;\n}\n:host .image-option {\n  opacity: 0.9;\n  background-color: white;\n  display: flex;\n  color: black;\n  width: 40px;\n  height: 30px;\n  border-radius: 5px;\n  font-size: 16px;\n  margin: 3px;\n  justify-content: center;\n  align-items: center;\n}\n:host .image-option:hover {\n  opacity: 1;\n}\n:host .image-option .fas {\n  top: 5px;\n}\n:host .img-selected {\n  border: solid #4FB876;\n  border-width: 5px;\n}\n:host .img-unselected {\n  border: solid #fff;\n  border-width: 5px;\n}\n:host .group-tags {\n  opacity: 0.9;\n  background-color: white;\n  display: flex;\n  flex-direction: row;\n  width: auto;\n  height: 30px;\n  border-radius: 5px;\n  padding: 5px;\n  justify-content: center;\n  align-items: center;\n  z-index: 999;\n}\n:host .center {\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  transition: 0.3s ease;\n  align-items: center;\n}\n:host .center .inner-del {\n  opacity: 0;\n  transition: 0.3s ease;\n  cursor: pointer;\n}\n:host .center:hover .inner-del {\n  opacity: 1;\n}\n:host .box {\n  padding: 1px;\n}\n.center-temp {\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n}\n.center-temp .inner-del-temp {\n  opacity: 0;\n  transition: 0.3s ease;\n  cursor: pointer;\n}\n.center-temp:hover .inner-del-temp {\n  opacity: 0.5;\n}\n.zoom-content {\n  display: flex;\n  flex-direction: column;\n  max-height: 700px;\n}\n.zoom-content .img-container {\n  overflow-y: scroll;\n  width: 100%;\n  height: 100%;\n  background-color: #e7e7e7;\n}\n.zoom-content .img-details {\n  display: flex;\n  flex-direction: row;\n  margin-top: 24px;\n  background-color: #e7e7e7;\n  align-items: center;\n  text-align: center;\n}\n.zoom-content .title {\n  background-color: #ccc;\n  padding: 5px;\n}\n.zoom-content .detail-container {\n  display: flex;\n  flex-grow: 1;\n  flex-direction: column;\n  padding: 5px;\n}\n.zoom-content .detail-contents {\n  display: flex;\n  flex-direction: row;\n  padding: 5px;\n  background-color: #fff;\n}\n.zoom-content .detail-item {\n  padding: 5px;\n}"},ld75:function(t,e,r){"use strict";r.r(e),e.default=":host {\n  text-align: left;\n}\n:host .mat-form-field {\n  width: 100%;\n  text-align: left;\n}\n:host .input-group {\n  padding: 5px;\n}\n:host label {\n  padding: 5px;\n}\n:host input {\n  padding: 5px;\n  vertical-align: middle;\n}\n:host .radio-group {\n  display: flex;\n  flex-direction: column;\n}\n:host .form-controls {\n  padding: 20px;\n}"},"m/u+":function(t,e,r){"use strict";r.r(e),e.default='<div  class="form-check form-check">\r\n  <label class="form-check-label">\r\n      <input class="form-check-input" [(ngModel)]="chosenTag" type="radio" id="inlineCheckbox3" value={{field.label}} (change)="updateCheckedTag()" /> \r\n          {{field.label}}\r\n      <input class="form-check-input" [(ngModel)]="chosenColor" type="color" id="inlineCheckbox3"/>\r\n  </label>\r\n</div>'},moaK:function(t,e,r){"use strict";r.r(e),e.default='<h4> Current Project </h4>\r\n<form [formGroup]="projCreateForm" (ngSubmit)="update()" id="current-project-form">\r\n  <mat-form-field>\r\n\t<mat-label>Name:</mat-label>\r\n\t<input matInput type="text" formControlName="name" appearance="filled"  required="true">\r\n\r\n  </mat-form-field>\r\n\r\n  <mat-form-field>\r\n    <mat-label>Description</mat-label>\r\n    <textarea matInput formControlName="description" required="true"></textarea>\r\n  </mat-form-field>\r\n\r\n  <div class="button-group small">\r\n    <button mat-raised-button color="basic" class="button small warning" type="button" (click)="close()">Close</button>\r\n    <button mat-raised-button color="warn" class="button small warning" type="delete" (click)="delete()">Delete</button>\r\n    <button mat-raised-button color="primary" class="button small align-right" type="submit" [disabled]="!projCreateForm.valid">Update</button>\r\n  </div>\r\n</form>\r\n'},nOsy:function(t,e,r){"use strict";r.r(e),e.default='<h4> Create a new Project </h4>\r\n<form [formGroup]="projCreateForm" (ngSubmit)="submit()" id="create-project-form">\r\n  <mat-form-field>\r\n\t<mat-label>Name:</mat-label>\r\n\t<input matInput type="text" formControlName="name" required="true">\r\n  </mat-form-field>\r\n\r\n  <mat-form-field>\r\n\t<mat-label>Description</mat-label>\r\n\t<textarea matInput formControlName="description" required="true"></textarea>\r\n  </mat-form-field>\r\n\r\n  <div class="button-group small">\r\n\t<button mat-raised-button color="warn" class="button small warning" type="button" (click)="close()">Close</button>\r\n\t<button mat-raised-button color="primary" class="button small align-right" type="submit" [disabled]="!projCreateForm.valid">Submit</button>\r\n  </div>\r\n</form>\r\n'},obZR:function(t,e,r){"use strict";r.r(e),e.default=""},qk7I:function(t,e,r){"use strict";r.r(e),e.default=":host {\n  font-size: 0.8em;\n  display: block;\n}\n:host .subitem-title {\n  text-align: left;\n  display: flex;\n  justify-content: space-between;\n  color: #555;\n  font-size: 14px;\n  padding: 10px;\n  background-color: #F1F1F1;\n}\n:host .subitem {\n  border-width: 0px 10px;\n  border-color: #F1F1F1;\n  border-style: solid;\n  padding: 10px;\n  overflow-y: auto;\n  background-color: #FFFFFF;\n  height: 40vh;\n}\n:host .main-form-container {\n  padding: 10px;\n}\n:host .subitem-scroll {\n  padding: 10px;\n}\n:host .subitem-scroll {\n  border-width: 5px;\n}\n:host .highlight {\n  background-color: #B3E5FF;\n}\n:host .boxed input[type=radio] {\n  display: none;\n}\n:host .boxed label {\n  background-color: #fff;\n  transition: all 0.3s;\n}\n:host .boxed input[type=radio]:checked + label {\n  background-color: #B3E5FF;\n}\n:host .group-container {\n  display: flex;\n  flex-direction: row;\n  margin: 0;\n  justify-content: space-between;\n}\n:host .select-group {\n  max-height: 20%;\n  height: 20%;\n}\n:host .tag-forms {\n  height: 500px;\n}\n:host .asset-list {\n  max-height: 20%;\n  height: 20%;\n}\n:host .asset-container {\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  cursor: pointer;\n}\n:host .preset-descriptions {\n  max-height: 20%;\n  height: 20%;\n}\n:host .form-item-container {\n  display: flex;\n  flex-direction: row;\n  margin: 0;\n  justify-content: space-between;\n}\n:host .button-group {\n  display: flex;\n  flex-direction: row;\n  margin: 0;\n}\n:host .button-group div {\n  padding: 3px;\n}\n:host .name-group {\n  padding: 3px;\n  font-size: 17px;\n  font-weight: bold;\n}\n:host .list-group {\n  display: flex;\n  flex-direction: row;\n  margin: 0;\n  justify-content: space-between;\n}\n:host .list-suboptions {\n  background-color: #F0F0F0;\n}"},s9wi:function(t,e,r){"use strict";r.r(e),e.default='<div class="select-group">\r\n  <div class="subitem-title" (click)="expandPanel()">Groups</div>\r\n  <div *ngIf="showSubitem" class="subitem group-subitem">\r\n\t\x3c!-- TODO redundant functionality radio is just for style --\x3e\r\n\t<form class="boxed">\r\n\t  <div *ngFor="let group of groupList" (click)="selectGroupForm(group.name)" class="box form">\r\n\t\t<input type="radio" [id]="group.name" [value]="group.name" name="skills" [checked]="isChecked(group.name)">\r\n\t\t<label class="group-container" style="cursor: pointer" [for]="group.name">\r\n\t\t  <div class="name-group">\r\n\t\t\t{{group.name}}\r\n\t\t\t<svg class="box" width="10px" height="10px">\r\n\t\t\t  <rect width="10px" height="10px" style="fill: #ffffff"/>\r\n\t\t\t  <rect width="8px" height="8px" x="1px" y="1px" [style.fill]="group.color"/>\r\n\t\t\t</svg>\r\n\t\t  </div>\r\n\t\t  <div class="button-group">\r\n\t\t\t<div (click)="deleteGroup(group.name)">\r\n\t\t\t  <i class="fas fa-minus"\r\n\t\t\t\t matTooltip="Delete"\r\n\t\t\t\t matTooltipPosition="below">\r\n\t\t\t  </i>\r\n\t\t\t</div>\r\n\t\t\t<div (click)="openRenameModal(renameModal, group.name)">\r\n\t\t\t  <i class="fas fa-edit"\r\n\t\t\t\t matTooltip="Rename"\r\n\t\t\t\t matTooltipPosition="below">\r\n\t\t\t  </i>\r\n\t\t\t</div>\r\n\t\t\t\x3c!-- <div *ngFor = "let icon of groupIcon">  --\x3e\r\n\t\t\t\t\x3c!-- <div *ngIf = "icon.groupName == activeGroup"> --\x3e\r\n\t\t\t\t\t<div (click)="openIconSelection(iconModal, group.name)">\r\n\t\t\t\t\t\t<span class="fa {{group.icon}}"\r\n\t\t\t\t\t\tmatTooltip="icons"\r\n\t\t\t\t\t\tmatTooltipPosition="below"></span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\x3c!-- </div> --\x3e\r\n\t\t\t\x3c!-- </div> --\x3e\r\n\t\t  </div>\r\n\t\t</label>\r\n\t  </div>\r\n\t</form>\r\n\r\n\t<ng-template #renameModal>\r\n\t  <input matInput #groupRename\r\n\t\t\t placeholder="Rename Group"\r\n\t\t\t (keyup.enter)="renameGroup(groupRename.value)">\r\n\t  <br/>\r\n\t  <br/>\r\n\t  <div class="button-group">\r\n\t\t<button matDialogClose color="primary" mat-raised-button (click)="renameGroup(groupRename.value)">Rename</button>\r\n\t\t\x3c!-- <button matDialogClose color="primary" mat-raised-button (click)="saveGroup(groupRename.value, currentIcon)">Rename</button> --\x3e\r\n\t\t<button matDialogClose mat-button>Cancel</button>\r\n\t  </div>\r\n\t</ng-template>\r\n\r\n\t<ng-template #iconModal>\r\n\t\t<div class="iconDropdown">\r\n\t\t<select class="fa" [(ngModel)]="choice">\r\n\t\t\t\x3c!-- <option>------</option> --\x3e\r\n\t\t\t<option class="fa" *ngFor="let icons of iconList" value={{icons.id}} [innerHTML]="icons.unicode"></option>\r\n\t\t</select>\r\n\t\t<br/>\r\n\t  \t<br/>\r\n\t\t<div class="button-group">\r\n\t\t\t<button matDialogClose color="primary" mat-raised-button (click)="saveIcon(choice)">Save</button>\r\n\t\x3c!-- <button matDialogClose color="primary" mat-raised-button (click)="saveGroup(selectedGroup, choice)">Save</button> --\x3e\r\n\t\t\t<button matDialogClose mat-button>Cancel</button>\r\n\t\t  </div>\r\n\t</div>\r\n\t</ng-template>\r\n\r\n  </div> \x3c!-- subitem --\x3e\r\n</div> \x3c!-- select-group --\x3e\r\n'},tw4j:function(t,e,r){"use strict";r.r(e),e.default=":host #current-project-form {\n  display: flex;\n  flex-direction: column;\n  text-align: center;\n  padding: 5em;\n}"},u61n:function(t,e,r){"use strict";r.r(e),e.default=""},u6lZ:function(t,e,r){"use strict";r.r(e),e.default=":host {\n  min-height: 20em;\n}\n:host .fileslisting {\n  height: 20em;\n  overflow-y: scroll;\n  padding: 0px 20px;\n}\n:host .file-row {\n  display: flex;\n  background: #f9f9f9;\n  border: 1px solid transparent;\n  user-select: none;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n}\n:host .clickable {\n  flex: 1;\n  max-width: 20em;\n}\n:host .size {\n  align-items: flex-end;\n}\n:host .file-row:hover {\n  border: 1px solid;\n}\n:host .file-row.selected {\n  background: #d3d3d3;\n}\n.error {\n  background-color: red;\n  color: white;\n}\n.lineBreak {\n  max-width: 350px;\n  word-break: break-word;\n}"},uV4w:function(t,e,r){"use strict";r.r(e),e.default=":host .active-project {\n  background-color: #1aff8c;\n}\n:host .menu button.dropdown.button {\n  padding: 0.85em 1em;\n}\n:host .button.tiny {\n  margin: 0;\n}\n:host .current-project {\n  padding: 30px;\n  font-size: 14px;\n}\n:host .goods {\n  height: 27px;\n  margin: 0px;\n  padding: 0px;\n}\n:host .toggler {\n  margin-left: 10px;\n}\n:host .picker {\n  display: inline-block;\n}\n:host .group-bar {\n  display: flex;\n  flex-direction: row;\n}\n:host .path-buttons {\n  text-align: center;\n}\n:host .project-menu {\n  margin-left: 10px;\n}\n:host .top-bar {\n  position: fixed;\n  margin-top: -50px;\n  height: 50px;\n  z-index: 999;\n}\n:host .top-bar-right .top-bar-left {\n  -webkit-box-flex: 0;\n  flex-wrap: nowrap;\n  flex: 0 1 auto;\n  max-width: 100%;\n}\n:host .my-button {\n  border-radius: 5px;\n  padding: 5px;\n}\n:host .button-spacing {\n  margin-right: 15px;\n}\n@media print, screen and (min-width: 40em) {\n  :host .top-bar {\n    flex-wrap: nowrap;\n    flex: 0 1 auto;\n  }\n}\n:host .example-spacer {\n  flex: 1 1 auto;\n}"},vlUF:function(t,e,r){"use strict";r.r(e),e.default='<mat-toolbar class="top-bar" color="primary">\r\n  <img src="assets/logo.svg" width="40PX">\r\n  <span style="color: white">Taggit</span>\r\n\r\n  <button mat-icon-button [matMenuTriggerFor]="project" color="foreground" class="project-menu">\r\n\t<mat-icon>menu</mat-icon>\r\n  </button>\r\n\r\n\r\n  <mat-menu #project="matMenu">\r\n\t<span mat-menu-item *ngIf="selectedProject" (click)="openProjectModal(selectedProject)">\r\n\t  Current Project : {{selectedProject.name}}\r\n\t</span>\r\n\t<button mat-menu-item (click)="openCreateProjectModal()">Create Project</button>\r\n\t<button mat-menu-item [matMenuTriggerFor]="projectList">Select Project</button>\r\n\t<button mat-menu-item (click)="openShareProjectModal()">Share Project</button>\r\n\t<button mat-menu-item (click)="openFilePicker(test)">File Browser</button>\r\n\t<button mat-menu-item [matMenuTriggerFor]="saveOptions">Save as</button>\r\n  </mat-menu>\r\n\r\n  <mat-menu #projectList="matMenu">\r\n\t<button mat-menu-item class="clickable" *ngFor="let p of projects" (click)="selectProject(p)" [ngClass]="{\'active-project\': p === selectedProject}">\r\n\t  {{ p.name }}\r\n\t</button>\r\n  </mat-menu>\r\n\r\n  <mat-menu #saveOptions="matMenu">\r\n\t<button mat-menu-item (click)=saveFile(0)>CSV file</button>\r\n\t<button mat-menu-item (click)=saveFile(1)>JSON file</button>\r\n\t<button mat-menu-item (click)=openDownloadSelector()>Export to Design Safe</button>\r\n  </mat-menu>\r\n\r\n  <span class="example-spacer"></span>\r\n\r\n  <div *ngIf="showSidebar; else doThat" class="path-buttons">\r\n\t<div class="slides" style="line-height: 1; font-size: 12px">\r\n\t  {{imageName}}\r\n\t  <div class="lr-buttons" style="margin-top: 5px">\r\n\t\t<i (click)="otherPath(false)" style="margin-right: 10px; cursor: pointer" class="fas fa-angle-left"></i>\r\n\t\t<i (click)="otherPath(true)" style="margin-left: 10px; cursor: pointer" class="fas fa-angle-right"></i>\r\n\t  </div>\r\n\t</div>\r\n  </div>\r\n\r\n  <ng-template #doThat>\r\n\t\x3c!-- <input placeholder="Search images" --\x3e\r\n\t\x3c!--\t   name="" --\x3e\r\n\t\x3c!--\t   type="text" --\x3e\r\n\t\x3c!--\t   value="" --\x3e\r\n\t\x3c!--\t   class="goods"/> --\x3e\r\n\r\n\r\n\t\x3c!-- <mat-form-field appearance="fill"> --\x3e\r\n\t\x3c!--   <input matInput placeholder="Search"> --\x3e\r\n\t\x3c!-- </mat-form-field> --\x3e\r\n\r\n\t\x3c!-- <mat-form-field class="example-full-width"> --\x3e\r\n\t\x3c!--   <input matInput type="text" --\x3e\r\n\t\x3c!--\t\t [(ngModel)]="value" --\x3e\r\n\t\x3c!--\t\t placeholder="Search"> --\x3e\r\n\t\x3c!-- </mat-form-field> --\x3e\r\n  </ng-template>\r\n\r\n  <span class="example-spacer"></span>\r\n\r\n  \x3c!-- <div *ngIf="showGroup" class="group-bar grid-x align-right"> --\x3e\r\n  <div class="group-bar grid-x align-right">\r\n\t\r\n\t<button mat-raised-button class="button-spacing" [disabled]="!itemsSelected" (click)="clearAll()">Clear Selected</button>\r\n\r\n\t\x3c!-- A link that looks like a button, links to Hazmapper--\x3e\r\n\t<a class="button-spacing" mat-raised-button href={{hazMapperLink}} title="Open your project in HazMapper" target="_blank">\r\n\t\t<img src="assets/hazmapper-header-logo.png" width="100PX">\r\n\t</a>\r\n\r\n\t<button mat-raised-button\r\n\t\t\t(click)="openAddGroupModal(addGroupModal)" *ngIf="itemsSelected && !showSidebar">Add Group</button>\r\n\r\n\t<ng-template #addGroupModal>\r\n\t  <mat-form-field>\r\n\t\t<mat-label>Group Name</mat-label>\r\n\t\t<input matInput placeholder="Group Name" (keyup.enter)="addToGroupService(groupInput.value)" #groupInput>\r\n\t  </mat-form-field>\r\n\t  <br/>\r\n\t  <br/>\r\n\t  <button mat-raised-button matDialogClose color="primary" (click)="addToGroupService(groupInput.value)">Add Group</button>\r\n\t  <button mat-button matDialogClose color="secondary">Cancel</button>\r\n\t</ng-template>\r\n  </div>\r\n\r\n  \x3c!-- <button *ngIf="groupsExist && showSidebar && activePane == \'preset\'" --\x3e\r\n  \x3c!--\t\t  mat-button --\x3e\r\n  \x3c!--\t\t  color="secondary" --\x3e\r\n  \x3c!--\t\t  (click)="goToRoute()">Tagger</button> --\x3e\r\n\r\n  \x3c!-- <button *ngIf="groupsExist && showSidebar && activePane == \'tagger\'" --\x3e\r\n  \x3c!--\t\t  mat-button --\x3e\r\n  \x3c!--\t\t  color="secondary" --\x3e\r\n  \x3c!--\t\t  (click)="goToRoute()">Preset</button> --\x3e\r\n\r\n\r\n  <button *ngIf="groupsExist && !showSidebar"\r\n\t\t  mat-raised-button\r\n\t\t  style="margin-left: 15px"\r\n\t\t  (click)="openSidebar()">Taggit!</button>\r\n\r\n  <button *ngIf="groupsExist && showSidebar"\r\n\t\t  mat-raised-button\r\n\t\t  style="margin-left: 15px"\r\n\t\t  (click)="openSidebar()">Gallery</button>\r\n\r\n\r\n</mat-toolbar>\r\n'},yXUO:function(t,e,r){"use strict";r.r(e),e.default='<div  class="form-check form-check">\r\n    <label class="form-check-label">\r\n        <input class="form-check-input" type="checkbox" [checked]="isChecked" id="inlineCheckbox1" value={{field.label}} (change)="selected($event, field)" /> \r\n            {{field.label}}\r\n        </label>\r\n</div>'},ynWL:function(t,e,r){"use strict";r.r(e),e.default=""},zUnb:function(t,e,r){"use strict";r.r(e),r("yLV6");var n=r("8Y7J"),i=r("wAiw"),o=r("mrSG"),a=r("cUpR"),s=r("omvX"),c=r("IheW"),l=r("SVse"),u=r("MNke"),p=r("7g+E"),d=r("neit"),f=r("gavF"),h=r("BzsH"),m=r("Fwaw"),g=r("s6ns"),v=r("Mz6y"),b=r("ZwOa"),y=r("Gi4r"),x=r("r0V8"),S=r("elxJ"),k=r("JjoW"),w=r("jGvI"),F=r("EApP"),j=r("vO5K"),O=r("nqmK"),C=r("iInd"),I=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"ngOnInit",value:function(){}}]),t}();I=o.a([Object(n.n)({selector:"app-notfound",template:o.b(r("Af46")).default,styles:[o.b(r("6CRC")).default]}),o.c("design:paramtypes",[])],I);var _,P=function t(){_classCallCheck(this,t)},G=function(){function t(){_classCallCheck(this,t),this.bbox=[],this.assetType=new Set}return _createClass(t,[{key:"updateAssetTypes",value:function(t){this.assetType.has(t)?this.assetType.delete(t):this.assetType.add(t)}},{key:"updateBBox",value:function(t){this.bbox=t}},{key:"toJson",value:function(){return{assetType:_toConsumableArray(this.assetType),bbox:this.bbox}}}]),t}(),L=function t(){_classCallCheck(this,t)},T=function t(){_classCallCheck(this,t)},D=function(){function t(e,r){_classCallCheck(this,t),this.token=e,this.expires=new Date(r)}return _createClass(t,[{key:"isExpired",value:function(){return(new Date).getTime()>this.expires.getTime()}}],[{key:"fromExpiresIn",value:function(e,r){return new t(e,new Date((new Date).getTime()+1e3*r))}}]),t}(),E=function(){function t(e){_classCallCheck(this,t),this.geometry=e.geometry,this.properties=e.properties,this.id=e.id,this.type=e.type,this.assets=e.assets,this.styles=e.styles,this.project_id=e.project_id}return _createClass(t,[{key:"featureType",value:function(){return this.assets&&1===this.assets.length?this.assets[0].asset_type:this.assets&&this.assets.length>1?"collection":this.assets.length?void 0:this.geometry.type}}]),t}();!function(t){t.Production="production",t.Staging="staging",t.Local="local"}(_||(_={}));var N={production:!0,apiUrl:"https://agave.designsafe-ci.org/geo/v2/",clientId:"jHXnvsmQQcmP43qlrG7ATaxFXHQa",baseHref:"/",backend:_.Production},A=r("jtHE"),R=function t(e,r){_classCallCheck(this,t),this.username=e,this.email=r},M=function(){function t(e,r){_classCallCheck(this,t),this.http=e,this.router=r,this._currentUser=new A.a(1),this.currentUser=this._currentUser.asObservable(),this.LS_TOKEN_KEY="hazmapperToken",this.LS_USER_KEY="hazmapperUser"}return _createClass(t,[{key:"login",value:function(){var t=localStorage.getItem(this.LS_TOKEN_KEY);if(t){var e=JSON.parse(t);this.userToken=new D(e.token,new Date(e.expires)),this.userToken&&!this.userToken.isExpired()||(this.logout(),this.redirectToauthenticaor()),this.getUserInfo()}else this.redirectToauthenticaor()}},{key:"redirectToauthenticaor",value:function(){var t="https://agave.designsafe-ci.org/authorize?scope=openid&client_id=".concat(N.clientId,"&response_type=token&redirect_uri=").concat(location.origin+N.baseHref+"callback","&state=").concat(Math.random().toString(36));window.location.href=t}},{key:"isLoggedIn",value:function(){return this.userToken&&!this.userToken.isExpired()}},{key:"logout",value:function(){this.userToken=null,localStorage.removeItem(this.LS_TOKEN_KEY),localStorage.removeItem(this.LS_USER_KEY)}},{key:"setToken",value:function(t,e){this.userToken=D.fromExpiresIn(t,e),localStorage.setItem(this.LS_TOKEN_KEY,JSON.stringify(this.userToken)),this.router.navigate(["/"])}},{key:"getUserInfo",value:function(){var t=this,e=localStorage.getItem(this.LS_USER_KEY),r=JSON.parse(e);null!==r?this._currentUser.next(new R(r.username,r.email)):this.http.get("https://agave.designsafe-ci.org/oauth2/userinfo?schema=openid").subscribe((function(e){var r=new R(e.name,e.email);localStorage.setItem(t.LS_USER_KEY,JSON.stringify(r)),t._currentUser.next(r)}))}}]),t}();M.ctorParameters=function(){return[{type:c.b},{type:C.b}]},M=o.a([Object(n.C)({providedIn:"root"}),o.c("design:paramtypes",[c.b,C.b])],M);var U=r("2Vo4"),z=r("IzEk"),$=r("r8II"),H=r("l5mm"),B=function(){function t(e,r,n){var i=this;_classCallCheck(this,t),this.toastr=e,this.http=r,this.authService=n,this.TIMEOUT=5e3,this._notifications=new A.a(1),this.notifications=this._notifications.asObservable(),this.authService.isLoggedIn()&&Object(H.a)(this.TIMEOUT).subscribe((function(t){i.getRecent()}))}return _createClass(t,[{key:"getRecent",value:function(){var t=this,e=N.apiUrl+"notifications/",r=new Date,n=new Date(r.getTime()-this.TIMEOUT);this.http.get(e+"?startDate="+n.toISOString()).subscribe((function(e){t._notifications.next(e),e.forEach((function(e){switch(e.status){case"success":t.showSuccessToast(e.message);break;case"error":t.showErrorToast(e.message)}}))}))}},{key:"showSuccessToast",value:function(t){this.toastr.success(t)}},{key:"showImportErrorToast",value:function(t){this.toastr.error(t+", trying alternate method")}},{key:"showErrorToast",value:function(t){this.toastr.error(t)}}]),t}();B.ctorParameters=function(){return[{type:F.b},{type:c.b},{type:M}]},B=o.a([Object(n.C)({providedIn:"root"}),o.c("design:paramtypes",[F.b,c.b,M])],B);var V=function(){function t(){_classCallCheck(this,t),this.scrollRestored=!0,this.scrollPosition=0}return _createClass(t,[{key:"setScrollRestored",value:function(t){this.scrollRestored=t}},{key:"setScrollPosition",value:function(){this.scrollPosition=document.documentElement.scrollTop}},{key:"scroll",value:function(){document.documentElement.scroll({top:this.scrollPosition}),document.documentElement.scrollTop==this.scrollPosition&&(this.scrollRestored=!1)}}]),t}();V=o.a([Object(n.C)({providedIn:"root"}),o.c("design:paramtypes",[])],V);var J=function(){function t(e,r,n){_classCallCheck(this,t),this.http=e,this.notificationsService=r,this.scrollService=n,this._pointClouds=new U.a(null),this.pointClouds=this._pointClouds.asObservable(),this._loaded=new U.a(null),this.loaded=this._loaded.asObservable(),this._features=new U.a({type:"FeatureCollection",features:[]}),this.features$=this._features.asObservable(),this._activeFeature=new U.a(null),this._mapMouseLocation=new U.a(null),this._basemap=new U.a("roads"),this._overlays=new U.a(null),this._activeOverlay=new U.a(null)}return _createClass(t,[{key:"getFeatures",value:function(t){var e=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new G,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=$.stringify(r.toJson());this._loaded.next(!1),this.http.get(N.apiUrl+"/projects/".concat(t,"/features/?")+i).subscribe((function(t){t.features=t.features.map((function(t){return new E(t)})),e._features.next(t),e._loaded.next(!0),n&&e.scrollService.setScrollRestored(!0)}))}},{key:"deleteFeature",value:function(t){var e=this;this.http.delete(N.apiUrl+"projects/".concat(t.project_id,"/features/").concat(t.id,"/")).subscribe((function(r){e.getFeatures(t.project_id,new G,!0)}))}},{key:"getPointClouds",value:function(t){var e=this;this.http.get(N.apiUrl+"/projects/".concat(t,"/point-cloud/")).subscribe((function(t){e._pointClouds.next(t)}))}},{key:"addFeature",value:function(t){var e=this;this.features$.pipe(Object(z.a)(1)).subscribe((function(r){r.features.push(t),e._features.next(r)}))}},{key:"addPointCloud",value:function(t,e,r){var n=this,i={description:e,conversion_parameters:r};this.http.post(N.apiUrl+"/projects/".concat(t,"/point-cloud/"),i).subscribe((function(e){n.getPointClouds(t)}),(function(t){}))}},{key:"updateFeatureProperty",value:function(t,e,r){this.http.post(N.apiUrl+"projects/".concat(t,"/features/").concat(e,"/properties/"),r).subscribe((function(t){}),(function(t){}))}},{key:"updateFeatureStyle",value:function(t,e,r){this.http.post(N.apiUrl+"/projects/".concat(t,"/features/").concat(e,"/styles/"),r).subscribe((function(t){}),(function(t){}))}},{key:"deletePointCloud",value:function(t){var e=this;console.log(t),this.http.delete(N.apiUrl+"/projects/".concat(t.project_id,"/point-cloud/").concat(t.id,"/")).subscribe((function(r){e.getPointClouds(t.project_id)}))}},{key:"addFileToPointCloud",value:function(t,e){var r=new FormData;r.append("file",e),console.log(t),this.http.post(N.apiUrl+"/projects/".concat(t.project_id,"/point-cloud/").concat(t.id,"/"),r).subscribe((function(t){console.log(t)}))}},{key:"importFileFromTapis",value:function(t,e){var r=this,n=e.map((function(t){return{system:t.system,path:t.path}})),i={files:n};this.fileList=n,this.http.post(N.apiUrl+"projects/".concat(t,"/features/files/import/"),i).subscribe((function(t){r.notificationsService.showSuccessToast("Import started!")}),(function(t){r.notificationsService.showImportErrorToast("Import failed! Try again?")}))}},{key:"importImage",value:function(t,e,r){var n,i=this,o=e.id;this.fileList.forEach((function(t){t.path==r&&(n=t)}));var a={system_id:n.system,path:n.path};this.http.post(N.apiUrl+"projects/".concat(t,"/features/").concat(o,"/assets/"),a).subscribe((function(t){i.notificationsService.showSuccessToast("Import started!")}))}},{key:"uploadNewFeature",value:function(t,e,r){var n,i=this,o=e;this.http.post(N.apiUrl+"projects/".concat(t,"/features/"),o).subscribe((function(e){n=new E(e[0]),i.importImage(t,n,r)}))}},{key:"downloadGeoJSON",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new G,r=$.stringify(e.toJson()),n=document.createElement("a");this.http.get(N.apiUrl+"/projects/".concat(t,"/features/?")+r).subscribe((function(t){var e=new Blob([JSON.stringify(t)],{type:"application/json"});n.href=URL.createObjectURL(e),n.setAttribute("download","hazmapper.json"),document.body.appendChild(n),n.click(),document.body.removeChild(n)}))}},{key:"uploadFile",value:function(t,e){var r=this,n=new FormData;n.append("file",e,e.name),this.http.post(N.apiUrl+"/projects/".concat(t,"/features/files/"),n).subscribe((function(t){t.forEach((function(t){r.addFeature(new E(t))}))}),(function(t){}))}},{key:"uploadAssetFile",value:function(t,e,r){var n=this,i=new FormData;i.append("file",r,r.name),this.http.post(N.apiUrl+"/api/projects/".concat(t,"/features/").concat(e,"/assets/"),i).subscribe((function(r){var i=n._activeFeature.getValue();i&&i.id===e&&(n.activeFeature=new E(r),n.getFeatures(t))}),(function(t){}))}},{key:"getOverlays",value:function(t){var e=this;this.http.get(N.apiUrl+"/projects/".concat(t,"/overlays/")).subscribe((function(t){e._overlays.next(t)}))}},{key:"addOverlay",value:function(t,e,r,n,i,o,a){var s=this,c=new FormData;c.append("file",e),c.append("label",r),c.append("minLat",n.toFixed(6)),c.append("maxLat",i.toFixed(6)),c.append("minLon",o.toFixed(6)),c.append("maxLon",a.toFixed(6)),this.http.post(N.apiUrl+"/projects/".concat(t,"/overlays/"),c).subscribe((function(e){s.getOverlays(t)}))}},{key:"overlays",get:function(){return this._overlays.asObservable()}},{key:"features",get:function(){return this._features.asObservable()}},{key:"activeFeature",get:function(){return this._activeFeature.asObservable()},set:function(t){t?t===this._activeFeature.getValue()?this._activeFeature.next(null):this._activeFeature.next(t):this._activeFeature.next(null)}},{key:"activeOverlay",get:function(){return this._activeOverlay.asObservable()},set:function(t){this._activeOverlay.next(t)}},{key:"mapMouseLocation",get:function(){return this._mapMouseLocation.asObservable()},set:function(t){this._mapMouseLocation.next(t)}},{key:"basemap",get:function(){return this._basemap.asObservable()},set:function(t){this._basemap.next(t)}}]),t}();J.ctorParameters=function(){return[{type:c.b},{type:B},{type:V}]},J=o.a([Object(n.C)({providedIn:"root"}),o.c("design:paramtypes",[c.b,B,V])],J);var W=function(){function t(e,r,n){_classCallCheck(this,t),this.geoDataService=e,this.authService=r,this.bsModalService=n}return _createClass(t,[{key:"ngOnInit",value:function(){}}]),t}();W.ctorParameters=function(){return[{type:J},{type:M},{type:d.c}]},W=o.a([Object(n.n)({selector:"app-main",template:o.b(r("AZwa")).default,styles:[o.b(r("8lyn")).default]}),o.c("design:paramtypes",[J,M,d.c])],W);var K=function(){function t(e,r){_classCallCheck(this,t),this.route=e,this.auth=r}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this.route.snapshot.fragment,e=new URLSearchParams(t),r=e.get("access_token"),n=+e.get("expires_in");this.auth.setToken(r,n)}}]),t}();K.ctorParameters=function(){return[{type:C.a},{type:M}]},K=o.a([Object(n.n)({selector:"app-callback",template:o.b(r("X9m5")).default,styles:[o.b(r("u61n")).default]}),o.c("design:paramtypes",[C.a,M])],K);var Z=r("SxV6"),q=r("lJxs"),X=r("vkgz"),Y=function(){function t(e,r,n){_classCallCheck(this,t),this.http=e,this.authService=r,this.notificationsService=n,this._projects=new U.a([]),this.projects=this._projects.asObservable(),this._activeProject=new A.a(1),this.activeProject=this._activeProject.asObservable(),this._projectUsers=new A.a(1),this.projectUsers$=this._projectUsers.asObservable(),this._deletingProjects=new U.a([]),this.deletingProjects=this._deletingProjects.asObservable()}return _createClass(t,[{key:"testGeoApi",value:function(){var t=this;this.http.post("http://localhost:8888/projects/",{name:"Awesome Project",description:"Cool project"}).subscribe((function(e){t._projects.next([].concat(_toConsumableArray(t._projects.value),[e])),t._activeProject.next(e)})),this.http.get("http://localhost:8888/projects/").subscribe((function(e){t._projects.next(e)}))}},{key:"updateProjectsList",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=0!==e.length?e:this._projects.value;0!==this._deletingProjects.value.length?this._projects.next(r.map((function(e){return t._deletingProjects.value.find((function(t){return t.id===e.id}))||e}))):this._projects.next(r)}},{key:"getProjects",value:function(){var t=this;this.http.get(N.apiUrl+"/projects/").subscribe((function(e){console.log(e),t.updateProjectsList(e)}),(function(e){t.notificationsService.showErrorToast("Error importing files Design Safe, GeoAPI might be down")}))}},{key:"create",value:function(t){var e=this,r=this.http.post(N.apiUrl+"/projects/",t);return r.subscribe((function(r){console.log(t),e._projects.next([].concat(_toConsumableArray(e._projects.value),[r])),e.setActiveProject(r)})),r}},{key:"setActiveProject",value:function(t){window.localStorage.setItem("lastProj",JSON.stringify(t));try{this._activeProject.next(t)}catch(e){return e}}},{key:"update",value:function(t){var e=this;this.http.put(N.apiUrl+"/projects/".concat(t.id,"/"),t).subscribe((function(t){e._activeProject.next(t)}))}},{key:"delete",value:function(t){var e=this;window.localStorage.setItem("lastProj",JSON.stringify("none")),console.log("We are in the function..."),this._deletingProjects.next([].concat(_toConsumableArray(this._deletingProjects.value),[Object.assign({},t,{deleting:!0})])),this.updateProjectsList(),this.http.delete(N.apiUrl+"projects/".concat(t.id,"/")).subscribe((function(r){window.localStorage.setItem("lastProj",JSON.stringify("none")),e._deletingProjects.next(e._deletingProjects.value.filter((function(e){return e.id!==t.id}))),e.updateProjectsList(),e.getProjects(),window.localStorage.setItem("lastProj",JSON.stringify("none"))}),(function(r){window.localStorage.setItem("lastProj",JSON.stringify("none")),e._deletingProjects.next(e._deletingProjects.value.map((function(e){return e.id===t.id?Object.assign({},e,{deleting:!1,deletingFailed:!0}):e}))),e.updateProjectsList(),e.getProjects(),e.notificationsService.showErrorToast("Could not delete project!"),console.error(r)}))}},{key:"getProjectUsers",value:function(t){var e=this;return this.http.get(N.apiUrl+"/projects/".concat(t.id,"/users/")).pipe(Object(X.a)((function(t){e._projectUsers.next(t)})))}},{key:"addUserToProject",value:function(t,e){var r=this,n={username:e};this.http.post(N.apiUrl+"/projects/".concat(t.id,"/users/"),n).subscribe((function(e){r.getProjectUsers(t).subscribe()}))}},{key:"deleteUserFromProject",value:function(t,e){var r=this;this.http.delete(N.apiUrl+"/projects/".concat(t.id,"/users/").concat(e,"/")).subscribe((function(e){r.getProjectUsers(t).subscribe()}),(function(t){console.log(t)}))}}]),t}();Y.ctorParameters=function(){return[{type:c.b},{type:M},{type:B}]},Y=o.a([Object(n.C)({providedIn:"root"}),o.c("design:paramtypes",[c.b,M,B])],Y);var Q=function(){function t(e){_classCallCheck(this,t),this.projectsService=e,this._groups=new U.a([]),this.groups=this._groups.asObservable(),this._forms=new U.a([]),this.forms=this._forms.asObservable(),this._tempGroup=new U.a([]),this.tempGroup=this._tempGroup.asObservable(),this._showGroup=new U.a(null),this.showGroup=this._showGroup.asObservable(),this._showSidebar=new U.a(null),this.showSidebar=this._showSidebar.asObservable(),this._activeFeature=new U.a(null),this.activeFeature=this._activeFeature.asObservable(),this._activeGroup=new U.a(null),this.activeGroup=this._activeGroup.asObservable(),this._activeFeatureNum=new U.a(null),this.activeFeatureNum=this._activeFeatureNum.asObservable(),this._unselectAll=new U.a(null),this.unselectAll=this._unselectAll.asObservable(),this._featureImagesExist=new U.a(null),this.featureImagesExist=this._featureImagesExist.asObservable(),this._activeFeatureId=new U.a(null),this.activeFeatureId=this._activeFeatureId.asObservable(),this._activePane=new U.a(null),this.activePane=this._activePane.asObservable(),this._tagFeatureGroup=new U.a(null),this.tagFeatureGroup=this._tagFeatureGroup.asObservable(),this._itemsSelected=new U.a(null),this.itemsSelected=this._itemsSelected.asObservable()}return _createClass(t,[{key:"addGroup",value:function(t){this._groups.next(t)}},{key:"setGroupProperties",value:function(t){var e,r={},n=_createForOfIteratorHelper(t);try{var i=function(){var t=e.value;if(t.properties.group){var n,i=_createForOfIteratorHelper(t.properties.group);try{for(i.s();!(n=i.n()).done;){var o=n.value;r[o.name]||(r[o.name]={name:o.name,features:[],color:o.color,icon:o.icon}),-1==r[o.name].features.findIndex((function(e){return e==t}))&&r[o.name].features.push(t)}}catch(a){i.e(a)}finally{i.f()}}};for(n.s();!(e=n.n()).done;)i()}catch(o){n.e(o)}finally{n.f()}this._groups.next(Object.values(r))}},{key:"addForm",value:function(t){this._forms.next(t)}},{key:"addTempGroup",value:function(t){this._tempGroup.next(t)}},{key:"setShowGroup",value:function(t){this._showGroup.next(t)}},{key:"setFeatureImagesExist",value:function(t){this._featureImagesExist.next(t)}},{key:"setShowSidebar",value:function(t){this._showSidebar.next(t)}},{key:"setUnselectAll",value:function(t){this._unselectAll.next(t),this._itemsSelected.next(!t)}},{key:"setItemsSelected",value:function(t){this._itemsSelected.next(t)}},{key:"setActiveProject",value:function(t){this._activeFeature.next(t)}},{key:"setActiveGroup",value:function(t){this._activeGroup.next(t)}},{key:"setActivePane",value:function(t){this._activePane.next(t)}},{key:"setActiveFeatureNum",value:function(t){this._activeFeatureNum.next(t)}},{key:"setActiveFeatureId",value:function(t){this._activeFeatureId.next(t)}},{key:"setTagFeatureGroup",value:function(t,e,r){var n=t+e,i=this._tagFeatureGroup.value;null==i?i={}:i[n]=r,this._tagFeatureGroup.next(i)}}]),t}();Q.ctorParameters=function(){return[{type:Y}]},Q=o.a([Object(n.C)({providedIn:"root"}),o.c("design:paramtypes",[Y])],Q);var tt=r("s7LF"),et=function(){function t(e,r,n){var i=this;_classCallCheck(this,t),this.groupsService=e,this.projectsService=r,this.geoDataService=n,this._forms=new U.a([]),this.forms=this._forms.asObservable(),this._activeFormList=new U.a([]),this.activeFormList=this._activeFormList.asObservable(),this._formGroup=new U.a(null),this.formGroup=this._formGroup.asObservable(),this.featureList=[],this.userTag={type:"text",groupName:"car",label:"Title",options:[],feature:"",extra:[]},this.tagData=[],this.checkedOptions=[],this.chosenTag=[{option:"",id:0},"",""],this.notebook=[],this.tempData=[],this.newTag=[],this.optData=[],this.newOpt=[],this.radioOptions=[],this.groupsService.activeGroup.subscribe((function(t){i.activeGroup=t})),this.groupsService.groups.subscribe((function(t){i.groupList=t})),this.projectsService.activeProject.subscribe((function(t){i.selectedProject=t})),this.groupsService.activeFeatureId.subscribe((function(t){i.selectedFeatureID=t})),this.groupsService.activeFeature.subscribe((function(t){i.selectedFeature=t})),this.geoDataService.features.subscribe((function(t){i.features=t,null!=i.features&&(i.featureList=i.features.features)}))}return _createClass(t,[{key:"addForm",value:function(t,e){var r=this;this.forms.pipe(Object(Z.a)(),Object(q.a)((function(r){return r.map((function(r){return r.groupName==t&&r.formList.push(e),r}))}))).subscribe((function(t){r._forms.next(t)})),this.changeGroupForm(t)}},{key:"updateFormItem",value:function(){var t={};this._activeFormList.value&&(this._activeFormList.value.forEach((function(e){return t[e.label]=e.required?new tt.b(e.value||"",tt.k.required):new tt.b(e.value||"")})),this._formGroup.next(new tt.c(t)))}},{key:"changeGroupForm",value:function(t){var e=this;this.forms.pipe(Object(Z.a)(),Object(q.a)((function(e){return e.map((function(e){if(e.groupName==t)return e.formList}))}))).subscribe((function(t){e._activeFormList.next(t.find((function(t){return null!=t})))})),this.updateFormItem()}},{key:"checkDefault",value:function(t){if("default"===t)try{t=this.selectedFeature.properties.style.color}catch(e){t="#00C8FF"}return t}},{key:"saveStyles",value:function(t,e){var r,n,i=this;t=this.checkDefault(t),this.groupList.forEach((function(e){if(e.name===i.activeGroup){r=e.icon;var o=[{name:e.name,color:e.color,icon:e.icon}];n={group:o,style:{faIcon:r,color:t}}}})),this.geoDataService.updateFeatureProperty(this.selectedProject.id,e,n)}},{key:"addGroup",value:function(t){var e=this,r=new P;r.formList=[],r.groupName=t,this.forms.pipe(Object(Z.a)()).subscribe((function(t){t.push(r),e._forms.next(t)}))}},{key:"deleteForm",value:function(t,e){var r=this;this.forms.pipe(Object(Z.a)(),Object(q.a)((function(r){return r.map((function(r){return r.groupName==t&&(r.formList=r.formList.filter((function(t){return t.label!=e.label}))),r}))}))).subscribe((function(t){return r._forms.next(t)})),this.forms.pipe(Object(Z.a)(),Object(q.a)((function(r){return r.map((function(r){if(r.groupName==t)return r.formList.filter((function(t){return t.label!=e.label}))}))}))).subscribe((function(t){r._activeFormList.next(t.find((function(t){return null!=t})))})),this.changeGroupForm(t)}},{key:"renameForm",value:function(t,e,r){var n=this;this.forms.pipe(Object(Z.a)(),Object(q.a)((function(n){return n.map((function(n){return n.groupName==t&&n.formList.forEach((function(t){t.label==e.label&&(t.label=r)})),n}))}))).subscribe((function(t){n._forms.next(t)})),this.forms.pipe(Object(Z.a)(),Object(q.a)((function(n){return n.map((function(n){return n.groupName==t&&n.formList.forEach((function(t){t.label==e.label&&(t.label=r)})),n.formList}))}))).subscribe((function(t){n._activeFormList.next(t.find((function(t){return null!=t})))})),this.changeGroupForm(t)}},{key:"renameOption",value:function(t,e,r,n){var i=this;this.forms.pipe(Object(Z.a)(),Object(q.a)((function(i){return i.map((function(i){return i.groupName==t&&i.formList.forEach((function(t){t.label==r.label&&t.options.forEach((function(t){t.label==e.label&&(t.label=n)}))})),i}))}))).subscribe((function(t){return i._forms.next(t)})),this.forms.pipe(Object(Z.a)(),Object(q.a)((function(i){return i.map((function(i){return i.groupName==t&&i.formList.forEach((function(t){t.label==r.label&&t.options.forEach((function(t){t.label==e.label&&(t.label=n)}))})),i.formList}))}))).subscribe((function(t){i._activeFormList.next(t.find((function(t){return null!=t})))})),this.changeGroupForm(t)}},{key:"deleteOption",value:function(t,e,r){var n=this;this.forms.pipe(Object(Z.a)(),Object(q.a)((function(n){return n.map((function(n){return n.groupName==t&&n.formList.forEach((function(t){t.label==r.label&&(t.options=t.options.filter((function(t){return t.label!=e.label})))})),n}))}))).subscribe((function(t){n._forms.next(t)})),this.forms.pipe(Object(Z.a)(),Object(q.a)((function(n){return n.map((function(n){return n.groupName==t&&n.formList.forEach((function(t){t.label==r.label&&(t.options=t.options.filter((function(t){return t.label!=e.label})))})),n.formList}))}))).subscribe((function(t){n._activeFormList.next(t.find((function(t){return null!=t})))})),this.changeGroupForm(t)}},{key:"getForm",value:function(t,e){var r=e.filter((function(e){return e.groupName===t})),n=[];return null!=r[0]&&(n=r[0].formList),n}},{key:"saveTag",value:function(t,e,r){var n=this.tempData.findIndex((function(n){return n.groupName===t&&n.label===r&&n.feature===e.feature}));n>-1?this.tempData[n].label=e.label:(e.groupName=t,this.tempData.push(e))}},{key:"getTags",value:function(){var t=this;for(this.tempData=[],this.tempData=this.tagData;;){var e=this.tempData.findIndex((function(t){return"building"===t.groupName}));if(!(e>-1))break;this.tempData.splice(e,1)}var r,n=_createForOfIteratorHelper(this.featureList);try{for(n.s();!(r=n.n()).done;){var i=r.value;null!=i.properties.tag&&i.properties.tag.forEach((function(e){-1==t.tempData.findIndex((function(t){return t.groupName===e.groupName&&t.label===e.label&&t.feature===e.feature}))&&t.tempData.push(e)}))}}catch(o){n.e(o)}finally{n.f()}return this.tempData}},{key:"deleteTag",value:function(t,e){for(var r=this.tempData;;){var n=r.findIndex((function(r){return r.groupName===t&&r.label===e.label&&r.type===e.type}));if(!(n>-1))break;r.splice(n,1)}this.tempData=r,console.log(this.tempData)}},{key:"deleteOpt",value:function(t,e,r){var n=this.optData.findIndex((function(e){return e.groupName===t&&e.label===r.label}));if(n>-1){var i=this.optData[n].options.findIndex((function(t){return t===e}));i>-1&&this.optData[n].options.splice(i,1)}}},{key:"addCheckedOpt",value:function(t,e,r,n){var i,o,a=this,s={key:t.key,label:t.label,choice:t.key,id:e,group:r,title:n};this.checkedOptions.push(s),this.groupList.forEach((function(t){if(t.name==r){a.tempGroup=t.features,i=t.icon;var e=[{name:t.name,color:t.color,icon:t.icon}];o={group:e,style:{faIcon:i,color:"#00C8FF"},tag:[]}}}));var c,l=_createForOfIteratorHelper(this.tempGroup);try{for(l.s();!(c=l.n()).done;){var u=c.value;null==u.properties.tag&&u.properties.tag==[]||u.properties.group.forEach((function(t){if(t.name!=a.activeGroup){var e={name:t.name,color:t.color,icon:t.icon};o.group.push(e)}})),null!=u.properties.tag&&this.tempData.forEach((function(t){t.feature===e&&t.groupName===r&&t.extra.push(s),o.tag.push(t)})),this.geoDataService.updateFeatureProperty(this.selectedProject.id,Number(u.id),o),o.tag=[]}}catch(p){l.e(p)}finally{l.f()}}},{key:"deleteCheckedOpt",value:function(t,e,r,n){var i,o,a=this,s=this.checkedOptions.findIndex((function(i){return i.label===t.label&&i.id===e&&i.group===r&&i.title===n}));this.checkedOptions.splice(s,1),this.groupList.forEach((function(t){if(t.name==r){a.tempGroup=t.features,i=t.icon;var e=[{name:t.name,color:t.color,icon:t.icon}];o={group:e,style:{faIcon:i,color:"#00C8FF"},tag:[]}}}));var c,l=_createForOfIteratorHelper(this.tempGroup);try{for(l.s();!(c=l.n()).done;){var u=c.value;null==u.properties.tag&&u.properties.tag==[]||u.properties.group.forEach((function(t){if(t.name!=a.activeGroup){var e={name:t.name,color:t.color,icon:t.icon};o.group.push(e)}})),null!=u.properties.tag&&this.tempData.forEach((function(i){if(i.feature===e&&i.groupName===r){var a=i.extra.findIndex((function(i){return i.label===t.label&&i.id===e&&i.group===r&&i.title===n}));i.extra.splice(a,1)}o.tag.push(i)})),this.geoDataService.updateFeatureProperty(this.selectedProject.id,Number(u.id),o),o.tag=[]}}catch(p){l.e(p)}finally{l.f()}}},{key:"getCheckedOpt",value:function(){var t=this;this.newOpt=[];var e,r=_createForOfIteratorHelper(this.featureList);try{for(r.s();!(e=r.n()).done;){var n=e.value;null!=n.properties.tag&&n.properties.tag.forEach((function(e){t.newOpt.push(e.extra)}))}}catch(i){r.e(i)}finally{r.f()}return this.newOpt}},{key:"updateSelectedRadio",value:function(t,e,r,n,i){var o,a,s=this;this.groupList.forEach((function(t){if(t.name==n){s.tempGroup=t.features,o=t.icon;var e=[{name:t.name,color:t.color,icon:t.icon}];a={group:e,style:{faIcon:o,color:"#00C8FF"},tag:[]}}}));var c,l=_createForOfIteratorHelper(this.tempGroup);try{for(l.s();!(c=l.n()).done;){var u=c.value;null==u.properties.tag&&u.properties.tag==[]||u.properties.group.forEach((function(t){if(t.name!=s.activeGroup){var e={name:t.name,color:t.color,icon:t.icon};a.group.push(e)}})),null!=u.properties.tag&&this.tagData.forEach((function(o){if(o.feature===r&&o.groupName===n){var s=o.extra.findIndex((function(t){return t.id===r&&t.compId===e&&t.groupName===n&&t.label===i}));if(s>-1)o.extra[s].option=t;else{var c={option:t,id:r,compId:e,groupName:n,label:i};o.extra.push(c)}}a.tag.push(o)})),this.geoDataService.updateFeatureProperty(this.selectedProject.id,Number(u.id),a),a.tag=[]}}catch(p){l.e(p)}finally{l.f()}}},{key:"getSelectedRadio",value:function(){var t=this;this.newOpt=[];var e,r=_createForOfIteratorHelper(this.featureList);try{for(r.s();!(e=r.n()).done;){var n=e.value;null!=n.properties.tag&&n.properties.tag.forEach((function(e){t.newOpt.push(e.extra)}))}}catch(i){r.e(i)}finally{r.f()}return this.newOpt}},{key:"updateNotes",value:function(t,e,r,n,i){var o,a,s=this;this.groupList.forEach((function(t){if(t.name==n){s.tempGroup=t.features,o=t.icon;var e=[{name:t.name,color:t.color,icon:t.icon}];a={group:e,style:{faIcon:o,color:"#00C8FF"},tag:[]}}}));var c,l=_createForOfIteratorHelper(this.tempGroup);try{for(l.s();!(c=l.n()).done;){var u=c.value;null==u.properties.tag&&u.properties.tag==[]||u.properties.group.forEach((function(t){if(t.name!=s.activeGroup){var e={name:t.name,color:t.color,icon:t.icon};a.group.push(e)}})),null!=u.properties.tag&&this.tagData.forEach((function(o){if(o.feature===r&&o.groupName===n){var s=o.extra.findIndex((function(t){return t.id===r&&t.compID===e&&t.groupName===n&&t.label===i}));if(s>-1)o.extra[s].option=t;else{var c={option:t,id:r,groupName:n,compID:e,label:i};o.extra.push(c)}}a.tag.push(o)})),this.geoDataService.updateFeatureProperty(this.selectedProject.id,Number(u.id),a),a.tag=[]}}catch(p){l.e(p)}finally{l.f()}}},{key:"getNotes",value:function(){return this.notebook}}]),t}();et.ctorParameters=function(){return[{type:Q},{type:Y},{type:J}]},et=o.a([Object(n.C)({providedIn:"root"}),o.c("design:paramtypes",[Q,Y,J])],et);var rt=function(){function t(e,r,n,i,o,a){_classCallCheck(this,t),this.formsService=e,this.groupsService=r,this.dialog=n,this.router=i,this.geoDataService=o,this.projectsService=a,this.formOptions=[],this.changed=!1,this.formItemList=[],this.openOption={},this.enabledControls=[],this.showSubitem=!0,this.featureList=[],this.newTag=[],this.newGroup=[]}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.groupsService.activeGroup.subscribe((function(e){t.activeGroup=e})),this.formsService.activeFormList.subscribe((function(e){t.activeFormList=e})),this.groups$=this.groupsService.groups.subscribe((function(e){t.groupList=e})),this.projectsService.activeProject.subscribe((function(e){t.selectedProject=e})),this.geoDataService.features.subscribe((function(e){t.features=e,null!=t.features&&(t.featureList=t.features.features)})),this.formOptions=[],this.formItemList=[],this.formType="text",this.formName="",this.formLabel="",this.formValue="",this.formRequired=!1,this.enabledControls=["Text","Checkbox","Radio","Dropdown","Color"]}},{key:"inputFormLabel",value:function(t){this.formLabel=t.target.value}},{key:"addOptionItem",value:function(t){t&&0==this.formOptions.filter((function(e){return e.label==t})).length&&0!=t.length&&this.formOptions.push({key:t[0],label:t})}},{key:"deleteOption",value:function(t){this.formOptions=this.formOptions.filter((function(e){return e.label!=t.label}))}},{key:"openRenameModal",value:function(t,e){this.selectedGroup=e,this.dialog.open(t)}},{key:"openRenameOptionModal",value:function(t){this.dialog.open(t)}},{key:"renameOption",value:function(t,e){"show-option"==this.showOpt?this.showOpt="no-show-option":this.showOpt="show-option",e=e.toLowerCase(),this.formOptions.forEach((function(r){r.label==t.label&&(r.label=e)}))}},{key:"selectInputForm",value:function(t){this.formType=t,this.formLabel="",this.formOptions=[]}},{key:"clearOption",value:function(){this.optionFilter=""}},{key:"clearLabel",value:function(){this.labelFilter=""}},{key:"addFormItem",value:function(){var t,e,r=this;this.groupList.forEach((function(n){if(n.name==r.activeGroup){r.tempGroup=n.features,t=n.icon;var i=[{name:n.name,color:n.color,icon:n.icon}];e={group:i,style:{faIcon:t,color:"#00C8FF"},tag:[]}}}));var n,i=_createForOfIteratorHelper(this.tempGroup);try{for(i.s();!(n=i.n()).done;){var o=n.value;null==o.properties.tag&&o.properties.tag==[]||(o.properties.group.length>1?o.properties.group.forEach((function(t){if(t.name!=r.activeGroup){var n={name:t.name,color:t.color,icon:t.icon};e.group.push(n)}})):console.log("duck"));var a={type:this.formType,groupName:this.formName,label:this.formLabel,options:[],feature:o.id,extra:[]};if(this.openOption[this.formLabel]=!1,"text"!==this.formType&&0!=this.formOptions.length){var s,c=[],l=_createForOfIteratorHelper(this.formOptions);try{for(l.s();!(s=l.n()).done;){var u=s.value;c.push({key:u[0],label:u})}}catch(p){l.e(p)}finally{l.f()}a.options=this.formOptions}e.tag=this.formsService.getTags(),this.formItemList.push(a),this.formsService.saveTag(this.activeGroup,a,a.label),this.geoDataService.updateFeatureProperty(this.selectedProject.id,Number(o.id),e),e.tag=[],this.newGroup=[]}}catch(p){i.e(p)}finally{i.f()}this.formLabel="",this.formOptions=[],this.labelFilter="",this.changed=!0,this.groupsService.setActivePane("tagger"),this.router.navigateByUrl("/tagger",{skipLocationChange:!0})}},{key:"cancelCreate",value:function(){this.groupsService.setActivePane("tagger"),this.router.navigateByUrl("/tagger",{skipLocationChange:!0})}},{key:"expandPanel",value:function(){this.showSubitem=!this.showSubitem,this.showSubitem}}]),t}();rt.ctorParameters=function(){return[{type:et},{type:Q},{type:g.b},{type:C.b},{type:J},{type:Y}]},rt=o.a([Object(n.n)({selector:"app-tag-generator",template:o.b(r("MHpZ")).default,styles:[o.b(r("dTB+")).default]}),o.c("design:paramtypes",[et,Q,g.b,C.b,J,Y])],rt);var nt=function(){function t(e,r,n,i,o,a){_classCallCheck(this,t),this.groupsService=e,this.formsService=r,this.dialog=n,this.router=i,this.projectsService=o,this.geoDataService=a,this.openOption={},this.showSubitem=!0,this.tagList=this.formsService.getTags(),this.newTag=[],this.featureList=[]}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.activeGroup$=this.activeGroup$=this.groupsService.activeGroup.subscribe((function(e){t.activeGroup=e})),this.activeFeatureId$=this.groupsService.activeFeatureId.subscribe((function(e){t.activeFeatureId=e})),this.formGroup$=this.formsService.formGroup.subscribe((function(e){t.form=e})),this.groupsService.groups.subscribe((function(e){t.groupList=e})),this.projectsService.activeProject.subscribe((function(e){t.selectedProject=e})),this.geoDataService.features.subscribe((function(e){t.features=e,null!=t.features&&(t.featureList=t.features.features)}));var e,r=_createForOfIteratorHelper(this.featureList);try{for(r.s();!(e=r.n()).done;){var n=e.value;null!=n.properties.tag&&n.properties.tag.forEach((function(e){t.newTag.push(e)}))}}catch(i){r.e(i)}finally{r.f()}}},{key:"openRenameModal",value:function(t,e){this.selectedGroup=e,this.dialog.open(t)}},{key:"openRenameOptionModal",value:function(t){this.dialog.open(t)}},{key:"deleteTag",value:function(t,e){for(var r,n,i=this,o=this.tagList;;){var a=o.findIndex((function(r){return r.groupName===t&&r.label===e.label&&r.type===e.type}));if(!(a>-1))break;o.splice(a,1)}this.tagList=o,this.groupList.forEach((function(t){if(t.name==i.activeGroup){i.tempGroup=t.features,r=t.icon;var e=[{name:t.name,color:t.color,icon:t.icon}];n={group:e,style:{faIcon:r,color:"#00C8FF"},tag:[]}}}));var s,c=_createForOfIteratorHelper(this.tempGroup);try{for(c.s();!(s=c.n()).done;){var l=s.value;null==l.properties.tag&&l.properties.tag==[]||l.properties.group.forEach((function(t){if(t.name!=i.activeGroup){var e={name:t.name,color:t.color,icon:t.icon};n.group.push(e)}})),console.log(o),n.tag=o,this.geoDataService.updateFeatureProperty(this.selectedProject.id,Number(l.id),n),n.tag=[]}}catch(u){c.e(u)}finally{c.f()}}},{key:"renameTag",value:function(t){var e=this,r=this.tagList.find((function(e){return e.label===t})),n=this.featureList.find((function(t){return t.id===+r.feature})),i=this.tagList.filter((function(t){return t.groupName==e.activeGroup})),o=n.properties.tag;i=(i=i.filter((function(t){return o.includes(t)}))).filter((function(e){return e.label!=t}));var a=this.tagList.filter((function(t){return i.includes(t)}));i.forEach((function(e){return e.label=t}));var s=a.concat(i);this.featureList.forEach((function(t){t.properties.tag=s,e.geoDataService.updateFeatureProperty(n.project_id,t.id,t.properties)})),this.dialog.closeAll()}},{key:"openOptionToggle",value:function(t){this.openOption[t]?this.openOption[t]=!1:this.openOption[t]=!0}},{key:"createNewTag",value:function(){console.log(this.tagList),this.groupsService.setActivePane("preset"),this.router.navigateByUrl("/preset",{skipLocationChange:!0})}},{key:"onSubmit",value:function(){this.payload=this.form.getRawValue(),console.log(this.tagList)}},{key:"ngOnDestroy",value:function(){this.formGroup$.unsubscribe(),this.activeFeatureId$.unsubscribe(),this.activeGroup$.unsubscribe()}},{key:"expandPanel",value:function(){this.showSubitem=!this.showSubitem,this.showSubitem}}]),t}();nt.ctorParameters=function(){return[{type:Q},{type:et},{type:g.b},{type:C.b},{type:Y},{type:J}]},nt=o.a([Object(n.n)({selector:"app-tag-images",template:o.b(r("zXfM")).default,styles:[o.b(r("qk7I")).default]}),o.c("design:paramtypes",[Q,et,g.b,C.b,Y,J])],nt);var it=function(){function t(e){_classCallCheck(this,t),this.authSvc=e}return _createClass(t,[{key:"canActivate",value:function(t,e){if(this.authSvc.isLoggedIn())return!0;this.authSvc.login()}}]),t}();it.ctorParameters=function(){return[{type:M}]};var ot=[{path:"",component:W,canActivate:[it=o.a([Object(n.C)(),o.c("design:paramtypes",[M])],it)],children:[{path:"tagger",component:nt,canActivateChild:[it]},{path:"preset",component:rt,canActivateChild:[it]}]},{path:"callback",component:K},{path:"404",component:I}],at=function t(){_classCallCheck(this,t)};at=o.a([Object(n.K)({imports:[C.c.forRoot(ot,{onSameUrlNavigation:"reload"})],exports:[C.c],providers:[it]})],at);var st=function(){function t(e){_classCallCheck(this,t),this.authService=e,this.title="viewer"}return _createClass(t,[{key:"ngOnInit",value:function(){this.authService.login()}}]),t}();st.ctorParameters=function(){return[{type:M}]},st=o.a([Object(n.n)({selector:"app-root",template:o.b(r("VzVu")).default,styles:[o.b(r("ynWL")).default]}),o.c("design:paramtypes",[M])],st);var ct=r("4R65");function lt(t,e){return"image"==t.featureType()?function(t,e){var r=Object(ct.divIcon)({className:"leaflet-fa-marker-icon",html:"<i class='fas fa-camera-retro fa-2x light-blue'></i>"});return Object(ct.marker)(e,{icon:r})}(0,e):"collection"==t.featureType()?function(t,e){var r=Object(ct.divIcon)({className:"icon-marker",html:'<i class="fa fa-folder-open fa-2x light-blue"></i>'});return Object(ct.marker)(e,{icon:r})}(0,e):"video"==t.featureType()?function(t,e){var r=Object(ct.divIcon)({className:"leaflet-fa-marker-icon",html:"<i class='fas fa-video fa-2x light-blue'></i>"});return Object(ct.marker)(e,{icon:r})}(0,e):function(t,e){return Object(ct.circleMarker)(e,{radius:8,fillColor:"#d3d3d3",color:"black",weight:1,opacity:1,fillOpacity:.8})}(0,e)}r("JXP8");var ut=r("WVt+"),pt=r("zP0r"),dt=r("pLZG"),ft=function(){function t(e,r){_classCallCheck(this,t),this.GeoDataService=e,this.route=r,this.mapType="normal",this.features=new ct.FeatureGroup,this.featureClickHandler.bind(this),this.mouseEventHandler.bind(this)}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.environment=N,this.overlays=new Map,this.map=new ct.Map("map",{center:[40,-80],zoom:9});var e=ct.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19,attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}),r=ct.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{attribution:"Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community"});this.map.addLayer(e),this.loadFeatures(),this.map.on("mousemove",(function(e){return t.mouseEventHandler(e)})),this.GeoDataService.activeOverlay.pipe(Object(pt.a)(1)).subscribe((function(e){t.addRemoveOverlay(e)})),this.GeoDataService.activeFeature.pipe(Object(dt.a)((function(t){return null!=t}))).subscribe((function(e){t.activeFeature=e;var r=ut.bbox(e);t.map.fitBounds([[r[1],r[0]],[r[3],r[2]]])})),this.GeoDataService.basemap.pipe(Object(pt.a)(1)).subscribe((function(n){"sat"==n&&(t.map.removeLayer(e),t.map.addLayer(r)),"roads"==n&&(t.map.removeLayer(r),t.map.addLayer(e))}))}},{key:"addRemoveOverlay",value:function(t){if(this.overlays.has(t.id))this.features.removeLayer(this.overlays.get(t.id)),this.overlays.delete(t.id);else{var e=ct.imageOverlay(N.apiUrl+"/assets/"+t.path,[[t.minLat,t.minLon],[t.maxLat,t.maxLon]]);this.overlays.set(t.id,e),this.features.addLayer(e)}this.map.fitBounds(this.features.getBounds())}},{key:"mouseEventHandler",value:function(t){this.GeoDataService.mapMouseLocation=t.latlng}},{key:"loadFeatures",value:function(){var t=this,e={pointToLayer:lt};this.GeoDataService.features.subscribe((function(r){t.features.clearLayers();var n=ct.markerClusterGroup({iconCreateFunction:function(t){return ct.divIcon({html:"<div><b>".concat(t.getChildCount(),"</b></div>"),className:"marker-cluster"})}});r.features.forEach((function(r){var i=ct.geoJSON(r,e);i.on("click",(function(e){t.featureClickHandler(e)})),"Point"==r.geometry.type?n.addLayer(i):t.features.addLayer(i)})),t.features.addLayer(n),t.map.addLayer(t.features);try{t.map.fitBounds(t.features.getBounds())}catch(i){}}))}},{key:"featureClickHandler",value:function(t){var e=t.layer.feature;this.GeoDataService.activeFeature=e}}]),t}();ft.ctorParameters=function(){return[{type:J},{type:C.a}]},ft=o.a([Object(n.n)({selector:"app-map",template:o.b(r("eC1z")).default,styles:[o.b(r("obZR")).default]}),o.c("design:paramtypes",[J,C.a])],ft);var ht=r("JX91"),mt=function(){function t(e){_classCallCheck(this,t),this.tapis=e,this.baseUrl="https://agave.designsafe-ci.org/systems/v2/",this._systems=new A.a(1),this.systems=this._systems.asObservable(),this._projects=new A.a(1),this.projects=this._projects.asObservable()}return _createClass(t,[{key:"list",value:function(){var t=this;this.tapis.systemsList({type:"STORAGE"}).subscribe((function(e){t._systems.next(e.result),t._projects.next(e.result.filter((function(t){return t.id.startsWith("project")})))}),(function(e){t._systems.next(null),t._projects.next(null)}))}}]),t}();mt.ctorParameters=function(){return[{type:O.b}]},mt=o.a([Object(n.C)({providedIn:"root"}),o.c("design:paramtypes",[O.b])],mt);var gt=r("dFDH"),vt=function(){function t(e,r,n,i){_classCallCheck(this,t),this.tapis=e,this.http=r,this.authService=n,this.popup=i,this.baseUrl="https://agave.designsafe-ci.org/files/v2/",this._listing=new U.a([]),this.listing=this._listing.asObservable(),this.IMPORTABLE_TYPES=["jpg","jpeg","las","laz","json","geojson","geotiff","tiff","gpx"]}return _createClass(t,[{key:"checkIfSelectable",value:function(t){if("dir"===t.type)return!1;var e=this.getFileExtension(t);return this.IMPORTABLE_TYPES.includes(e)}},{key:"getFileExtension",value:function(t){return t.name.split(".").pop().toLowerCase()}},{key:"listFiles",value:function(t,e,r,n){return this.tapis.filesList({systemId:t,filePath:e,offset:r,limit:n})}},{key:"getParentPath",value:function(t){var e=t.replace("//","/").split("/");return e.pop(),e.join("/")}},{key:"export",value:function(t,e,r,n,i){var o=this,a={duration:3e3,horizontalPosition:"right",verticalPosition:"top"},s="https://agave.designsafe-ci.org/files/v2/media/system/".concat(t).concat(e),c=new Blob([i],{type:".csv"==n?"text/csv":"application/json"}),l=new Date,u=new File([c],r,{lastModified:l.valueOf()}),p=new FormData;p.append("fileToUpload",u),this.http.post(s,p).subscribe((function(r){console.log(r);var n="Successfully saved file to "+t+e;o.popup.open(n,"",a)}),(function(r){console.log(r);var n="Faled to save file to "+t+e;o.popup.open(n,"",a)}))}},{key:"saveState",value:function(){var t=JSON.stringify(this.lastSystem),e=JSON.stringify(this.lastFile);window.localStorage.setItem("system",t),window.localStorage.setItem("file",e)}},{key:"getState",value:function(){try{this.lastSystem=JSON.parse(window.localStorage.getItem("system")),this.lastFile=JSON.parse(window.localStorage.getItem("file")),this.noPreviousSelections=null==this.lastFile}catch(t){console.log(t)}}}]),t}();vt.ctorParameters=function(){return[{type:O.b},{type:c.b},{type:M},{type:gt.a}]},vt=o.a([Object(n.C)({providedIn:"root"}),o.c("design:paramtypes",[O.b,c.b,M,gt.a])],vt);var bt,yt,xt=r("XNiG"),St=r("itXk"),kt=bt=function(){function t(e,r,i,o,a){_classCallCheck(this,t),this.tapisFilesService=e,this.dialogRef=r,this.dialog=i,this.authService=o,this.agaveSystemsService=a,this.currentPath=new n.w,this.allowedExtensions=this.tapisFilesService.IMPORTABLE_TYPES,this.filesList=[],this.inProgress=!0,this.retrievalError=!1,this.selectedFiles=new Map,this.onClose=new xt.a}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.agaveSystemsService.list(),Object(St.a)([this.authService.currentUser,this.agaveSystemsService.systems,this.agaveSystemsService.projects]).pipe(Object(z.a)(1)).subscribe((function(e){var r=_slicedToArray(e,3),n=r[0],i=r[1],o=r[2];t.myDataSystem=i.find((function(t){return"designsafe.storage.default"===t.id})),t.communityDataSystem=i.find((function(t){return"designsafe.storage.community"===t.id})),t.publishedDataSystem=i.find((function(t){return"designsafe.storage.published"===t.id})),t.selectedSystem=t.tapisFilesService.lastSystem,null==t.selectedSystem&&(t.selectedSystem=t.myDataSystem,t.tapisFilesService.lastSystem=t.myDataSystem),t.currentDirectory=t.tapisFilesService.lastFile,t.projects=o,t.currentUser=n;var a={system:t.myDataSystem.id,type:"dir",path:t.currentUser.username};t.tapisFilesService.noPreviousSelections&&(t.selectedSystem=t.myDataSystem,t.tapisFilesService.lastFile=a,t.tapisFilesService.noPreviousSelections=!1),t.browse(t.tapisFilesService.lastFile)}))}},{key:"selectSystem",value:function(t){var e;e=t.id===this.myDataSystem.id?this.currentUser.username:"/";var r={system:t.id,type:"dir",path:e};this.selectedSystem=t,this.tapisFilesService.lastSystem=this.selectedSystem,this.browse(r)}},{key:"browse",value:function(t){this.selectedPath=t.path,this.selectedSystem=this.selectedSystem,"dir"===t.type&&(this.currentDirectory=t,this.tapisFilesService.lastFile=t,this.filesList=[],this.offset=0,this.inProgress=!1,this.getFiles())}},{key:"toRoot",value:function(){var t;t=this.selectedSystem.id===this.myDataSystem.id?this.currentUser.username:"/";var e={system:this.selectedSystem.id,type:"dir",path:t};this.browse(e)}},{key:"getFiles",value:function(){var t=this,e=this.offset%bt.limit==0;!this.inProgress&&e&&(this.inProgress=!0,this.tapisFilesService.listFiles(this.currentDirectory.system,this.currentDirectory.path,this.offset,bt.limit).subscribe((function(e){var r=e.result;if(r.length&&"."===r[0].name){var n=r.shift();t.currentPath.next(n.path),n.path=t.tapisFilesService.getParentPath(n.path),n.name="..",r.unshift(n)}var i=[],o=t.allowedExtensions;r.forEach((function(t,e){("file"==t.type&&o.includes(t.path.split(".").pop().toLowerCase())||"dir"==t.type)&&i.push(t)})),t.inProgress=!1,t.retrievalError=!1,t.filesList=t.filesList.concat(i),t.offset=t.offset+r.length}),(function(e){t.retrievalError=!0,t.inProgress=!1})))}},{key:"select",value:function(t,e,r){t.shiftKey?this.selectFilesShiftClick(r,e):this.tapisFilesService.checkIfSelectable(e)&&this.addSelectedFile(e,r)}},{key:"selectFilesShiftClick",value:function(t,e){this.selectShift(t,e)}},{key:"addSelectedFile",value:function(t,e){-1!=e&&(this.firstFileIndex=e),this.tapisFilesService.checkIfSelectable(t)&&(this.selectedFiles.has(t.path)?this.selectedFiles.delete(t.path):this.selectedFiles.set(t.path,t))}},{key:"chooseFiles",value:function(){this.tapisFilesService.saveState(),this.tapisFilesService.lastSystem=this.selectedSystem;var t=Array.from(this.selectedFiles.values());this.dialogRef.close(t)}},{key:"cancel",value:function(){this.tapisFilesService.saveState(),this.tapisFilesService.lastSystem=this.selectedSystem,this.dialogRef.close()}},{key:"selectAll",value:function(){var t,e=0,r=_createForOfIteratorHelper(this.filesList);try{for(r.s();!(t=r.n()).done;){var n=t.value;this.selectedFiles.has(n.path)||(this.select("",n,-1),e+=1)}}catch(i){r.e(i)}finally{r.f()}1==e&&this.selectedFiles.clear()}},{key:"selectShift",value:function(t,e){null!=this.firstFileIndex&&this.firstFileIndex!=t?this.addRangeFiles(this.firstFileIndex,t,!0):this.addSelectedFile(e,t)}},{key:"addRangeFiles",value:function(t,e,r){for(var n=Math.max(t,e),i=Math.min(t,e);i<n+1;++i)this.addSelectedFile(this.filesList[i],-1);r&&this.addSelectedFile(this.filesList[t],-1)}}]),t}();kt.limit=200,kt.ctorParameters=function(){return[{type:vt},{type:g.d},{type:g.b},{type:M},{type:mt}]},o.a([Object(n.R)(),o.c("design:type",n.w)],kt.prototype,"currentPath",void 0),kt=bt=o.a([Object(n.n)({selector:"app-modal-file-browser",template:o.b(r("0NOL")).default,styles:[o.b(r("u6lZ")).default]}),o.c("design:paramtypes",[vt,g.d,g.b,M,mt])],kt);var wt=yt=function(){function t(e,r,i,o,a){_classCallCheck(this,t),this.tapisFilesService=e,this.dialogRef=r,this.dialog=i,this.authService=o,this.agaveSystemsService=a,this.currentPath=new n.w,this.filesList=[],this.inProgress=!0,this.selectedFiles=new Map,this.onClose=new xt.a,this.passbackData=["","","",""],this.fileName="Custom File Name",this.fileExtension=".csv"}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.downloadSelectForm=new tt.c({Name:new tt.b(this.fileName),Extension:new tt.b(this.fileExtension)}),this.agaveSystemsService.list(),Object(St.a)([this.authService.currentUser,this.agaveSystemsService.systems,this.agaveSystemsService.projects]).pipe(Object(z.a)(1)).subscribe((function(e){var r=_slicedToArray(e,3),n=r[0],i=r[1],o=r[2];t.myDataSystem=i.find((function(t){return"designsafe.storage.default"===t.id})),t.communityDataSystem=i.find((function(t){return"designsafe.storage.community"===t.id})),t.publishedDataSystem=i.find((function(t){return"designsafe.storage.published"===t.id})),t.selectedSystem=t.myDataSystem,t.projects=o,t.currentUser=n;var a={system:t.myDataSystem.id,type:"dir",path:t.currentUser.username};t.browse(a)}))}},{key:"selectSystem",value:function(t){var e;e=t.id===this.myDataSystem.id?this.currentUser.username:"/";var r={system:t.id,type:"dir",path:e};this.browse(r)}},{key:"browse",value:function(t){"dir"===t.type&&(this.currentDirectory=t,this.filesList=[],this.offset=0,this.inProgress=!1,this.getFiles())}},{key:"getFiles",value:function(){var t=this,e=this.offset%yt.limit==0;!this.inProgress&&e&&(this.inProgress=!0,this.tapisFilesService.listFiles(this.currentDirectory.system,this.currentDirectory.path,this.offset,yt.limit).subscribe((function(e){var r=e.result;if(r.length&&"."===r[0].name){var n=r.shift();t.currentPath.next(n.path),t.passbackData[1]=n.path,n.path=t.tapisFilesService.getParentPath(n.path),n.name="..",r.unshift(n)}var i=[];r.forEach((function(t,e){"file"!=t.type&&"dir"!=t.type||i.push(t)})),t.inProgress=!1,t.filesList=t.filesList.concat(i),t.offset=t.offset+r.length}),(function(e){t.inProgress=!1})))}},{key:"chooseFiles",value:function(){this.passbackData[0]=this.selectedSystem.id,this.downloadSelectForm.dirty?this.passbackData[2]=this.downloadSelectForm.get("Name").value:this.passbackData[2]="",this.passbackData[3]=this.fileExtension,this.dialogRef.close(this.passbackData)}},{key:"cancel",value:function(){this.dialogRef.close()}}]),t}();wt.limit=200,wt.ctorParameters=function(){return[{type:vt},{type:g.d},{type:g.b},{type:M},{type:mt}]},o.a([Object(n.R)(),o.c("design:type",n.w)],wt.prototype,"currentPath",void 0),wt=yt=o.a([Object(n.n)({selector:"app-modal-download-selector",template:o.b(r("7E2L")).default,styles:[o.b(r("Ag+R")).default]}),o.c("design:paramtypes",[vt,g.d,g.b,M,mt])],wt);var Ft=function(){function t(e,r,n){_classCallCheck(this,t),this.dialogRef=e,this.dialog=r,this.projectsService=n,this.onClose=new xt.a}return _createClass(t,[{key:"ngOnInit",value:function(){this.projCreateForm=new tt.c({name:new tt.b(""),description:new tt.b("")})}},{key:"close",value:function(t){this.dialogRef.close()}},{key:"submit",value:function(){var t=new L,e=new T;t.description=this.projCreateForm.get("description").value,t.name=this.projCreateForm.get("name").value,e.project=t,this.projectsService.create(e),this.dialogRef.close()}}]),t}();Ft.ctorParameters=function(){return[{type:g.d},{type:g.b},{type:Y}]},Ft=o.a([Object(n.n)({selector:"app-modal-create-project",template:o.b(r("nOsy")).default,styles:[o.b(r("fWOx")).default]}),o.c("design:paramtypes",[g.d,g.b,Y])],Ft);var jt=function(){function t(e,r,n){_classCallCheck(this,t),this.dialogRef=e,this.dialog=r,this.projectsService=n}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.projShareForm=new tt.c({name:new tt.b("")}),this.projectsService.activeProject.subscribe((function(e){t.activeProj=e})),this.projectsService.getProjectUsers(this.activeProj).subscribe((function(e){t.projectUsers=e,t.onlyOne=1==t.projectUsers.length,console.log(t.onlyOne)}))}},{key:"close",value:function(){this.dialogRef.close()}},{key:"submit",value:function(){this.projectsService.addUserToProject(this.activeProj,this.projShareForm.get("name").value),this.dialogRef.close()}},{key:"delete",value:function(t){this.projectsService.deleteUserFromProject(this.activeProj,t),this.dialogRef.close()}}]),t}();jt.ctorParameters=function(){return[{type:g.d},{type:g.b},{type:Y}]},jt=o.a([Object(n.n)({selector:"app-modal-share-project",template:o.b(r("P1jy")).default,styles:[o.b(r("dp4s")).default]}),o.c("design:paramtypes",[g.d,g.b,Y])],jt);var Ot=function(){function t(e,r,n,i){_classCallCheck(this,t),this.dialogRef=e,this.dialog=r,this.projectsService=n,this.projData=i}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.projectsService.activeProject.subscribe((function(e){t.activeProject=e})),this.projCreateForm=new tt.c({name:new tt.b(this.activeProject.name),description:new tt.b(this.activeProject.description)})}},{key:"close",value:function(){this.dialogRef.close()}},{key:"delete",value:function(){confirm("Are you sure you want to delete this project? This will also delete it from HazMapper, and anyone this project was shared with.")&&this.projectsService.delete(this.activeProject),this.dialogRef.close()}},{key:"update",value:function(){var t=new L;t.description=this.projCreateForm.get("description").value,t.name=this.projCreateForm.get("name").value,t.id=this.activeProject.id,t.uuid=this.activeProject.uuid,this.projectsService.update(t),this.dialogRef.close()}}]),t}();Ot.ctorParameters=function(){return[{type:g.d},{type:g.b},{type:Y},{type:void 0,decorators:[{type:n.B,args:[g.a]}]}]},Ot=o.a([Object(n.n)({selector:"app-modal-current-project",template:o.b(r("moaK")).default,styles:[o.b(r("tw4j")).default]}),o.d(3,Object(n.B)(g.a)),o.c("design:paramtypes",[g.d,g.b,Y,Object])],Ot);var Ct=function(){function t(e,r,n,i,o,a,s,c,l,u,p){_classCallCheck(this,t),this.projectsService=e,this.geoDataService=r,this.bsModalService=n,this.groupsService=i,this.formsService=o,this.authService=a,this.filesService=s,this.router=c,this.dialog=l,this.scrollService=u,this.notificationsService=p,this.featureList=[],this.REFRESHTIME=6,this.mapMouseLocation=new ct.LatLng(0,0),this.liveRefresh=!0,this.timer=Object(H.a)(1e3*this.REFRESHTIME),this.itemsSelected=!1,this.foundFilePaths=[]}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.filesService.getState(),this.geoDataService.features.subscribe((function(e){t.features=e,console.log(t.features),null!=t.features&&(t.featureList=t.features.features,t.groupsService.setActiveProject(t.featureList[0]),t.groupsService.setGroupProperties(t.featureList))})),this.groupsService.activeGroup.subscribe((function(e){t.activeGroup=e})),this.groupsService.activePane.subscribe((function(e){t.activePane=e})),this.geoDataService.activeFeature.subscribe((function(e){t.activeFeature=e,t.activeFeature&&console.log(t.activeFeature.assets[0].path)})),this.notificationsService.notifications.subscribe((function(e){var r=e.some((function(t){return"success"===t.status})),n=e.some((function(t){return"error"===t.status}));r&&(t.geoDataService.getFeatures(t.selectedProject.id),console.log("Features Got")),n&&(e.forEach((function(e){if("Error importing "==e.message.substring(0,16)&&!t.foundFilePaths.some((function(t){return t===e.message.substring(16)}))){var r=e.message.substring(16);t.geoDataService.uploadNewFeature(t.selectedProject.id,t.createBlankFeature(),r),t.foundFilePaths.push(r)}})),t.geoDataService.getFeatures(t.selectedProject.id))})),this.authService.currentUser.subscribe((function(e){return t.currentUser=e})),this.projectsService.getProjects(),this.projectsService.projects.subscribe((function(e){if(t.projects=e,t.projects.length){var r;try{r=JSON.parse(window.localStorage.getItem("lastProj")),console.log(r)}catch(n){r=t.projectsService.setActiveProject(t.projects[0])}"none"!=r&&null!=r||(r=t.projects[0]),t.projectsService.setActiveProject(r)}t.groupsService.groups.subscribe((function(e){t.groupList=e,t.groupList.length>0?t.groupsExist=!0:t.groupsExist=!1})),t.groupsService.activeFeatureNum.pipe(Object(ht.a)(0)).subscribe((function(e){t.activeFeatureNum=e,t.groupList.forEach((function(r){r.name==t.activeGroup&&r.features[e]&&(r.features[e].assets[0].display_path?t.imageName=/[^/]*$/.exec(r.features[e].assets[0].display_path)[0]:t.imageName=/[^/]*$/.exec(r.features[e].assets[0].path)[0])}))})),t.groupsService.tempGroup.subscribe((function(e){t.tempGroup=e})),t.groupsService.showGroup.subscribe((function(e){t.showGroup=e})),t.groupsService.showSidebar.subscribe((function(e){t.showSidebar=e})),t.groupsService.tempGroup.subscribe((function(e){t.tempGroup=e})),t.groupsService.itemsSelected.subscribe((function(e){t.itemsSelected=e}))})),this.projectsService.activeProject.subscribe((function(e){t.selectedProject=e,t.getDataForProject(t.selectedProject),t.hazMapperLink="https://hazmapper.tacc.utexas.edu/hazmapper/project/"+e.uuid})),this.geoDataService.mapMouseLocation.pipe(Object(pt.a)(1)).subscribe((function(e){t.mapMouseLocation=e})),this.groupsService.setActiveFeatureNum(0)}},{key:"clearAll",value:function(){this.groupsService.setUnselectAll(!0),this.groupsService.setItemsSelected(!1)}},{key:"reloadFeatures",value:function(){this.geoDataService.getFeatures(this.selectedProject.id)}},{key:"setLiveRefresh",value:function(t){var e=this;t?this.timerSubscription=this.timer.subscribe((function(){e.reloadFeatures()})):this.timerSubscription.unsubscribe()}},{key:"startRefreshTimer",value:function(t){var e=this;t?this.timerSubscription=this.timer.subscribe((function(){e.reloadFeatures(),e.setLiveRefresh(!1)})):this.timerSubscription.unsubscribe()}},{key:"selectProject",value:function(t){this.projectsService.setActiveProject(t),this.getDataForProject(t)}},{key:"getDataForProject",value:function(t){this.geoDataService.getFeatures(t.id),this.geoDataService.getOverlays(t.id),this.geoDataService.getPointClouds(t.id)}},{key:"openFilePicker",value:function(){var t=this;this.foundFilePaths=[],this.dialog.open(kt).afterClosed().subscribe((function(e){null!=e&&t.geoDataService.importFileFromTapis(t.selectedProject.id,e)}))}},{key:"createBlankFeature",value:function(){return{type:"Feature",geometry:{type:"Point",coordinates:[0,0]},properties:{}}}},{key:"openDownloadSelector",value:function(t){var e,r=this;this.dialog.open(wt).afterClosed().subscribe((function(t){console.log(t),e=t,r.saveFile(".json"==e[3],!0,e[0],e[1],e[2])}))}},{key:"openCreateProjectModal",value:function(){this.dialog.open(Ft,{height:"400px",width:"600px"})}},{key:"openShareProjectModal",value:function(){this.dialog.open(jt,{height:"400px",width:"600px"})}},{key:"openProjectModal",value:function(t){var e=this;this.dialog.open(Ot,{height:"400px",width:"600px",data:{id:t.id,name:t.name,description:t.description,uuid:t.uuid}}).afterClosed().subscribe((function(t){e.projectsService.setActiveProject(e.projects[0])}))}},{key:"addToGroupService",value:function(t){if(this.groupName=t,this.groupsService.setActiveGroup(t),1e3!=this.groupList.length)if(t&&0!==t.length)if(this.groupList.filter((function(e){return e.name===t})).length)console.log("Existing Name");else{var e=this.getRandomColor();this.groupList.push({name:t,features:this.tempGroup,color:e,icon:"fa-house-damage"}),this.groupsService.addGroup(this.groupList),this.formsService.addGroup(this.groupName),console.log(this.groupList),console.log(this.tempGroup);var r,n=_createForOfIteratorHelper(this.tempGroup);try{for(n.s();!(r=n.n()).done;){var i=r.value,o=i.properties;console.log(i.properties),o.group?(console.log("nope"),o.group.push({name:t,color:e,icon:"fa-house-damage"})):(console.log("This is actually happening"),(o.group=[]).push({name:t,color:e,icon:"fa-house-damage"})),this.geoDataService.updateFeatureProperty(this.selectedProject.id,Number(i.id),o),console.log("In control-bar"),console.log("Current feat: "+i.id),console.log("featProp: what gets sent to server"),console.log(o),console.log("groupList: internal listing")}}catch(a){n.e(a)}finally{n.f()}}else console.log("Invalid Name");this.tempGroup=[],this.groupsService.addTempGroup(this.tempGroup),this.groupsService.setUnselectAll(!0),this.groupsService.setShowGroup(!1),this.dialog.closeAll()}},{key:"openAddGroupModal",value:function(t){this.dialog.open(t)}},{key:"openSidebar",value:function(){var t=this;this.showSidebar?this.scrollService.setScrollRestored(!0):this.scrollService.setScrollPosition();var e=!this.showSidebar;this.groupsService.setActiveGroup(this.groupList[0].name),0==this.groupList.filter((function(e){return e.name==t.activeGroup}))[0].features.length?this.groupsService.setFeatureImagesExist(!1):this.groupsService.setFeatureImagesExist(!0),this.reloadFeatures(),this.groupsService.setActiveFeatureNum(0),this.groupsService.setShowSidebar(e),this.groupsService.setShowGroup(!1),this.router.navigateByUrl("/tagger",{skipLocationChange:!0}),this.tempGroup=[],this.groupsService.addTempGroup(this.tempGroup),this.groupsService.setUnselectAll(!0),this.groupsService.setActivePane("tagger")}},{key:"otherPath",value:function(t){var e=this,r=this.groupList.filter((function(t){return t.name===e.activeGroup}));t?(this.activeFeatureNum+=1,this.activeFeatureNum=this.activeFeatureNum%r[0].features.length):(0==this.activeFeatureNum&&(this.activeFeatureNum=r[0].features.length),this.activeFeatureNum-=1),this.groupsService.setActiveFeatureNum(this.activeFeatureNum)}},{key:"getRandomColor",value:function(){for(var t="#",e=0;e<6;e++)t+="0123456789ABCDEF"[Math.floor(16*Math.random())];return t}},{key:"goToRoute",value:function(){"preset"==this.activePane?(this.groupsService.setActivePane("tagger"),this.router.navigateByUrl("/tagger",{skipLocationChange:!0})):(this.groupsService.setActivePane("preset"),this.router.navigateByUrl("/preset",{skipLocationChange:!0})),this.groupsService.setActiveGroup(this.activeGroup)}},{key:"clearAndUnselect",value:function(){}},{key:"saveFile",value:function(t){var e,r,n=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",s=arguments.length>4?arguments[4]:void 0,c="FeatureID,longitude,latitude,src",l="",u="",p=!0,d=!1,f=0;this.featureList.forEach((function(e){u=e.project_id;var r,i,o,a=e.geometry.coordinates,s=N.apiUrl+"/assets/"+e.assets[0].path;s=s.replace(/([^:])(\/{2,})/g,"$1/");try{try{r=e.properties.group}catch(m){r=[{color:"#000000",name:"N/A",icon:"fa-house-damage"}]}try{i=e.properties.style}catch(g){i=[]}try{o=e.properties.tag}catch(v){o=[]}r.length>0&&!d&&(c+=",groupName,groupColor,groupIcon,Icon,Color"),null!=o&&p?(c+=",tagType,tagSelection",o.forEach((function(t){var e=0;t.options.forEach((function(t){++e>f&&(c+=",tagOption",f=e)}))})),d||(c+="\r\n",p=!1,d=!0)):(c+="\r\n",d=!0)}catch(b){}if(t)l+=n.compileJSON(a,e.id,s,r,o,i)+", \n";else if(console.log(r),console.log(o),r.length)r.forEach((function(t){if(null!=o)try{o.forEach((function(r){if(r.groupName===t.name){console.log(r);var n=e.id+","+a[0]+","+a[1]+","+s+","+t.name+","+t.color+","+t.icon+","+i.faIcon+","+i.color+","+r.type+","+r.extra[0].option;r.options.forEach((function(t){n+=","+t.label})),c+=n+="\r\n"}}))}catch(m){}else{var r=e.id+","+a[0]+","+a[1]+","+s+","+t.name+","+t.color+","+t.icon+"\r\n";c+=r}}));else{c+="\r\n";var h=e.id+","+a[0]+","+a[1]+","+s+"\r\n";c+=h}})),t?(e=l,r=".json"):(e=c,r=".csv"),i?(""==s?s=u+r:s+=r,this.filesService.export(o,a,s,r,e)):this.download(e,r,u)}},{key:"compileJSON",value:function(t,e,r){var n,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],a=arguments.length>5?arguments[5]:void 0,s="";return console.log(i),0==i.length?(n={longitude:t[0],latitude:t[1],src:r},s+=JSON.stringify(n)):i.forEach((function(i){0==o.length?(n={longitude:t[0],latitude:t[1],src:r,groupName:i.name,groupColor:i.color},s+=JSON.stringify(n)):o.forEach((function(o){if(o.feature==e)try{n={longitude:t[0],latitude:t[1],src:r,groupName:i.name,groupColor:i.color,icon:a.faIcon,"icon color":a.color,"tag name":o.label,"tag type":o.type,"tag selection":o.extra[0].option},s+=JSON.stringify(n)}catch(c){n={longitude:t[0],latitude:t[1],src:r,groupName:i.name,groupColor:i.color,icon:a.faIcon,"icon color":a.color,"tag name":o.label,"tag type":o.type},s+=JSON.stringify(n)}}))})),s}},{key:"download",value:function(t,e,r){var n=new Blob(["\ufeff"+t],{type:"text/csv;charset=utf-8;"}),i=document.createElement("a"),o=URL.createObjectURL(n),a="taggit-proj-"+r;-1!=navigator.userAgent.indexOf("Safari")&&-1==navigator.userAgent.indexOf("Chrome")&&i.setAttribute("target","_blank"),i.setAttribute("href",o),i.setAttribute("download",a+e),i.style.visibility="hidden",document.body.appendChild(i),i.click(),document.body.removeChild(i)}}]),t}();Ct.ctorParameters=function(){return[{type:Y},{type:J},{type:d.c},{type:Q},{type:et},{type:M},{type:vt},{type:C.b},{type:g.b},{type:V},{type:B}]},Ct=o.a([Object(n.n)({selector:"app-control-bar",template:o.b(r("vlUF")).default,styles:[o.b(r("uV4w")).default]}),o.c("design:paramtypes",[Y,J,d.c,Q,et,M,vt,C.b,g.b,V,B])],Ct);var It=r("z6cu"),_t=r("JIr8"),Pt=function(){function t(e){_classCallCheck(this,t),this.authService=e}return _createClass(t,[{key:"intercept",value:function(t,e){var r=this;return e.handle(t).pipe(Object(_t.a)((function(t){401===t.status&&(r.authService.logout(),location.reload());var e=t.error.message||t.statusText;return Object(It.a)(e)})))}}]),t}();Pt.ctorParameters=function(){return[{type:M}]},Pt=o.a([Object(n.C)(),o.c("design:paramtypes",[M])],Pt);var Gt=function(){function t(e){_classCallCheck(this,t),this.authSvc=e}return _createClass(t,[{key:"intercept",value:function(t,e){return t.url.indexOf("https://agave.designsafe-ci.org")>-1&&this.authSvc.isLoggedIn()&&(t=t.clone({setHeaders:{Authorization:"Bearer "+this.authSvc.userToken.token}})),e.handle(t)}}]),t}();Gt.ctorParameters=function(){return[{type:M}]},Gt=o.a([Object(n.C)(),o.c("design:paramtypes",[M])],Gt);var Lt=function(){function t(e,r,n,i,o,a,s){_classCallCheck(this,t),this.geoDataService=e,this.projectsService=r,this.groupsService=n,this.renderer=i,this.spinner=o,this.dialog=a,this.scrollService=s,this.scrolling=!1,this.featureList=[],this.scrollSum=15}return _createClass(t,[{key:"ngAfterViewChecked",value:function(){this.scrollService.scrollRestored&&this.scrollService.scroll()}},{key:"ngOnInit",value:function(){var t=this;this.environment=N,this.geoDataService.loaded.subscribe((function(e){t.loaded=e}),(function(e){t.projectsExist=!1})),this.geoDataService.features.subscribe((function(e){e&&(e.features.length>0?(t.imagesExist=!0,t.featureList=e.features.filter((function(t){try{return"image"===t.assets[0].asset_type}catch(e){return console.error(e),t.assets.push({path:"../../images/Image-not-found.png"}),!1}})),t.featureListScroll=t.featureList.slice(0,t.scrollSum)):t.imagesExist=!1)})),this.projectsService.projects.subscribe((function(e){t.projects=e,t.projects.length?t.projectsExist=!0:t.projectsExist=!1})),this.geoDataService.activeFeature.subscribe((function(e){e&&(t.activeFeature=e)})),this.groupsService.groups.subscribe((function(e){t.groupList=e})),this.groupsService.activeGroup.subscribe((function(e){t.activeGroup=e})),this.groupsService.featureImagesExist.subscribe((function(e){t.groupExist=e})),this.groupsService.tempGroup.subscribe((function(e){t.tempGroup=e})),this.groupsService.showGroup.subscribe((function(e){t.showGroup=e})),this.groupsService.activeFeatureNum.pipe(Object(ht.a)(0)).subscribe((function(e){t.activeFeatureNum=e})),this.groupsService.showSidebar.subscribe((function(e){t.showSidebar=e,t.status=!!e})),this.groupsService.setActiveFeatureNum(0)}},{key:"getPath",value:function(){var t=this,e=this.groupList.filter((function(e){return e.name===t.activeGroup}));null!=e[0]&&null==e[0].features[this.activeFeatureNum].assets[0].path&&(this.groupsService.setActiveFeatureNum(0),null==e[0].features[this.activeFeatureNum]&&this.groupsService.setActiveGroup(this.groupList[0].name));var r=this.environment.apiUrl+"/assets/"+e[0].features[this.activeFeatureNum].assets[0].path;return this.groupsService.setActiveFeatureId(e[0].features[this.activeFeatureNum].id),r=r.replace(/([^:])(\/{2,})/g,"$1/")}},{key:"appendSum",value:function(){var t=this;if(0!=this.featureList.length){if(this.scrollSum==this.featureList.length)return this.spinner.hide(),void(this.scrolling=!1);this.scrollSum>this.featureList.length&&(this.scrollSum=this.featureList.length)}this.featureListScroll=this.featureList.slice(0,this.scrollSum),setTimeout((function(){t.spinner.hide(),t.scrolling=!1}),1300)}},{key:"onScroll",value:function(){this.scrolling||(this.spinner.show(),this.scrollSum+=10,this.appendSum(),this.scrolling=!0)}},{key:"openCreateProjectModal",value:function(){this.dialog.open(Ft,{height:"400px",width:"600px"})}}]),t}();Lt.ctorParameters=function(){return[{type:J},{type:Y},{type:Q},{type:n.Z},{type:p.b},{type:g.b},{type:V}]},Lt=o.a([Object(n.n)({selector:"app-image-gallery",template:o.b(r("Pwca")).default,styles:[o.b(r("N3QO")).default]}),o.c("design:paramtypes",[J,Y,Q,n.Z,p.b,g.b,V])],Lt);var Tt=r("KaVy"),Dt=function(){function t(e,r,n,i,o,a,s){_classCallCheck(this,t),this.geoDataService=e,this.groupsService=r,this.projectsService=n,this.modalService=i,this.formsService=o,this.dialog=a,this.scrollService=s,this.status=!1,this.hasGroup=!1,this.colors=[],this.currentGroup="hello",this.unselectAll=!1,this.tagList=this.formsService.getTags(),this.imageCollection={}}return _createClass(t,[{key:"ngOnInit",value:function(){var t,e=this;this.environment=N,t=(t="../../images/Image-not-found.png"!=this.feature.assets[0].path?this.environment.apiUrl+"/assets/"+this.feature.assets[0].path:this.feature.assets[0].path).replace(/([^:])(\/{2,})/g,"$1/"),this.featureSource=t,this.coordinates=this.feature.geometry.coordinates,this.projectsService.activeProject.subscribe((function(t){e.selectedProject=t})),this.groupsService.groups.subscribe((function(t){e.groupList=t,null!=e.groupList&&e.groupList.length>0&&null!=e.featureSource&&e.groupList.forEach((function(t){t.features.forEach((function(r){r.id==e.feature.id&&(e.colors.includes(t.color)||e.colors.push(t.color),e.hasGroup=!0)}))}))})),this.groupsService.tempGroup.subscribe((function(t){e.tempGroup=t})),this.groupsService.activeGroup.subscribe((function(t){e.activeGroup=t})),this.groupsService.unselectAll.subscribe((function(t){e.unselectAll=t,1==e.unselectAll&&(e.status=!1)}));var r=this.feature.assets[0].display_path;r=this.feature.assets[0].display_path,this.featurePath=r}},{key:"imageSelect",value:function(){var t=this;1==this.unselectAll&&(this.unselectAll=!1,this.groupsService.setUnselectAll(!1),this.tempGroup=[]),this.status=!this.status,this.status&&this.groupsService.setItemsSelected(this.status),this.tempGroup.filter((function(e){return e.assets[0].id==t.feature.assets[0].id})).length>0?this.tempGroup=this.tempGroup.filter((function(e){return e.assets[0].id!=t.feature.assets[0].id})):this.tempGroup.push(this.feature),this.groupsService.addTempGroup(this.tempGroup),0==this.tempGroup.length?(this.groupsService.setShowGroup(!1),this.groupsService.setItemsSelected(!1)):this.groupsService.setShowGroup(!0)}},{key:"imageZoom",value:function(t){this.dialog.open(t)}},{key:"imageDelete",value:function(){var t=this.geoDataService;this.tempGroup.forEach((function(e){t.deleteFeature(e)})),this.groupsService.addTempGroup([]),this.scrollService.setScrollRestored(!0)}},{key:"openMoreGroupsModal",value:function(t){this.dialog.open(t)}},{key:"openImageDeleteModal",value:function(t){this.scrollService.setScrollPosition(),this.dialog.open(t)}},{key:"deleteFromGroup",value:function(t){var e=this;this.groupList.forEach((function(r){r.features.length<=1?e.groupList=e.groupList.filter((function(e){return e.color!=t})):r.color==t&&(r.features=r.features.filter((function(t){return t.id!=e.feature.id})))}));var r=this.feature.properties;r.group=r.group.filter((function(e){return e.color!=t})),this.geoDataService.updateFeatureProperty(this.selectedProject.id,Number(this.feature.id),r),this.groupsService.addGroup(this.groupList),this.colors=this.colors.filter((function(e){return e!=t}))}},{key:"openImageAddModal",value:function(t){this.scrollService.setScrollPosition(),this.dialog.open(t)}},{key:"selectGroupForm",value:function(t,e){var r=this,n="";this.groupsService.setActiveFeatureNum(0),this.groupList.forEach((function(e){e.name==t&&(e.features.push(r.feature),n=e.color)}));var i=e.properties;i.group?i.group.map((function(t){return t.name})).includes(t)||i.group.push({name:t,color:n}):(i.group=[],i.group.push({name:t,color:n})),this.groupList.forEach((function(t){t.name==r.activeGroup&&(r.tempGroup=t.features)}));var o,a=_createForOfIteratorHelper(this.tagList);try{for(a.s();!(o=a.n()).done;){var s=o.value;if(s.feature===this.tempGroup[0].id&&s.groupName===t){var c={type:s.type,groupName:t,label:s.label,options:s.options,feature:this.feature.id,extra:[]};this.formsService.saveTag(this.activeGroup,c,c.label)}}}catch(l){a.e(l)}finally{a.f()}this.geoDataService.updateFeatureProperty(this.selectedProject.id,Number(e.id),i),this.groupsService.addGroup(this.groupList),this.geoDataService.getFeatures(Number(e.project_id)),this.geoDataService.getFeatures(Number(e.project_id))}},{key:"addGroups",value:function(t){var e=this;this.tempGroup.forEach((function(r){e.selectGroupForm(t,r)})),this.groupsService.setUnselectAll(!0),this.scrollService.setScrollRestored(!0)}},{key:"getGroupNameFromColor",value:function(t){var e=this;this.groupList.forEach((function(r){r.color==t&&(e.currentGroup=r.name)}))}}]),t}();Dt.ctorParameters=function(){return[{type:J},{type:Q},{type:Y},{type:Tt.a},{type:et},{type:g.b},{type:V}]},o.a([Object(n.F)(),o.c("design:type",E)],Dt.prototype,"feature",void 0),Dt=o.a([Object(n.n)({selector:"app-image-box",template:o.b(r("ay+3")).default,styles:[o.b(r("if2z")).default]}),o.c("design:paramtypes",[J,Q,Y,Tt.a,et,g.b,V])],Dt);var Et=function(){function t(e){_classCallCheck(this,t),this.formsService=e,this.checked=!1,this.checkedOpt=this.formsService.getCheckedOpt(),this.colorArray=[],this.name=new tt.b("")}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.formGroup$=this.formsService.formGroup.subscribe((function(e){t.form=e})),this.generateColors()}},{key:"generateColors",value:function(){var t=this.field.options.length,e=!1;t%2==1&&(e=!0,t--),t=(t-2)/2;var r=Math.floor(255/t);255===r&&(r=Math.floor(r/2)),this.colorArray.push("#00FF00");for(var n,i=0,o=0;o<t;o++)n=(i+=r).toString(16),this.colorArray.push("#".concat(n,"FF00"));e&&this.colorArray.push("#FFFF00"),i=255;for(var a=0;a<t;a++)2!=(n=(i-=r).toString(16)).length&&(n="0"+n),this.colorArray.push("#FF".concat(n,"00"));this.colorArray.push("#FF0000")}},{key:"ngOnDestroy",value:function(){this.formGroup$.unsubscribe()}}]),t}();Et.ctorParameters=function(){return[{type:et}]},o.a([Object(n.F)(),o.c("design:type",Object)],Et.prototype,"field",void 0),Et=o.a([Object(n.n)({selector:"app-form-generator",template:o.b(r("zusP")).default,styles:[o.b(r("ld75")).default]}),o.c("design:paramtypes",[et])],Et);var Nt=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"ngOnInit",value:function(){}}]),t}();Nt=o.a([Object(n.n)({selector:"app-side-bar",template:o.b(r("c6cR")).default,styles:[o.b(r("IElf")).default]}),o.c("design:paramtypes",[])],Nt);var At=function(){function t(e,r,n,i,o){_classCallCheck(this,t),this.formsService=e,this.groupsService=r,this.geoDataService=n,this.projectsService=i,this.dialog=o,this.featureList=[],this.showSubitem=!0,this.currentIcon="fa-house-damage",this.iconList=[{id:"fa-house-damage",unicode:"&#xf6f1; house-damage"},{id:"fa-car",unicode:"&#xf1b9; car"},{id:"fa-tree",unicode:"&#xf1bb; tree"},{id:"fa-school",unicode:"&#xf549; school"},{id:"fa-archway",unicode:"&#xf557; archway"},{id:"fa-building",unicode:"&#xf1ad; building"},{id:"fa-bus",unicode:"&#xf207; bus"},{id:"fa-church",unicode:"&#xf51d; church"},{id:"fa-helicopter",unicode:"&#xf533; helicopter"},{id:"fa-hospital-alt",unicode:"&#xf47d; hospital"},{id:"fa-hotel",unicode:"&#xf594; hotel"},{id:"fa-igloo",unicode:"&#xf7ae; igloo"},{id:"fa-motorcycle",unicode:"&#xf21c; motorcycle"},{id:"fa-place-of-worship",unicode:"&#xf67f; place-of-worship"},{id:"fa-plane",unicode:"&#xf072; plane"},{id:"fa-school",unicode:"&#xf549; school"},{id:"fa-rocket",unicode:"&#xf135; rocket"},{id:"fa-ship",unicode:"&#xf21a; ship"},{id:"fa-shopping-cart",unicode:"&#xf07a; shopping-cart"},{id:"fa-shuttle-van",unicode:"&#xf5b6; shuttle-van"},{id:"fa-monument",unicode:"&#xf5a6; monument"},{id:"fa-store",unicode:"&#xf54e; store"},{id:"fa-subway",unicode:"&#xf239; subway"},{id:"fa-taxi",unicode:"&#xf1ba; taxi"},{id:"fa-train",unicode:"&#xf238; train"},{id:"fa-truck",unicode:"&#xf0d1; truck"},{id:"fa-truck-pickup",unicode:"&#xf63c; truck-pickup"},{id:"fa-university",unicode:"&#xf19c; university"},{id:"fa-warehouse",unicode:"&#xf494; warehouse"},{id:"fa-bolt",unicode:"&#xf0e7; bolt"}]}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.geoDataService.features.subscribe((function(e){t.features=e,null!=t.features&&(t.featureList=t.features.features)})),this.groupsService.tempGroup.subscribe((function(e){t.tempGroup=e})),this.projectsService.activeProject.subscribe((function(e){t.selectedProject=e})),this.groups$=this.groupsService.groups.subscribe((function(e){t.groupList=e})),this.activeGroup$=this.groupsService.activeGroup.subscribe((function(e){t.activeGroup=e}))}},{key:"selectGroupForm",value:function(t){var e=this;this.groupsService.setActiveGroup(t),0==this.groupList.filter((function(t){return t.name==e.activeGroup}))[0].features.length?this.groupsService.setFeatureImagesExist(!1):this.groupsService.setFeatureImagesExist(!0),this.groupsService.setActiveFeatureNum(0),this.formsService.changeGroupForm(t)}},{key:"openRenameOptionModal",value:function(t){this.dialog.open(t)}},{key:"deleteGroup",value:function(t){for(var e=this,r=this.formsService.getTags();;){var n=r.findIndex((function(e){return e.groupName===t}));if(!(n>-1))break;r.splice(n,1)}this.groupList.forEach((function(r){r.name==t&&(e.tempGroup=r.features,e.groupList=e.groupList.filter((function(e){return e.name!=t})))}));var i,o=_createForOfIteratorHelper(this.tempGroup);try{for(o.s();!(i=o.n()).done;){var a=i.value,s=a.properties;s.group=s.group.filter((function(e){return e.name!=t})),s.tag=r,this.geoDataService.updateFeatureProperty(this.selectedProject.id,Number(a.id),s),this.groupsService.addGroup(this.groupList)}}catch(c){o.e(c)}finally{o.f()}this.groupList.length<=0?(this.showSidebar=!1,this.groupsService.setShowSidebar(this.showSidebar)):this.groupsService.setActiveGroup(this.groupList[0].name)}},{key:"openRenameModal",value:function(t,e){this.selectedGroup=e,this.dialog.open(t)}},{key:"openIconSelection",value:function(t,e){this.selectedGroup=e,this.dialog.open(t)}},{key:"saveIcon",value:function(t){var e=this;this.groupList.forEach((function(r){r.name==e.activeGroup&&(r.icon=t,e.tempGroup=r.features)})),this.groupsService.addGroup(this.groupList);var r,n=_createForOfIteratorHelper(this.tempGroup);try{for(n.s();!(r=n.n()).done;){var i=r.value;i.properties,console.log(i.id),this.groupsService.setActiveGroup(this.activeGroup),this.formsService.saveStyles("default",Number(i.id))}}catch(o){n.e(o)}finally{n.f()}}},{key:"isChecked",value:function(t){return this.activeGroup==t?"checked":""}},{key:"renameGroup",value:function(t){var e=this;this.groupList.forEach((function(r){r.name==e.activeGroup&&(r.name=t,e.tempGroup=r.features),e.dialog.closeAll()})),this.groupsService.addGroup(this.groupList);var r,n=_createForOfIteratorHelper(this.tempGroup);try{for(n.s();!(r=n.n()).done;){var i=r.value,o=i.properties;o.group.forEach((function(r){r.name==e.selectedGroup&&(r.name=t)})),o.tag.forEach((function(r){r.groupName==e.selectedGroup&&(r.groupName=t)})),this.geoDataService.updateFeatureProperty(this.selectedProject.id,Number(i.id),o),this.groupsService.setActiveGroup(t)}}catch(a){n.e(a)}finally{n.f()}}},{key:"expandPanel",value:function(){this.showSubitem=!this.showSubitem,this.showSubitem}},{key:"ngOnDestroy",value:function(){this.groups$.unsubscribe(),this.activeGroup$.unsubscribe()}}]),t}();At.ctorParameters=function(){return[{type:et},{type:Q},{type:J},{type:Y},{type:g.b}]},At=o.a([Object(n.n)({selector:"app-select-group",template:o.b(r("s9wi")).default,styles:[o.b(r("I57P")).default]}),o.c("design:paramtypes",[et,Q,J,Y,g.b])],At);var Rt=function(){function t(e,r,n,i){_classCallCheck(this,t),this.formsService=e,this.groupsService=r,this.geoDataService=n,this.projectsService=i,this.featureList=[],this.groupList=[],this.showSubitem=!0}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.geoDataService.features.subscribe((function(e){e&&(t.featureList=e.features)})),this.projectsService.activeProject.subscribe((function(e){t.selectedProject=e})),this.groups$=this.groupsService.groups.subscribe((function(e){t.groupList=e})),this.activeFeatureNum$=this.groupsService.activeFeatureNum.subscribe((function(e){t.activeFeatureNum=e})),this.activeGroup$=this.groupsService.activeGroup.subscribe((function(e){t.activeGroup=e}))}},{key:"getActiveFeatures",value:function(){var t=this;return this.groupList.filter((function(e){return e.name===t.activeGroup}))[0].features}},{key:"jumpToImage",value:function(t){var e=this,r=0;this.groupList.forEach((function(n){n.name==e.activeGroup&&(r=n.features.indexOf(t))})),this.groupsService.setActiveFeatureNum(r)}},{key:"isActiveFeature",value:function(t){var e=this,r=0;return this.groupList.forEach((function(n){n.name==e.activeGroup&&(r=n.features.indexOf(t))})),this.activeFeatureNum==r}},{key:"deleteGroup",value:function(t){var e=this;this.groupList.forEach((function(r){r.name==t&&(e.tempGroup=r.features,e.groupList=e.groupList.filter((function(e){return e.name!=t})))}));var r,n=_createForOfIteratorHelper(this.tempGroup);try{for(n.s();!(r=n.n()).done;){var i=r.value,o=i.properties;o.group=o.group.filter((function(e){return e.name!=t})),this.geoDataService.updateFeatureProperty(this.selectedProject.id,Number(i.id),o),this.groupsService.addGroup(this.groupList)}}catch(a){n.e(a)}finally{n.f()}this.groupList.length<=0?(this.showSidebar=!1,this.groupsService.setShowSidebar(this.showSidebar)):this.groupsService.setActiveGroup(this.groupList[0].name)}},{key:"deleteAsset",value:function(t){var e=this;this.groupList.forEach((function(r){r.name===e.activeGroup&&(e.tempGroup=r.features,1==r.features.length?e.deleteGroup(r.name):r.features=r.features.filter((function(e){return e.id!=t})))}));var r,n=_createForOfIteratorHelper(this.tempGroup);try{for(n.s();!(r=n.n()).done;){var i=r.value,o=i.properties;o.group=o.group.filter((function(t){return t.name!=e.activeGroup})),this.geoDataService.updateFeatureProperty(this.selectedProject.id,Number(i.id),o),this.groupsService.addGroup(this.groupList)}}catch(a){n.e(a)}finally{n.f()}}},{key:"getAssetDisplay",value:function(t){return t.assets[0].display_path?/[^/]*$/.exec(t.assets[0].display_path)[0]:/[^/]*$/.exec(t.assets[0].path)[0].slice(0,15)+"..."}},{key:"ngOnDestroy",value:function(){this.groups$.unsubscribe(),this.activeFeatureNum$.unsubscribe(),this.activeGroup$.unsubscribe()}},{key:"expandPanel",value:function(){this.showSubitem=!this.showSubitem,this.showSubitem}}]),t}();Rt.ctorParameters=function(){return[{type:et},{type:Q},{type:J},{type:Y}]},Rt=o.a([Object(n.n)({selector:"app-select-image",template:o.b(r("033P")).default,styles:[o.b(r("T7o7")).default]}),o.c("design:paramtypes",[et,Q,J,Y])],Rt);var Mt=r("hOhj"),Ut=r("W5yJ"),zt=r("AaDx"),$t=r("8P0U"),Ht=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"isValid",get:function(){return this.form.controls[this.field.name].valid}},{key:"isDirty",get:function(){return this.form.controls[this.field.name].dirty}},{key:"ngOnInit",value:function(){}}]),t}();o.a([Object(n.F)(),o.c("design:type",Object)],Ht.prototype,"field",void 0),o.a([Object(n.F)(),o.c("design:type",Object)],Ht.prototype,"form",void 0),Ht=o.a([Object(n.n)({selector:"app-form-fields",template:o.b(r("T+fY")).default}),o.c("design:paramtypes",[])],Ht);var Bt=function(){function t(e,r){_classCallCheck(this,t),this.formsService=e,this.groupsService=r,this.isChecked=!1,this.checkedOpt=this.formsService.getCheckedOpt()}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;(this.activeFeatureId$=this.groupsService.activeFeatureId.subscribe((function(e){t.activeFeatureId=e,t.activeGroup$=t.activeGroup$=t.groupsService.activeGroup.subscribe((function(e){t.activeGroup=e}))})),0!=this.formsService.getCheckedOpt().length)&&this.checkedOpt.forEach((function(e){null!=e&&(e.findIndex((function(e){return e.id===t.activeFeatureId&&e.label===t.field.label&&e.group===t.activeGroup&&e.title===t.form.label}))>-1&&(t.isChecked=!0))}))}},{key:"ngOnDestroy",value:function(){this.activeFeatureId$.unsubscribe()}},{key:"selected",value:function(t,e){t.target.checked?(console.log("Checked"),this.formsService.addCheckedOpt(e,this.activeFeatureId,this.activeGroup,this.form.label)):(console.log("Unchecked"),this.formsService.deleteCheckedOpt(e,this.activeFeatureId,this.activeGroup,this.form.label))}}]),t}();Bt.ctorParameters=function(){return[{type:et},{type:Q}]},o.a([Object(n.F)(),o.c("design:type",Object)],Bt.prototype,"field",void 0),o.a([Object(n.F)(),o.c("design:type",tt.c)],Bt.prototype,"form",void 0),Bt=o.a([Object(n.n)({selector:"app-form-checkbox",template:o.b(r("yXUO")).default}),o.c("design:paramtypes",[et,Q])],Bt);var Vt=function(){function t(e,r){_classCallCheck(this,t),this.formsService=e,this.groupsService=r,this.field={}}return _createClass(t,[{key:"ngOnInit",value:function(){var t,e=this;this.activeFeatureId$=this.groupsService.activeFeatureId.subscribe((function(t){e.activeFeatureId=t})),this.activeGroup$=this.activeGroup$=this.groupsService.activeGroup.subscribe((function(t){e.activeGroup=t})),this.formsService.getSelectedRadio().forEach((function(r){null!=r&&((t=r.findIndex((function(t){return t.id===e.activeFeatureId&&2===t.compId&&t.groupName===e.activeGroup&&t.label===e.form.label})))>-1&&(e.chosenTag=r[t].option))}))}},{key:"updateCheckedTag",value:function(){this.formsService.updateSelectedRadio(this.chosenTag,2,this.activeFeatureId,this.activeGroup,this.form.label)}}]),t}();Vt.ctorParameters=function(){return[{type:et},{type:Q}]},o.a([Object(n.F)(),o.c("design:type",Object)],Vt.prototype,"field",void 0),o.a([Object(n.F)(),o.c("design:type",tt.c)],Vt.prototype,"form",void 0),Vt=o.a([Object(n.n)({selector:"app-form-dropdown",template:o.b(r("/WLi")).default}),o.c("design:paramtypes",[et,Q])],Vt);var Jt=function(){function t(){_classCallCheck(this,t),this.field={}}return _createClass(t,[{key:"isValid",get:function(){return this.form.controls[this.field.name].valid}},{key:"isDirty",get:function(){return this.form.controls[this.field.name].dirty}},{key:"ngOnChange",value:function(){console.log(this.field.value)}}]),t}();o.a([Object(n.F)(),o.c("design:type",Object)],Jt.prototype,"field",void 0),o.a([Object(n.F)(),o.c("design:type",tt.c)],Jt.prototype,"form",void 0),Jt=o.a([Object(n.n)({selector:"app-form-file",template:o.b(r("503e")).default,styles:[o.b(r("1NWJ")).default]}),o.c("design:paramtypes",[])],Jt);var Wt=function(){function t(e,r){_classCallCheck(this,t),this.formsService=e,this.groupsService=r,this.field={}}return _createClass(t,[{key:"ngOnInit",value:function(){var t,e=this;this.activeFeatureId$=this.groupsService.activeFeatureId.subscribe((function(t){e.activeFeatureId=t})),this.activeGroup$=this.activeGroup$=this.groupsService.activeGroup.subscribe((function(t){e.activeGroup=t})),this.formsService.getSelectedRadio().forEach((function(r){null!=r&&((t=r.findIndex((function(t){return t.id===e.activeFeatureId&&0===t.compId&&t.groupName===e.activeGroup&&t.label===e.form.label})))>-1&&(e.chosenTag=r[t].option))}))}},{key:"updateCheckedTag",value:function(){this.formsService.updateSelectedRadio(this.chosenTag,0,this.activeFeatureId,this.activeGroup,this.form.label)}}]),t}();Wt.ctorParameters=function(){return[{type:et},{type:Q}]},o.a([Object(n.F)(),o.c("design:type",Object)],Wt.prototype,"field",void 0),o.a([Object(n.F)(),o.c("design:type",tt.c)],Wt.prototype,"form",void 0),Wt=o.a([Object(n.n)({selector:"app-form-radio",template:o.b(r("fIZ9")).default}),o.c("design:paramtypes",[et,Q])],Wt);var Kt=function(){function t(e,r){_classCallCheck(this,t),this.formsService=e,this.groupsService=r,this.field={},this.notes="notes"}return _createClass(t,[{key:"isValid",get:function(){return this.form.controls[this.field.name].valid}},{key:"isDirty",get:function(){return this.form.controls[this.field.name].dirty}},{key:"ngOnInit",value:function(){var t,e=this;this.activeFeatureId$=this.groupsService.activeFeatureId.subscribe((function(t){e.activeFeatureId=t})),this.activeGroup$=this.activeGroup$=this.groupsService.activeGroup.subscribe((function(t){e.activeGroup=t})),this.formsService.getSelectedRadio().forEach((function(r){null!=r&&((t=r.findIndex((function(t){return t.id===e.activeFeatureId&&3===t.compID&&t.groupName===e.activeGroup&&t.label===e.form.label})))>-1&&(e.note=r[t].option))}))}},{key:"updateNotes",value:function(){this.formsService.updateNotes(this.note,3,this.activeFeatureId,this.activeGroup,this.form.label)}}]),t}();Kt.ctorParameters=function(){return[{type:et},{type:Q}]},o.a([Object(n.F)(),o.c("design:type",Object)],Kt.prototype,"field",void 0),o.a([Object(n.F)(),o.c("design:type",tt.c)],Kt.prototype,"form",void 0),Kt=o.a([Object(n.n)({selector:"app-form-textbox",template:o.b(r("dagV")).default}),o.c("design:paramtypes",[et,Q])],Kt);var Zt=function(){function t(e,r){_classCallCheck(this,t),this.formsService=e,this.groupsService=r,this.field={},this.chosenColor="#ffffff"}return _createClass(t,[{key:"ngOnInit",value:function(){var t,e=this;this.activeFeatureId$=this.groupsService.activeFeatureId.subscribe((function(t){e.activeFeatureId=t})),this.activeGroup$=this.activeGroup$=this.groupsService.activeGroup.subscribe((function(t){e.activeGroup=t})),this.formsService.getSelectedRadio().forEach((function(r){null!=r&&((t=r.findIndex((function(t){return t.id===e.activeFeatureId&&1===t.compId&&t.groupName===e.activeGroup&&t.label===e.form.label})))>-1&&(e.chosenTag=r[t].option)),e.chosenColor=e.color}))}},{key:"updateCheckedTag",value:function(){this.formsService.saveStyles(this.chosenColor,this.activeFeatureId),this.formsService.updateSelectedRadio(this.chosenTag,1,this.activeFeatureId,this.activeGroup,this.form.label)}}]),t}();Zt.ctorParameters=function(){return[{type:et},{type:Q}]},o.a([Object(n.F)(),o.c("design:type",Object)],Zt.prototype,"field",void 0),o.a([Object(n.F)(),o.c("design:type",tt.c)],Zt.prototype,"form",void 0),o.a([Object(n.F)(),o.c("design:type",String)],Zt.prototype,"color",void 0),Zt=o.a([Object(n.n)({selector:"app-form-color",template:o.b(r("m/u+")).default,styles:[o.b(r("FN4D")).default]}),o.c("design:paramtypes",[et,Q])],Zt);var qt=r("igqZ"),Xt=function t(){_classCallCheck(this,t)};Xt=o.a([Object(n.K)({declarations:[st,ft,I,W,Ct,K,kt,Lt,Dt,Et,Nt,At,Rt,rt,nt,Ft,Ot,$t.a,wt,Ht,Bt,Vt,Jt,Wt,Kt,jt,Zt],imports:[O.a.forRoot({rootUrl:"https://agave.designsafe-ci.org/"}),a.a,at,c.c,s.b,u.a,p.a,w.a,F.a.forRoot(),d.d.forRoot(),f.a,h.a,m.a,g.c,v.a,b.a,x.a,k.a,S.a,y.a,d.a.forRoot(),tt.j,tt.e,j.a,d.b.forRoot(),l.b,Ut.a,Mt.b,zt.a,gt.b,qt.a],providers:[M,{provide:c.a,multi:!0,useClass:Pt},{provide:c.a,multi:!0,useClass:Gt},{provide:l.a,useValue:N.baseHref}],bootstrap:[st],entryComponents:[kt,wt,Ft,Ot,jt]})],Xt),N.production&&Object(n.sb)(),Object(i.a)().bootstrapModule(Xt).catch((function(t){return console.error(t)}))},zXfM:function(t,e,r){"use strict";r.r(e),e.default='<div class="tag-forms">\r\n  <div class="subitem-title" (click)="expandPanel()">\r\n\t<span>\r\n\t  Tag Images\r\n\t</span>\r\n\t<span>\r\n\t  <span style="cursor: pointer"\r\n\t\t\tmatTooltip="Export Tags"\r\n\t\t\tstyle="cursor: pointer; margin-right: 10px"\r\n\t\t\tmatTooltipPosition="above">\r\n\t\t<i class="fas fa-file-download"></i>\r\n\t  </span>\r\n\r\n\t  <span style="cursor: pointer"\r\n\t\t\t(click)="createNewTag()"\r\n\t\t\tmatTooltip="Add New Tag"\r\n\t\t\tstyle="cursor: pointer; margin-right: 10px"\r\n\t\t\tmatTooltipPosition="above">\r\n\t\t<i class="fas fa-plus"></i>\r\n\t  </span>\r\n\r\n\t  <span style="cursor: pointer; margin-right: 20px"\r\n\t\t\tmatTooltip="Save Tags"\r\n\t\t\tmatTooltipPosition="above">\r\n\t\t<i class="fas fa-save"></i>\r\n\t  </span>\r\n\t</span>\r\n  </div> \x3c!-- subitem-title --\x3e\r\n\r\n  <div *ngIf="showSubitem" class="subitem">\r\n\t  <div class="subitem-scroll">\r\n\t\t  <div *ngFor = "let tag of tagList">\r\n\t\t\t<div *ngIf = "tag.groupName == activeGroup">\r\n\t\t\t\t<div *ngIf = "tag.feature == activeFeatureId">\r\n\t\t\t<div class="form-item-container">  \r\n\t\t\t\t<div class="name-group"> {{tag.label}} ({{tag.type}})</div>\r\n\t\t\t\t\r\n\t\t\t\t<div class="button-group">\r\n\t\t\t\t\t<div (click)="deleteTag(activeGroup, tag)">\r\n\t\t\t\t\t\t<i class="fas fa-minus"\r\n\t\t\t\t\t\t   matTooltip="Delete"\r\n\t\t\t\t\t\t   matTooltipPosition="above"\r\n\t\t\t\t\t\t   style="cursor: pointer">\r\n\t\t\t\t\t\t</i>\r\n\t\t\t\t\t  </div> \x3c!-- delete button --\x3e\r\n\t\t\t\t\t\r\n\t\t\t\t\t<div (click)="openRenameOptionModal(renameFormItemModal)">\r\n\t\t\t\t\t\t<i class="fas fa-edit"\r\n\t\t\t\t\t\t   matTooltip="Rename"\r\n\t\t\t\t\t\t   matTooltipPosition="above"\r\n\t\t\t\t\t\t   style="cursor: pointer">\r\n\t\t\t\t\t\t</i>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\x3c!-- <div *ngIf="tag.type != \'text\'">\r\n\r\n\t\t\t\t\t\t<div (click)="openOptionToggle(tag.label)">\r\n\t\t\t\t\t\t  <i class="fas fa-ellipsis-h"\r\n\t\t\t\t\t\t\t style="cursor: pointer"\r\n\t\t\t\t\t\t\t matTooltip="More Options"\r\n\t\t\t\t\t\t\t matTooltipPosition="above">\r\n\t\t\t\t\t\t  </i>\r\n\t\t\t\t\t\t</div>\r\n\t  \r\n\t\t\t\t\t  </div> three dots --\x3e\r\n\r\n\t\t\t\t\t<ng-template #renameFormItemModal>\r\n\t\t\t\t\t\t<input matInput #formItemRename\r\n\t\t\t\t\t\t\t[(ngModel)]="tag.label"\r\n\t\t\t\t\t\t\tplaceholder="Rename Form Item"\r\n\t\t\t\t\t\t\t(keyup.enter)="renameTag(tag.label)">\r\n\t\t\t\t\t\t<br/>\r\n\t\t\t\t\t\t<br/>\r\n\t\t\t\t\t\t<div class="button-group">\r\n\t\t\t\t\t\t  <button matDialogClose\r\n\t\t\t\t\t\t\t\t  mat-raised-button\r\n\t\t\t\t\t\t\t\t  color="primary" (click)="renameTag(tag.label)"\r\n\t\t\t\t\t\t\t\t  >Rename</button>\r\n\t\t\t\t\t\t\t\t  \x3c!-- (click)="formsService.saveTag(activeGroup, tag, tag.label)" --\x3e\r\n\t\t\t\t\t\t  <button matDialogClose\r\n\t\t\t\t\t\t\t\t  mat-button>Cancel</button>\r\n\t\t\t\t\t\t</div> \r\n\t\t\t\t\t  </ng-template> \x3c!-- rename modal --\x3e\r\n\r\n\t\t\t\t</div> \x3c!-- button group --\x3e\r\n\t\t\t</div> \x3c!-- form-item-container --\x3e\r\n\r\n\t\t\t<div *ngIf="tag.type != \'text\' && openOption[tag.label]" class="options-container">\r\n\t\t\t\t<div *ngFor="let opt of tag.options" class="list-group list-suboptions">\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t{{opt.label}}\r\n\t\t\t\t\t  </div>\r\n\r\n\t\t\t\t\t  <div class="button-group">\r\n\t\t\t\t\t\t<div (click)="formsService.deleteOpt(activeGroup, opt, tag)">\r\n\t\t\t\t\t\t\t<i class="fas fa-minus"\r\n\t\t\t\t\t\t\t   style="cursor: pointer"\r\n\t\t\t\t\t\t\t   matTooltip="Delete"\r\n\t\t\t\t\t\t\t   matTooltipPosition="below">\r\n\t\t\t\t\t\t\t</i>\r\n\t\t\t\t\t\t  </div>\r\n\t\t\t\t\t  </div>  \x3c!-- delete opt button --\x3e\r\n\r\n\t\t\t\t\t  <div (click)="openRenameOptionModal(renameDeeperOptionModal)">\r\n\t\t\t\t\t\t<i class="fas fa-edit"\r\n\t\t\t\t\t\t   matTooltip="Rename"\r\n\t\t\t\t\t\t   style="cursor: pointer"\r\n\t\t\t\t\t\t   matTooltipPosition="below">\r\n\t\t\t\t\t\t</i>\r\n\t\t\t\t\t  </div> \x3c!-- rename opt button --\x3e\r\n\r\n\t\t\t\t\t  <ng-template #renameDeeperOptionModal>\r\n\t\t\t\t\t\t<input matInput #optionDeeperRename\r\n\t\t\t\t\t\t[(ngModel)]="opt.label"\r\n\t\t\t\t\t\t\t   placeholder="Rename Option">\r\n\t\t\t\t\t\t<br/>\r\n\t\t\t\t\t\t<br/>\r\n\t\t\t\t\t\t<div class="button-group">\r\n\t\t\t\t\t\t  <button matDialogClose\r\n\t\t\t\t\t\t\t\t  mat-raised-button\r\n\t\t\t\t\t\t\t\t  color="primary"\r\n\t\t\t\t\t\t\t\t  >Rename</button>\r\n\t\t\t\t\t\t  <button matDialogClose\r\n\t\t\t\t\t\t\t\t  mat-button>Cancel</button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t  </ng-template> \x3c!-- rename opt modal --\x3e\r\n\r\n\r\n\t\t\t\t</div> \x3c!-- opt loop--\x3e\r\n\t\t\t  </div> \x3c!-- opt container--\x3e\r\n\t\t\t  \x3c!-- <app-form-generator [field]="tagList"></app-form-generator> --\x3e\r\n\t\t\t  <app-form-generator [field]="tag"></app-form-generator>\r\n\t\t\t\t</div>\r\n\t\t</div>\r\n\t\t\r\n\t</div>\r\n\t</div> \x3c!-- subitem scroll --\x3e\r\n  </div> \x3c!--subitem --\x3e\r\n\r\n  <ng-template #elseBlock>\r\n\tNo tag presets for this Group!\r\n  </ng-template>\r\n\r\n</div> \x3c!-- tag-forms --\x3e\r\n'},zusP:function(t,e,r){"use strict";r.r(e),e.default='\x3c!-- <label for=""> --\x3e\r\n\x3c!--   Name: --\x3e\r\n\x3c!--   <\\!-- {{field.label}} -\\-> --\x3e\r\n\x3c!--   <input name="" [formControl]="name"/> --\x3e\r\n\x3c!-- </label> --\x3e\r\n\r\n\x3c!-- <div [formGroup]="form"> --\x3e\r\n<div>\r\n  \x3c!-- <label [attr.for]="field.label">{{field.label}}</label> --\x3e\r\n\r\n  <div [ngSwitch]="field.type" class="form-controls">\r\n\t<ng-container *ngSwitchCase="\'text\'">\r\n\t  \t<app-form-textbox [field]="field.options" [form]="field"></app-form-textbox>\r\n\t</ng-container>\r\n\r\n\t<ng-container *ngSwitchCase="\'dropdown\'">\r\n\t  \t<app-form-dropdown [field]="field.options" [form]="field"></app-form-dropdown>\r\n\t</ng-container>\r\n\r\n\t<ng-container *ngSwitchCase="\'radio\'">\r\n\t  <div *ngFor="let opt of field.options" [id]="field.label" class="input-group">\t\r\n\t  \t<app-form-radio [field]="opt" [form]="field"></app-form-radio>\r\n\t  </div>\r\n\t</ng-container>\r\n\r\n\t<ng-container *ngSwitchCase="\'checkbox\'">\r\n\t  <div *ngFor="let opt of field.options" [id]="field.label" class="input-group">\r\n\t\t<app-form-checkbox [field]="opt" [form]="field"></app-form-checkbox>\r\n\t  </div>\r\n\t</ng-container>\r\n\r\n\t<ng-container *ngSwitchCase="\'color\'">\r\n\t\t<div *ngFor="let opt of field.options" [id]="field.label" class="input-group">\r\n\t\t\t<app-form-color [field]="opt" [form]="field" [color]="colorArray[field.options.indexOf(opt)]"></app-form-color>\r\n\t\t</div>\r\n\t</ng-container>\r\n\r\n  </div>\r\n\r\n  \x3c!-- <div class="errorMessage" *ngIf="!isValid"></div> --\x3e\r\n</div>\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\x3c!-- <form (ngSubmit)="onSubmit.emit(this.form.value)" [formGroup]="form" class="form-horizontal"> --\x3e\r\n\x3c!--   <div *ngFor="let field of formsService.activeFormList | async"> --\x3e\r\n\x3c!--   <\\!-- <div *ngFor="let field of fields"> -\\-> --\x3e\r\n\x3c!--\t<\\!-- <app-form-fields [field]="field" [form]="form"></app-form-fields> -\\-> --\x3e\r\n\x3c!--   </div> --\x3e\r\n\x3c!-- </form> --\x3e\r\n'}},[[0,0,5]]]);
//# sourceMappingURL=main-es5.ffcce61a5ba1a28036b4.js.map