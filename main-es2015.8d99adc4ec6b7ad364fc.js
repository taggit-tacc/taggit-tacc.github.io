(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"/WLi":function(e,t,i){"use strict";i.r(t),t.default='<div>\n  <select class="form-control" [(ngModel)]="value" id="field.name" name="field.name" (change)="updateCheckedTag()">\n    <option *ngFor="let opt of field" [value]="opt.label">{{opt.label}}</option>\n  </select>\n</div>\n'},0:function(e,t,i){e.exports=i("zUnb")},"033P":function(e,t,i){"use strict";i.r(t),t.default='<div class="asset-list">\n  <div class="subitem-title" (click)="expandPanel()">Image List</div>\n\n  <div *ngIf="showSubitem" class="subitem asset-subitem">\n\n\t<div *ngFor="let feature of getActiveFeatures()" \n      (click)="jumpToImage(feature)" \n      class="asset-container" \n      [ngClass]="{\'highlight\': isActiveFeature(feature)}">\n\n\t  <div class="name-group">\n\t\t{{ getFeaturePath(feature) }}\n\t  </div>\n\n\t  <div class="button-group">\n\t\t<div (click)="deleteFeature(feature)">\n\t\t  <i class="fas fa-minus"\n\t\t\t matTooltip="Delete"\n\t\t\t matTooltipPosition="above">\n\t\t  </i>\n\t\t</div>\n\t  </div>\n\t</div>\n  </div>\n</div>\n'},"0NOL":function(e,t,i){"use strict";i.r(t),t.default='<h4> Select Files </h4>\n<small><em> Note: Only files are selectable, not folders. Double click on a folder to navigate into it. </em></small>\n<hr>\n<select (ngModelChange)="selectSystem($event)" [(ngModel)]="selectedSystem">\n\t<option [ngValue]="myDataSystem"> My Data </option>\n\t<option [ngValue]="communityDataSystem"> Community Data</option>\n\t<option [ngValue]="publishedDataSystem"> Published Data</option>\n\t<optgroup label="My Projects">\n\t\t<option *ngFor="let project of projects" [ngValue]="project">{{project.description}}</option>\n\t</optgroup>\n</select>\n\n<div class="fileslisting"  infiniteScroll [infiniteScrollDistance]="2" [infiniteScrollThrottle]="100" [scrollWindow]="false" (scrolled)="getFiles()">\n\t<div class="clickable" class="grid-x file-row" (dblclick)="toRoot()">\n\t\t<i class="fas fa-folder"></i>\n\t\t<span > Home </span>\n\t</div>\n\t<div class="clickable" class="grid-x file-row">\n\t\t<i class="fas fa-folder-open"></i>\n\t\t<span class="lineBreak"> {{selectedPath}} </span>\n\t</div>\n\t<div *ngIf="retrievalError" class="grid-x file-row" class="error">\n\t\tError retrieving files\n\t</div>\n\t<div class="grid-x file-row" *ngFor="let file of filesList; let fileIndex = index" [ngClass]="{\'selected\':selectedFiles.has(file.path)}">\n\t\t<div class="clickable" (click)="select($event, file, fileIndex)"  (dblclick)="browse(file)">\n\n\t\t\t<i class="fas fa-folder" *ngIf="file.type === \'dir\'" ></i>\n\t\t\t<i class="far fa-file" *ngIf="file.type !== \'dir\'"></i>\n\t\t\t<span > {{ file.name }} </span>\n\t\t</div>\n\t\t<div class="size">\n\t\t\t{{file.length | filesize }}\n\t\t</div>\n\t</div>\n\t<div class="grid-x" *ngIf="inProgress">\n\t\t<div class="cell medium-12">\n\t\t  <i class="fas fa-spin fa-atom"></i>\n\t\t</div>\n\t  </div>\n</div>\n\n<div class="button-group">\n\t<button mat-raised-button color="basic" (click)="selectAll()">Select all</button>\n\t<button mat-raised-button color="warn" class="button warning" (click)="cancel()">Done</button>\n\t<button mat-raised-button color="primary" class="button" [disabled]="!selectedFiles.size" (click)="chooseFiles()">Import</button>\n</div>\n'},"1NWJ":function(e,t,i){"use strict";i.r(t),t.default=":host .drop-container {\n  background: #fff;\n  border-radius: 6px;\n  height: 150px;\n  width: 100%;\n  box-shadow: 1px 2px 20px rgba(10, 10, 10, 0.1);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border: 2px dashed #c0c4c7;\n}\n:host p {\n  font-size: 16px;\n  font-weight: 400;\n  color: #c0c4c7;\n}\n:host .upload-button {\n  display: inline-block;\n  border: none;\n  outline: none;\n  cursor: pointer;\n  color: #5754a3;\n}\n:host .upload-button input {\n  display: none;\n}\n:host .dropzone {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-direction: column;\n  border-radius: 5px;\n  background: white;\n  margin: 10px 0;\n}\n:host .dropzone.hovering {\n  border: 2px solid #f16624;\n  color: #dadada !important;\n}\n:host progress::-webkit-progress-value {\n  transition: width 0.1s ease;\n}"},"503e":function(e,t,i){"use strict";i.r(t),t.default='<div [formGroup]="form">\n  <div *ngIf="!field.value" class="drop-container dropzone" dropZone (hovered)="toggleHover($event)"\n       (dropped)="field.onUpload($event)" [class.hovering]="isHovering">\n    <p class="m-0">\n      Drag a file here or\n      <label class="upload-button">\n\t<input type="file" multiple="" (change)="field.onUpload($event.target.files)"> browse\n      </label>\n      to upload.\n    </p>\n  </div>\n  <div *ngIf="field.value">\n    \x3c!-- <button type="button" class="btn btn-primary">Change</button> --\x3e\n    <div class="card">\n      <img class="card-img-top" [src]="field.value">\n    </div>\n  </div>\n</div>\n'},"6CRC":function(e,t,i){"use strict";i.r(t),t.default=""},"7E2L":function(e,t,i){"use strict";i.r(t),t.default='<h4> Select Files </h4>\n<small><em> If no folder is selected, the file will be saved in the root of your selected system. </em></small>\n<hr>\n<select (ngModelChange)="selectSystem($event)" [(ngModel)]="selectedSystem">\n\t<option [ngValue]="myDataSystem"> My Data </option>\n\t<option [ngValue]="communityDataSystem"> Community Data</option>\n\t<option [ngValue]="publishedDataSystem"> Published Data</option>\n\t<optgroup label="My Galleries">\n\t\t<option *ngFor="let project of projects" [ngValue]="project">{{project.description}}</option>\n\t</optgroup>\n</select>\n<div class="fileslisting"  infiniteScroll [infiniteScrollDistance]="2" [infiniteScrollThrottle]="100" [scrollWindow]="false" (scrolled)="getFiles()">\n\t<div class="grid-x file-row" *ngFor="let file of filesList" [ngClass]="{\'selected\':selectedFiles.has(file.path)}">\n\t\t<div class="clickable" (dblclick)="browse(file)">\n\t\t\t<i class="fas fa-folder" *ngIf="file.type === \'dir\'" ></i>\n\t\t\t<i class="far fa-file" *ngIf="file.type !== \'dir\'"></i>\n\t\t\t<span > {{ file.name }} </span>\n\t\t</div>\n\t\t<div class="size">\n\t\t\t{{file.length | filesize }}\n\t\t</div>\n\t</div>\n\t<div class="grid-x" *ngIf="inProgress">\n\t\t<div class="cell medium-12">\n\t\t  <i class="fas fa-spin fa-atom"></i>\n\t\t</div>\n\t  </div>\n\n</div>\n\n<form [formGroup]="downloadSelectForm" (ngSubmit)="update()" id="current-project-form">\n    <div>\n        <small><em> If no filename is specified, it will default to the Gallery ID number. </em></small>\n    </div>\n\n    <mat-form-field>\n        <input matInput type="text" formControlName="Name" appearance="filled"  required="false">\n    </mat-form-field>\n</form>\n<span class="radio-box">\n<mat-radio-group [(ngModel)]="fileExtension">\n    <mat-radio-button value=".csv">.csv</mat-radio-button>\n    <mat-radio-button value=".json">.json</mat-radio-button>\n</mat-radio-group>\n</span>\n\n<div class="button-group">\n\t<button mat-raised-button color="warn" class="button warning" (click)="cancel()">Cancel</button>\n\t<button mat-raised-button color="primary" class="button" (click)="chooseFiles()">Save</button>\n</div>\n'},"8lyn":function(e,t,i){"use strict";i.r(t),t.default=":host .top-bar {\n  height: 40px;\n  padding: 5px;\n  padding-left: 0.5em;\n  flex-wrap: nowrap;\n  position: fixed;\n  overflow: hidden;\n  width: 100%;\n  z-index: 999;\n}\n:host .top-bar-right .top-bar-left {\n  -webkit-box-flex: 0;\n  flex-wrap: nowrap;\n  flex: 0 1 auto;\n  max-width: 100%;\n}\n@media print, screen and (min-width: 40em) {\n  :host .top-bar {\n    flex-wrap: nowrap;\n    flex: 0 1 auto;\n  }\n}"},AZwa:function(e,t,i){"use strict";i.r(t),t.default='\x3c!-- <div class="grid-x"> --\x3e\n\n\x3c!--   <div class="top-bar" style="background-color: black" id="navbar"> --\x3e\n\n\x3c!--\t<div class="top-bar-left"> --\x3e\n\x3c!--\t  <img src="assets/logo.svg" width="30PX"> --\x3e\n\x3c!--\t  <span style="color: white">Taggit</span> --\x3e\n\x3c!--\t</div> --\x3e\n\n\n\x3c!--\t<div class="top-bar-right"> --\x3e\n\x3c!--\t  <div class="light-blue" *ngIf="currentUser">{{ currentUser.username }}</div> --\x3e\n\x3c!--\t</div> --\x3e\n\n\x3c!--   </div> --\x3e\n\n\x3c!--   <\\!-- <div class="cell control-bar"> -\\-> --\x3e\n\x3c!--   <\\!--\t<app-control-bar></app-control-bar> -\\-> --\x3e\n\x3c!--   <\\!-- </div> -\\-> --\x3e\n\x3c!-- </div> --\x3e\n\n<app-control-bar></app-control-bar>\n\x3c!-- NOTE Router Outlet was here --\x3e\n<app-image-gallery></app-image-gallery>\n\n\x3c!-- NOTE Leaflet was here --\x3e\n'},Af46:function(e,t,i){"use strict";i.r(t),t.default="<p>\n  notfound works!\n</p>\n"},"Ag+R":function(e,t,i){"use strict";i.r(t),t.default=":host {\n  min-height: 20em;\n}\n:host .fileslisting {\n  height: 20em;\n  overflow-y: scroll;\n  padding: 0px 20px;\n}\n:host .file-row {\n  display: flex;\n  background: #f9f9f9;\n  border: 1px solid transparent;\n  user-select: none;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n}\n:host .clickable {\n  flex: 1;\n  max-width: 20em;\n}\n:host .size {\n  align-items: flex-end;\n}\n:host .file-row:hover {\n  border: 1px solid;\n}\n:host .file-row.selected {\n  background: #d3d3d3;\n}\n:host .mat-radio-button ~ .mat-radio-button {\n  margin-left: 16px;\n}\n:host .radio-box {\n  position: relative;\n  bottom: 45px;\n  left: 45%;\n}"},FN4D:function(e,t,i){"use strict";i.r(t),t.default=""},I57P:function(e,t,i){"use strict";i.r(t),t.default=':host {\n  overflow-y: scroll;\n}\n:host .select-group {\n  overflow: hidden;\n  max-height: 20%;\n}\n:host .subitem-title {\n  text-align: left;\n  color: #555;\n  font-size: 14px;\n  padding: 10px;\n  background-color: #F1F1F1;\n  display: flex;\n  justify-content: space-between;\n}\n:host .subitem {\n  border-width: 0px 10px;\n  border-color: #F1F1F1;\n  border-style: solid;\n  overflow-y: scroll;\n  background-color: #FFFFFF;\n  height: 100%;\n}\n:host .group-subitem {\n  height: 100px;\n}\n:host .subitem-scroll {\n  border-width: 5px;\n}\n:host .boxed input[type=radio] {\n  display: none;\n}\n:host .boxed label {\n  background-color: #fff;\n  transition: all 0.3s;\n}\n:host .boxed input[type=radio]:checked + label {\n  background-color: #B3E5FF;\n}\n:host .group-container {\n  display: flex;\n  flex-direction: row;\n  margin: 0;\n  justify-content: space-between;\n}\n:host .name-group {\n  display: inline-block;\n  padding: 3px;\n}\n:host .button-group {\n  margin: 0;\n  display: flex;\n  flex-direction: row;\n}\n:host .button-group div {\n  padding: 3px;\n}\n:host .fa {\n  font-weight: 900;\n  display: inline-block;\n  font-style: normal;\n  font-variant: normal;\n  text-rendering: auto;\n  font-family: "FontAwesome";\n  line-height: 1;\n}\n:host .fa option {\n  font-weight: 900;\n}'},IElf:function(e,t,i){"use strict";i.r(t),t.default=":host {\n  background-color: #F1F1F1;\n}"},MHpZ:function(e,t,i){"use strict";i.r(t),t.default='<div class="create-prompt">\n  <div class="subitem-title" (click)="expandPanel()">\n\t<span>\n\t  Create Tag\n\t</span>\n  </div> \x3c!-- subitem-title --\x3e\n\n  <div *ngIf="showSubitem" class="subitem">\n\t<form class="form-type-form">\n\t  <div *ngFor="let control of enabledControls; let idx = index" class="box form">\n\t\t<input type="radio" [id]="control" value="control.toLowerCase()" name="form-type" [checked]="(idx === 0)" (change)="selectInputForm(control.toLowerCase())">\n\t\t<label style="cursor: pointer; margin: 3px; padding: 3px; font-size: 10px" [for]="control">{{ control }}</label>\n\t  </div> \x3c!-- form-type-form --\x3e\n    </form>\n\n    <div class="form-name">\n      <mat-form-field class="input-label-group">\n        <mat-label>Label</mat-label>\n        <input matInput placeholder="Label" #labelValue [(ngModel)]="labelFilter" (keyup)="inputFormLabel($event)" name="labelFilter" class="tiny" type="text">\n      </mat-form-field>\n\n      <ng-container *ngIf="formType != \'text\'">\n        <ng-container *ngIf="formType == \'color\'">\n          <mat-form-field class="input-label-group">\n            <mat-label>Option Color</mat-label>\n            <input matInput #optionColorValue placeholder="Option Color" #labelValue [(ngModel)]="optionColorFilter" (change)="inputFormColor($event)" name="optionColorilter" class="tiny" type="color">\n          </mat-form-field>\n        </ng-container>\n\n        <mat-form-field class="input-label-group">\n          <mat-label>Options</mat-label>\n          <div class="input-group">\n            <input matInput #optionValue class="input-group-field" placeholder="Option" type="text" [(ngModel)]="optionFilter" name="optionFilter" (keyup.enter)="addOptionItem(optionValue.value); optionValue.value = \'\'; optionColorValue.value = \'\'; clearOption(); clearOptionColor()">\n          </div> \x3c!-- input-group --\x3e\n        </mat-form-field>\n\n\n        <div class="input-group-button">\n          <button mat-button color="accent" class="button" (click)="addOptionItem(optionValue.value); optionValue.value = \'\'; clearOption()">\n            <i class="fas fa-plus"></i>\n          </button>\n        </div> \x3c!-- input-group-button --\x3e\n\n        <ul class="form-option-container">\n          <li *ngFor="let opt of formOptions" class="list-group">\n            <div>\n              {{opt.label}}\n              <ng-container *ngIf="formType == \'color\'">\n                <svg class="box" width="10px" height="10px">\n                  <rect width="10px" height="10px" style="fill: #ffffff"/>\n                  <rect width="8px" height="8px" x="1px" y="1px" [style.fill]="opt.color"/>\n                </svg>\n              </ng-container>\n            </div> \x3c!-- showopt --\x3e\n            <div class="button-group">\n              <div (click)="deleteOption(opt)">\n                <i class="fas fa-minus"\n                   matTooltip="Delete"\n                   matTooltipPosition="above"\n                   style="cursor: pointer">\n                </i>\n              </div> \x3c!-- delete opt --\x3e\n\n              <div (click)="openRenameOptionModal(renameOptionModal)">\n                <i class="fas fa-edit"\n                   style="cursor: pointer"\n                   matTooltip="Rename"\n                   matTooltipPosition="above">\n                </i>\n              </div>\n\n              <ng-template #renameOptionModal>\n                <input matInput #optionRename\n                       placeholder="Rename Option">\n                <br/>\n                <br/>\n                <div class="button-group">\n                  <button matDialogClose\n                          mat-raised-button\n                          color="primary"\n                          (click)="renameOption(opt, optionRename.value)">Rename</button>\n                  <button matDialogClose\n                          mat-button>Cancel</button>\n                </div>\n              </ng-template>\n            </div> \x3c!-- button group --\x3e\n          </li>\n        </ul>\n      </ng-container>\n    </div> \x3c!-- form-name --\x3e\n\n\t<button mat-raised-button color="primary" (click)="addFormItem()">Save</button>\n\t<button mat-button color="primary" (click)="cancelCreate()">Cancel</button>\n\n  </div> \x3c!-- subitem --\x3e\n</div> \x3c!-- create-group --\x3e\n'},N3QO:function(e,t,i){"use strict";i.r(t),t.default=":host .img-list-container {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));\n  grid-gap: 1em;\n  height: 100%;\n  padding: 1em;\n}\n:host #no-img {\n  font-size: 32px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 70vh;\n}\n:host #no-proj {\n  font-size: 32px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 70vh;\n}\n:host #new-proj {\n  font-size: 32px;\n  display: flex;\n  height: 100vh;\n  justify-content: center;\n  align-items: center;\n}\n:host app-image-box {\n  height: 100%;\n}\n:host .masonry-item {\n  width: 200px;\n}\n:host img-spin {\n  position: relative;\n  bottom: 0px;\n  left: 0px;\n  width: 100%;\n  height: 100px;\n  background: #fff;\n}\n:host load-spin {\n  position: relative;\n  width: 100%;\n  height: 100px;\n  background: #fff;\n}\n:host .side-bar-container {\n  background-color: #F1F1F1;\n  position: fixed;\n  width: 25%;\n  margin-right: 0px;\n  height: calc(100vh - 50px);\n  right: 0;\n}\n:host .success {\n  margin-right: 20%;\n}\n:host .danger {\n  margin-right: 0%;\n}\n:host #gallery-container-container {\n  position: relative;\n  width: 100%;\n  height: auto;\n  text-align: center;\n  display: flex;\n  flex-direction: column;\n  margin-top: 0px;\n}\n:host #loading-load {\n  position: relative;\n  width: 100%;\n  height: auto;\n  text-align: center;\n  flex-direction: column;\n  margin-top: 50px;\n}\n:host #gallery-container {\n  position: relative;\n  width: 100%;\n  height: auto;\n  text-align: center;\n  display: flex;\n  flex-direction: column;\n}\n:host #gallery-container .gallery-image {\n  height: 100%;\n  display: inline-flex;\n  justify-content: center;\n  align-items: center;\n}\n:host #gallery-container .gallery-image img {\n  max-width: 100%;\n  max-height: 100%;\n  margin: 0 auto;\n}\n:host .imager {\n  width: 75%;\n  height: calc(100vh - 50px);\n  background-color: #fefefe;\n}\n:host .view-image {\n  max-width: 100%;\n  height: auto;\n}\n:host .gallery-btn {\n  width: 35px;\n  height: 35px;\n  background: #000;\n  color: #fff;\n  text-align: center;\n  line-height: 35px;\n  cursor: pointer;\n  transition: all 0.4s ease;\n  font-size: 20px;\n  box-sizing: border-box;\n  padding-left: 2px;\n  position: fixed;\n  bottom: 10px;\n}\n:host .gallery-btn:hover {\n  background: #222;\n}\n:host .gallery-close {\n  top: 10px;\n}\n:host .gallery-close .gallery-next {\n  right: 10px;\n}\n:host .gallery-prev {\n  right: 50px;\n}\n:host .gallery-prev .gallery-next {\n  bottom: 10px;\n}\n@media (min-width: 478px) {\n  :host .img-list-container img:nth-child(3n):not(last-of-type) {\n    grid-row-end: span 2;\n  }\n}\n@media (max-width: 768px) {\n  :host .img-list-container {\n    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));\n  }\n}\n@media (max-width: 450px) {\n  :host .img-list-container {\n    grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));\n  }\n}"},P1jy:function(e,t,i){"use strict";i.r(t),t.default='<h4>Share this project</h4>\n<small><em> People you share your project with will have full ability to edit and delete this project on Taggit and on HazMapper. </em></small>\n\n<form [formGroup]="projShareForm" (ngSubmit)="submit()" id="share-project-form">\n    <mat-form-field>\n        <mat-label>Username:</mat-label>\n        <input matInput type="text" formControlName="name" required="true">\n    </mat-form-field>\n\n<div class="button-group small">\n    <button mat-raised-button color="warn" class="button small warning" type="button" (click)="close()">Close</button>\n    <button mat-raised-button color="primary" class="button small align-right" type="submit" [disabled]="!projShareForm.valid">Add Member</button>\n</div>\n\n<br>\n<h5>Current Users</h5>\n<div *ngFor="let user of projectUsers">\n    <br>\n    <mat-card class="card-container">\n        <span class="card-item">\n            {{user.username}}\n        </span>\n        <span class="card-buttons">\n            <button mat-raised-button color="warn" class="button small warning" type="button" [disabled]="onlyOne" (click)="delete(user.username)">\n                <i class="fas fa-trash"></i>\n            </button>\n        </span>\n    </mat-card>\n</div>\n</form>'},Pwca:function(e,t,i){"use strict";i.r(t),t.default='<div *ngIf="loaded; else loader" id="loading-load">\n  <div *ngIf="projectsExist; else noProjWarn" id="gallery-container">\n    <div *ngIf="imagesExist; else noImgWarn" id="gallery-container-container">\n      <div [ngClass]="scrollStatus"\n        infiniteScroll\n        [infiniteScrollDistance]="1"\n        [infiniteScrollThrottle]="1500"\n        (scrolled)="onScroll()"\n        class="img-list-container"\n        *ngIf="!showTagger; else tagger">\n        <app-image-box\n          *ngFor="let feat of featureListScroll"\n          [feature]="feat">\n        </app-image-box>\n      </div>\n\n      <ngx-spinner\n        bdOpacity = 0.9\n        bdColor = ""\n        size = "default"\n        color = "#3ADB76"\n        type = "line-scale-pulse-out"\n        id = "img-spin"\n        [fullScreen] = "false">\n      </ngx-spinner>\n      <ng-template #tagger>\n        <div>\n          <div class="imager">\n            <img class="view-image" [src]="getPath()">\n          </div>\n        </div>\n      </ng-template>\n      <div *ngIf="showTagger" class="side-bar-container">\n        <app-side-bar></app-side-bar>\n      </div>\n    </div>\n    <ng-template #noImgWarn>\n      <div id="no-img">\n        No images have been imported!<br>Please import images through the menu.\n      </div>\n    </ng-template>\n  </div>\n\n  <ng-template #noProjWarn>\n    <div id="no-proj">\n      No project has been created!<br>Please create a project through the menu.\n    </div>\n  </ng-template>\n\n</div>\n\n<ng-template #loader>\n  <div *ngIf="projectsExist; else createProj" id="loader">\n    Loading...\n  </div>\n\n  <ng-template #createProj> \n    <div id="new-proj" (click)="openCreateProjectModal()">\n      Start a new project\n    </div>\n  </ng-template>\n\n</ng-template>\n'},"T+fY":function(e,t,i){"use strict";i.r(t),t.default='<div class="form-group row" *ngFor="let tag of field">\n  <label class="col-md-3 form-control-label" [attr.for]="tag.label">\n    {{field.label}}\n    <strong class="text-danger" *ngIf="tag.required">*</strong>\n  </label>\n  <div class="col-md-9" [ngSwitch]="tag.type">\n    <app-form-color *ngSwitchCase="\'color\'" [field]="field" [form]="form"></app-form-color>\n    <app-form-textbox *ngSwitchCase="\'text\'" [field]="field" [form]="form"></app-form-textbox>\n    <app-form-dropdown *ngSwitchCase="\'dropdown\'" [field]="field" [form]="form"></app-form-dropdown>\n    <app-form-checkbox *ngSwitchCase="\'checkbox\'" [field]="field" [form]="form"></app-form-checkbox>\n    <app-form-radio *ngSwitchCase="\'radio\'" [field]="field" [form]="form"></app-form-radio>\n  </div>\n</div>\n'},T7o7:function(e,t,i){"use strict";i.r(t),t.default=":host .subitem-title {\n  text-align: left;\n  color: #555;\n  font-size: 14px;\n  padding: 10px;\n  background-color: #F1F1F1;\n  display: flex;\n  justify-content: space-between;\n}\n:host .subitem {\n  border-width: 0px 10px;\n  border-color: #F1F1F1;\n  border-style: solid;\n  overflow-y: scroll;\n  background-color: #FFFFFF;\n  height: 100%;\n}\n:host .subitem-scroll {\n  border-width: 5px;\n}\n:host .asset-list {\n  max-height: 20%;\n  overflow: hidden;\n}\n:host .asset-subitem {\n  height: 100px;\n}\n:host .asset-container {\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  cursor: pointer;\n}\n:host .highlight {\n  background-color: #B3E5FF;\n}\n:host .name-group {\n  display: inline-block;\n  padding: 3px;\n}\n:host .button-group {\n  margin: 0;\n  display: flex;\n  flex-direction: row;\n}\n:host .button-group div {\n  padding: 3px;\n  padding-right: 5px;\n}"},VzVu:function(e,t,i){"use strict";i.r(t),t.default="\x3c!--The content below is only a placeholder and can be replaced.--\x3e\n<router-outlet></router-outlet>\n"},X9m5:function(e,t,i){"use strict";i.r(t),t.default='<div id="callback">\n    <div>\n\t<i class="fas fa-spinner"></i>\n    </div>\n</div>\n'},"ay+3":function(e,t,i){"use strict";i.r(t),t.default='<div class="img-container">\n  <img [ngClass]="imageSelected"\n       [src]="featureSource"\n       (click)="imageSelect()"\n       class="img-responsive img-target"\n       title={{featurePath}}>\n  <div class="top-overlay">\n    <div class="image-option"\n         matTooltip="Zoom"\n         matTooltipPosition="below"\n         (click)="imageZoom(diffSizes)">\n      <i class="fas fa-search-plus"></i>\n    </div>\n\n    <ng-template #diffSizes>\n      <div class="zoom-content">\n        <div class="img-container">\n          <img [src]="featureSource" title={{featurePath}}>\n        </div>\n        <div class="img-details">\n          <div class="detail-container">\n            <div class="title">\n              Coordinates\n            </div>\n            <div class="detail-contents">\n              <div class="detail-item">\n                {{coordinates[0]}},\n              </div>\n              <div class="detail-item">\n                {{coordinates[1]}}\n              </div>\n            </div>\n          </div>\n          <div class="detail-container">\n            <div class="title">\n              Image Source\n            </div>\n            <div class="detail-contents">\n              <div class="detail-item">\n                {{featurePath}}\n              </div>\n            </div>\n          </div>\n        </div>\n        <button mat-button class="close-button" matDialogClose aria-label="Close modal" type="button">\n          <span aria-hidden="true">&times;</span>\n        </button>\n      </div>\n    </ng-template>\n\n    <div class="image-option"\n         matTooltip="Remove"\n         matTooltipPosition="below"\n         (click)="openImageDeleteModal(deleteImage)">\n      <i class="fas fa-trash"></i>\n    </div>\n\n    <ng-template #deleteImage>\n      <div *ngIf="selectedImages.length === 1">\n        This image will be deleted from the current project. It will not be deleted from the Data Depot.\n      </div>\n\n      <div *ngIf="selectedImages.length > 1">\n        {{selectedImages.length}} images will be deleted from the current project. They will not be deleted from the Data Depot.\n      </div>\n\n      <button mat-raised-button color="primary" matDialogClose (click)="imageDelete()">Delete Image</button>\n      <button mat-button matDialogClose>Cancel</button>\n    </ng-template>\n\n    <div class="image-option"\n         matTooltip="Add To Group"\n         matTooltipPosition="below"\n         (click)="openImageAddModal(addMoreToGroup)">\n      <i class="fas fa-plus"></i>\n    </div>\n\n    <ng-template #addMoreToGroup>\n\n      <mat-form-field appearance="fill">\n        <mat-label>Groups</mat-label>\n        <mat-select matNativeControl required [(value)]="groupToAdd">\n          <mat-option *ngFor="let group of groups | keyvalue" [value]="group.value">\n            {{ group.key }}\n          </mat-option>\n        </mat-select>\n      </mat-form-field>\n\n      <p>\n        <button mat-raised-button color="primary" matDialogClose (click)="addGroup(groupToAdd)" [disabled]="!groupToAdd">Add To Group</button>\n        <button mat-button color="secondary" matDialogClose>Cancel</button>\n      </p>\n\n    </ng-template>\n  </div>\n\n  <div class="bottom-overlay">\n\n    <div *ngIf="feature.properties.group && feature.properties.group.length > 0">\n\n      <div *ngIf="feature.properties.group.length < 5; else dotdot" class="group-tags">\n        <div *ngFor="let group of feature.properties.group"\n             class="center"\n             (mouseover)="group.name"\n             [matTooltip]="group.name"\n             matTooltipPosition="above">\n          <svg class="box" width="25px" height="75px" (click)="deleteFromGroup(feature, group)">\n            <rect width="15px" height="15px" x="5" y="30" [style.fill]="group.color"/>\n            <rect class="inner-del" width="25px" height="15px" rx="3" x="0" y="0" style="fill: #ffffff"/>\n            <rect  class="inner-del" width="15px" height="5px" x="5" y="5" style="fill: #DE6363"/>\n          </svg>\n        </div>\n      </div>\n\n      <ng-template #dotdot class="text">\n        <div class="image-option"\n             (click)="openMoreGroupsModal(moreGroupsModal)">\n          <i class="fas fa-ellipsis-h"></i>\n        </div>\n      </ng-template>\n\n      \x3c!-- TODO Should close modal once zero groups --\x3e\n      <ng-template #moreGroupsModal>\n        <div style="display: flex; justify-content: center; align-items: center">\n          <div *ngFor="let group of feature.properties.group"\n               class="center-temp"\n               style="display: flex"\n               (mouseover)="group.name"\n               [matTooltip]="group.name"\n               matTooltipPosition="right">\n            <svg style="padding: 1" (click)="deleteFromGroup(feature, group)" width="15px" height="15px">\n              <rect width="15px" height="15px" [style.fill]="group.color"/>\n              <rect class="inner-del-temp" width="8px" height="4px" x="3.3" y="5.5" style="fill: #000"/>\n            </svg>\n          </div>\n        </div>\n      </ng-template>\n    </div>\n  </div>\n</div>\n'},c6cR:function(e,t,i){"use strict";i.r(t),t.default='<app-select-group></app-select-group>\n<app-select-image></app-select-image>\n\n<app-tag-generator *ngIf="showTagGenerator; else tagImages"></app-tag-generator>\n<ng-template #tagImages>\n  <app-tag-images></app-tag-images>\n</ng-template>\n'},crnd:function(e,t){function i(e){return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}))}i.keys=function(){return[]},i.resolve=i,e.exports=i,i.id="crnd"},"dTB+":function(e,t,i){"use strict";i.r(t),t.default=":host {\n  display: block;\n  font-size: 0.8em;\n  height: calc(100vh - 50px);\n}\n:host .lat-lon-label {\n  font-size: 0.8em;\n  color: #4d4d4d;\n}\n:host .active-project {\n  background-color: #1aff8c;\n}\n:host .menu button.dropdown.button {\n  padding: 0.85em 1em;\n}\n:host .switch {\n  margin: 0;\n}\n:host .button.tiny {\n  margin: 0;\n}\n:host .create-prompt {\n  max-height: 500px;\n  height: 500px;\n}\n:host .select-group {\n  max-height: 20%;\n  height: 20%;\n}\n:host .subitem-title {\n  text-align: left;\n  color: #555;\n  font-size: 14px;\n  padding: 10px;\n  background-color: #F1F1F1;\n  display: flex;\n  justify-content: space-between;\n}\n:host .input-label-group {\n  padding: 10px;\n  display: block;\n}\n:host .input-group {\n  display: inline-block;\n}\n:host .form-name {\n  text-align: center;\n}\n:host .input-group-button {\n  display: inline-block;\n}\n:host .subitem {\n  border-width: 0px 10px;\n  border-color: #F1F1F1;\n  border-style: solid;\n  overflow-y: auto;\n  background-color: #FFFFFF;\n  height: 40vh;\n  padding: 20px;\n}\n:host .subitem-scroll {\n  border-width: 5px;\n}\n:host .preset-descriptions {\n  max-height: 20%;\n  height: 20%;\n}\n:host .boxed input[type=radio] {\n  display: none;\n}\n:host .boxed label {\n  background-color: #fff;\n  transition: all 0.3s;\n}\n:host .boxed input[type=radio]:checked + label {\n  background-color: #B3E5FF;\n}\n:host .group-container {\n  display: flex;\n  flex-direction: row;\n  margin: 0;\n  justify-content: space-between;\n}\n:host .button-group {\n  margin: 0;\n  display: flex;\n  flex-direction: row;\n}\n:host .form-option-container {\n  padding: 0px;\n}\n:host .list-group {\n  display: flex;\n  flex-direction: row;\n  margin: 0;\n  justify-content: space-between;\n}\n:host .list-suboptions {\n  background-color: #F0F0F0;\n}\n:host .button-group div {\n  padding: 3px;\n}\n:host .name-group {\n  display: inline-block;\n  padding: 3px;\n}\n:host .form-item-container {\n  display: flex;\n  flex-direction: row;\n  margin: 0;\n  justify-content: space-between;\n}\n:host .form-type-form {\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  margin: 5px;\n  margin-bottom: 15px;\n}\n:host .form-type-form input[type=radio] {\n  display: none;\n}\n:host .form-type-form label {\n  border-style: solid;\n  border-width: 1px;\n  border-color: #ddd;\n  transition: all 0.3s;\n}\n:host .form-type-form input[type=radio]:checked + label {\n  border-style: solid;\n  border-width: 1px;\n  border-color: #000;\n}\n:host .changed {\n  color: #F07575;\n}\n:host .unchanged {\n  color: #555555;\n}\n:host .asset-list {\n  max-height: 20%;\n  height: 20%;\n}\n:host .asset-container {\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  cursor: pointer;\n}\n:host .highlight {\n  background-color: #B3E5FF;\n}"},dagV:function(e,t,i){"use strict";i.r(t),t.default='<div>\n  <textarea  [id]="field.name"\n\t\trows="9" class="form-control" [placeholder]="\'notes\'" [(ngModel)]="value" (keyup)="updateValue()"></textarea>\n</div>\n'},dp4s:function(e,t,i){"use strict";i.r(t),t.default=":host #share-project-form {\n  display: flex;\n  flex-direction: column;\n  text-align: center;\n  padding: 5em;\n}\n\n.card-container {\n  display: flex;\n  justify-content: space-between;\n  width: 99%;\n}\n\n.card-item {\n  text-align: center;\n  align-items: center;\n}\n\n.card-buttons {\n  align-items: flex-end;\n}"},eC1z:function(e,t,i){"use strict";i.r(t),t.default='<div id="map" style="min-height: calc(100vh - 67px)"></div>\n'},fIZ9:function(e,t,i){"use strict";i.r(t),t.default='<div *ngFor="let opt of form.options" [id]="form.label" class="input-group">\t\n  <div  class="form-check form-check">\n    <label class="form-check-label">\n      <input class="form-check-input" [(ngModel)]="value" type="radio" id="inlineCheckbox2" name={{label}} value={{opt.label}} (change)="updateCheckedTag()" /> \n      {{opt.label}}\n    </label>\n  </div>\n</div>\n'},fWOx:function(e,t,i){"use strict";i.r(t),t.default=":host #create-project-form {\n  display: flex;\n  flex-direction: column;\n  text-align: center;\n  padding: 5em;\n}"},if2z:function(e,t,i){"use strict";i.r(t),t.default=":host .img-container {\n  position: relative;\n}\n:host .img-container img {\n  -o-object-fit: cover;\n     object-fit: cover;\n  cursor: default;\n  width: 100%;\n  height: 100%;\n  transition: opacity 0.3s ease;\n  backface-visibility: hidden;\n  max-width: 100%;\n  max-height: 100%;\n  margin: 0 auto;\n}\n:host .top-overlay {\n  display: flex;\n  flex-direction: row;\n  transition: 0.3s ease;\n  opacity: 0;\n  position: absolute;\n  right: 10px;\n  top: 10px;\n  cursor: pointer;\n  text-align: center;\n}\n:host .bottom-overlay {\n  display: flex;\n  flex-direction: row;\n  transition: 0.3s ease;\n  opacity: 1;\n  position: absolute;\n  right: 10px;\n  bottom: 10px;\n  text-align: center;\n}\n:host .img-container:hover img {\n  opacity: 0.9;\n}\n:host .img-container:hover .top-overlay {\n  opacity: 0.9;\n}\n:host .img-container:hover .top-overlay:hover {\n  opacity: 1;\n}\n:host .image-option {\n  opacity: 0.9;\n  background-color: white;\n  display: flex;\n  color: black;\n  width: 40px;\n  height: 30px;\n  border-radius: 5px;\n  font-size: 16px;\n  margin: 3px;\n  justify-content: center;\n  align-items: center;\n}\n:host .image-option:hover {\n  opacity: 1;\n}\n:host .image-option .fas {\n  top: 5px;\n}\n:host .img-selected {\n  border: solid #0191FF;\n  border-width: 5px;\n}\n:host .img-unselected {\n  border: solid #fff;\n  border-width: 5px;\n}\n:host .group-tags {\n  opacity: 0.9;\n  background-color: white;\n  display: flex;\n  flex-direction: row;\n  width: auto;\n  height: 30px;\n  border-radius: 5px;\n  padding: 5px;\n  justify-content: center;\n  align-items: center;\n  z-index: 999;\n}\n:host .center {\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  transition: 0.3s ease;\n  align-items: center;\n}\n:host .center .inner-del {\n  opacity: 0;\n  transition: 0.3s ease;\n  cursor: pointer;\n}\n:host .center:hover .inner-del {\n  opacity: 1;\n}\n:host .box {\n  padding: 1px;\n}\n.center-temp {\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n}\n.center-temp .inner-del-temp {\n  opacity: 0;\n  transition: 0.3s ease;\n  cursor: pointer;\n}\n.center-temp:hover .inner-del-temp {\n  opacity: 0.5;\n}\n.zoom-content {\n  display: flex;\n  flex-direction: column;\n  max-height: 700px;\n}\n.zoom-content .img-container {\n  overflow-y: scroll;\n  width: 100%;\n  height: 100%;\n  background-color: #e7e7e7;\n}\n.zoom-content .img-details {\n  display: flex;\n  flex-direction: row;\n  margin-top: 24px;\n  background-color: #e7e7e7;\n  align-items: center;\n  text-align: center;\n}\n.zoom-content .title {\n  background-color: #ccc;\n  padding: 5px;\n}\n.zoom-content .detail-container {\n  display: flex;\n  flex-grow: 1;\n  flex-direction: column;\n  padding: 5px;\n}\n.zoom-content .detail-contents {\n  display: flex;\n  flex-direction: row;\n  padding: 5px;\n  background-color: #fff;\n}\n.zoom-content .detail-item {\n  padding: 5px;\n}"},ld75:function(e,t,i){"use strict";i.r(t),t.default=":host {\n  text-align: left;\n}\n:host .mat-form-field {\n  width: 100%;\n  text-align: left;\n}\n:host .input-group {\n  padding: 5px;\n}\n:host label {\n  padding: 5px;\n}\n:host input {\n  padding: 5px;\n  vertical-align: middle;\n}\n:host .radio-group {\n  display: flex;\n  flex-direction: column;\n}\n:host .form-controls {\n  padding: 20px;\n}"},"m/u+":function(e,t,i){"use strict";i.r(t),t.default='<div *ngFor="let opt of form.options" [id]="form.label" class="input-group">\n  <div  class="form-check form-check">\n    <label class="form-check-label">\n      <input class="form-check-input" [(ngModel)]="chosenTag" type="radio" id="inlineCheckbox3" name={{label}} value={{opt.label}} (change)="updateCheckedTag()" /> \n      {{opt.label}}\n\n\t  <svg class="box" width="10px" height="10px">\n        <rect width="10px" height="10px" style="fill: #ffffff"/>\n        <rect width="8px" height="8px" x="1px" y="1px" [style.fill]="opt.color"/>\n      </svg>\n    </label>\n  </div>\n</div>\n'},moaK:function(e,t,i){"use strict";i.r(t),t.default='<h4> Current Gallery </h4>\n<form [formGroup]="projCreateForm" (ngSubmit)="update()" id="current-project-form">\n  <mat-form-field>\n\t<mat-label>Name:</mat-label>\n\t<input matInput type="text" formControlName="name" appearance="filled"  required="true">\n\n  </mat-form-field>\n\n  <mat-form-field>\n    <mat-label>Description</mat-label>\n    <textarea matInput formControlName="description" required="true"></textarea>\n  </mat-form-field>\n\n  <div class="button-group small">\n    <button mat-raised-button color="basic" class="button small warning" type="button" (click)="close()">Close</button>\n    <button *ngIf="activeProject.deletable" mat-raised-button color="warn" class="button small warning" type="delete" (click)="delete()">Delete</button>\n    <button mat-raised-button color="primary" class="button small align-right" type="submit" [disabled]="!projCreateForm.valid">Update</button>\n  </div>\n</form>\n'},nOsy:function(e,t,i){"use strict";i.r(t),t.default='<h4> Create a new Gallery </h4>\n<form [formGroup]="projCreateForm" (ngSubmit)="submit()" id="create-project-form">\n  <mat-form-field>\n\t<mat-label>Name:</mat-label>\n\t<input matInput type="text" formControlName="name" required="true">\n  </mat-form-field>\n\n  <mat-form-field>\n\t<mat-label>Description</mat-label>\n\t<textarea matInput formControlName="description" required="true"></textarea>\n  </mat-form-field>\n\n  <div class="button-group small">\n\t<button mat-raised-button color="warn" class="button small warning" type="button" (click)="close()">Close</button>\n\t<button mat-raised-button color="primary" class="button small align-right" type="submit" [disabled]="!projCreateForm.valid">Submit</button>\n  </div>\n</form>\n'},obZR:function(e,t,i){"use strict";i.r(t),t.default=""},qk7I:function(e,t,i){"use strict";i.r(t),t.default=":host {\n  font-size: 0.8em;\n  display: block;\n}\n:host .subitem-title {\n  text-align: left;\n  display: flex;\n  justify-content: space-between;\n  color: #555;\n  font-size: 14px;\n  padding: 10px;\n  background-color: #F1F1F1;\n}\n:host .subitem {\n  border-width: 0px 10px;\n  border-color: #F1F1F1;\n  border-style: solid;\n  padding: 10px;\n  overflow-y: auto;\n  background-color: #FFFFFF;\n  height: 40vh;\n}\n:host .main-form-container {\n  padding: 10px;\n}\n:host .subitem-scroll {\n  padding: 10px;\n}\n:host .subitem-scroll {\n  border-width: 5px;\n}\n:host .highlight {\n  background-color: #B3E5FF;\n}\n:host .boxed input[type=radio] {\n  display: none;\n}\n:host .boxed label {\n  background-color: #fff;\n  transition: all 0.3s;\n}\n:host .boxed input[type=radio]:checked + label {\n  background-color: #B3E5FF;\n}\n:host .group-container {\n  display: flex;\n  flex-direction: row;\n  margin: 0;\n  justify-content: space-between;\n}\n:host .select-group {\n  max-height: 20%;\n  height: 20%;\n}\n:host .tag-forms {\n  height: 500px;\n}\n:host .asset-list {\n  max-height: 20%;\n  height: 20%;\n}\n:host .asset-container {\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  cursor: pointer;\n}\n:host .preset-descriptions {\n  max-height: 20%;\n  height: 20%;\n}\n:host .form-item-container {\n  display: flex;\n  flex-direction: row;\n  margin: 0;\n  justify-content: space-between;\n}\n:host .button-group {\n  display: flex;\n  flex-direction: row;\n  margin: 0;\n}\n:host .button-group div {\n  padding: 3px;\n}\n:host .name-group {\n  padding: 3px;\n  font-size: 17px;\n  font-weight: bold;\n}\n:host .list-group {\n  display: flex;\n  flex-direction: row;\n  margin: 0;\n  justify-content: space-between;\n}\n:host .list-suboptions {\n  background-color: #F0F0F0;\n}"},s9wi:function(e,t,i){"use strict";i.r(t),t.default='<div class="select-group">\n  <div class="subitem-title" (click)="expandPanel()">Groups</div>\n  <div *ngIf="showSubitem" class="subitem group-subitem">\n\t\x3c!-- TODO redundant functionality radio is just for style --\x3e\n\t<form class="boxed">\n\t  <div *ngFor="let group of groups | keyvalue" (click)="selectGroupForm(group.value)" class="box form">\n\t\t<input type="radio" [id]="group.key" [value]="group.key" name="skills" [checked]="isChecked(group.key)">\n\t\t<label class="group-container" style="cursor: pointer" [for]="group.key">\n\t\t  <div class="name-group">\n\t\t\t{{group.key}}\n\t\t\t<svg class="box" width="10px" height="10px">\n\t\t\t  <rect width="10px" height="10px" style="fill: #ffffff"/>\n\t\t\t  <rect width="8px" height="8px" x="1px" y="1px" [style.fill]="group.value.color"/>\n\t\t\t</svg>\n\t\t  </div>\n\t\t  <div class="button-group">\n\t\t\t<div (click)="deleteGroup(group.value)">\n\t\t\t  <i class="fas fa-minus"\n\t\t\t\t matTooltip="Delete"\n\t\t\t\t matTooltipPosition="below">\n\t\t\t  </i>\n\t\t\t</div>\n\t\t\t<div (click)="openRenameModal(renameModal, group.value)">\n\t\t\t  <i class="fas fa-edit"\n\t\t\t\t matTooltip="Rename"\n\t\t\t\t matTooltipPosition="below">\n\t\t\t  </i>\n\t\t\t</div>\n\t\t\t\t<div (click)="openIconSelection(iconModal, group.value)">\n\t\t\t\t\t<span class="fa {{group.value.icon}}"\n\t\t\t\t\tmatTooltip="icons"\n\t\t\t\t\tmatTooltipPosition="below"></span>\n\t\t\t\t</div>\n\t\t  \t</div>\n\t\t</label>\n\t  </div>\n\t</form>\n\n\t<ng-template #renameModal>\n\t  <input matInput #groupRename\n\t\t\t placeholder="Rename Group"\n\t\t\t (keyup.enter)="renameGroup(groupRename.value)">\n\t  <br/>\n\t  <br/>\n\t  <div class="button-group">\n\t\t<button matDialogClose color="primary" mat-raised-button (click)="renameGroup(groupRename.value)">Rename</button>\n\t\t<button matDialogClose mat-button>Cancel</button>\n\t  </div>\n\t</ng-template>\n\n\t<ng-template #iconModal>\n\t\t<div class="iconDropdown">\n\t\t<select class="fa" [(ngModel)]="selectedIcon">\n\t\t  <option class="fa" *ngFor="let icon of iconList" value={{icon.id}} [innerHTML]="icon.unicode">\n          </option>\n\t\t</select>\n\t\t<br/>\n\t  \t<br/>\n\t\t<div class="button-group">\n\t\t\t<button matDialogClose color="primary" mat-raised-button (click)="saveIcon(selectedIcon)">Save</button>\n\t\t\t<button matDialogClose mat-button>Cancel</button>\n\t\t  </div>\n\t</div>\n\t</ng-template>\n\n  </div> \x3c!-- subitem --\x3e\n</div> \x3c!-- select-group --\x3e\n'},tw4j:function(e,t,i){"use strict";i.r(t),t.default=":host #current-project-form {\n  display: flex;\n  flex-direction: column;\n  text-align: center;\n  padding: 5em;\n}"},u61n:function(e,t,i){"use strict";i.r(t),t.default=""},u6lZ:function(e,t,i){"use strict";i.r(t),t.default=":host {\n  min-height: 20em;\n}\n:host .fileslisting {\n  height: 20em;\n  overflow-y: scroll;\n  padding: 0px 20px;\n}\n:host .file-row {\n  display: flex;\n  background: #f9f9f9;\n  border: 1px solid transparent;\n  user-select: none;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n}\n:host .clickable {\n  flex: 1;\n  max-width: 20em;\n}\n:host .size {\n  align-items: flex-end;\n}\n:host .file-row:hover {\n  border: 1px solid;\n}\n:host .file-row.selected {\n  background: #d3d3d3;\n}\n.error {\n  background-color: red;\n  color: white;\n}\n.lineBreak {\n  max-width: 350px;\n  word-break: break-word;\n}"},uV4w:function(e,t,i){"use strict";i.r(t),t.default=":host .active-project {\n  background-color: #1aff8c;\n}\n:host .menu button.dropdown.button {\n  padding: 0.85em 1em;\n}\n:host .button.tiny {\n  margin: 0;\n}\n:host .current-project {\n  padding: 30px;\n  font-size: 14px;\n}\n:host .goods {\n  height: 27px;\n  margin: 0px;\n  padding: 0px;\n}\n:host .toggler {\n  margin-left: 10px;\n}\n:host .picker {\n  display: inline-block;\n}\n:host .group-bar {\n  display: flex;\n  flex-direction: row;\n}\n:host .path-buttons {\n  text-align: center;\n}\n:host .project-menu {\n  margin-left: 10px;\n}\n:host .top-bar {\n  position: fixed;\n  margin-top: -50px;\n  height: 50px;\n  z-index: 999;\n}\n:host .top-bar-right .top-bar-left {\n  -webkit-box-flex: 0;\n  flex-wrap: nowrap;\n  flex: 0 1 auto;\n  max-width: 100%;\n}\n:host .my-button {\n  border-radius: 5px;\n  padding: 5px;\n}\n:host .button-spacing {\n  margin-right: 15px;\n}\n@media print, screen and (min-width: 40em) {\n  :host .top-bar {\n    flex-wrap: nowrap;\n    flex: 0 1 auto;\n  }\n}\n:host .example-spacer {\n  flex: 1 1 auto;\n}"},vlUF:function(e,t,i){"use strict";i.r(t),t.default='<mat-toolbar class="top-bar" color="primary">\n  <img src="assets/logo.svg" width="40PX">\n  <span style="color: white">Taggit</span>\n\n  <button mat-icon-button [matMenuTriggerFor]="project" color="foreground" class="project-menu">\n    <mat-icon>menu</mat-icon>\n  </button>\n\n\n  <mat-menu #project="matMenu">\n    <span mat-menu-item *ngIf="selectedProject" (click)="openProjectModal(selectedProject)">\n      Current Gallery : {{selectedProject.name}}\n    </span>\n    <button mat-menu-item (click)="openCreateProjectModal()">Create Gallery</button>\n    <button mat-menu-item [matMenuTriggerFor]="projectList">Select Gallery</button>\n    <button mat-menu-item (click)="openFilePicker(test)">File Browser</button>\n    <button mat-menu-item [matMenuTriggerFor]="saveOptions">Save as</button>\n  </mat-menu>\n\n  <mat-menu #projectList="matMenu">\n    <button mat-menu-item class="clickable" *ngFor="let p of projects" (click)="selectProject(p)" [ngClass]="{\'active-project\': p === selectedProject}">\n      {{ p.name }}\n    </button>\n  </mat-menu>\n\n  <mat-menu #saveOptions="matMenu">\n    <button mat-menu-item (click)=saveFile(0)>CSV file</button>\n    <button mat-menu-item (click)=saveFile(1)>JSON file</button>\n    <button mat-menu-item (click)=openDownloadSelector()>Export to DesignSafe</button>\n  </mat-menu>\n\n  <span class="example-spacer"></span>\n\n  <div *ngIf="showTagger" class="path-buttons">\n    <div class="slides" style="line-height: 1; font-size: 12px">\n      {{getAssetDisplay()}}\n      <div class="lr-buttons" style="margin-top: 5px">\n        <i (click)="otherPath(false)" style="margin-right: 10px; cursor: pointer" class="fas fa-angle-left"></i>\n        <i (click)="otherPath(true)" style="margin-left: 10px; cursor: pointer" class="fas fa-angle-right"></i>\n      </div>\n    </div>\n  </div>\n\n  <span class="example-spacer"></span>\n\n  <div class="group-bar grid-x align-right">\n\n    <button mat-raised-button class="button-spacing" [disabled]="selectedImages.length === 0" (click)="clearAll()">Clear Selected</button>\n\n    \x3c!-- A link that looks like a button, links to Hazmapper--\x3e\n    <a class="button-spacing" mat-raised-button href={{hazMapperLink}} title="Open your gallery in HazMapper" target="_blank">\n      <img src="assets/hazmapper-header-logo.png" width="100PX">\n    </a>\n\n    <button mat-raised-button\n      (click)="openAddGroupModal(addGroupModal)" *ngIf="selectedImages.length > 0 && !showTagger">Add Group</button>\n\n    <ng-template #addGroupModal>\n      <mat-form-field>\n        <mat-label>Group Name</mat-label>\n        <input matInput placeholder="Group Name" (keyup.enter)="addGroup(groupInput.value)" #groupInput>\n      </mat-form-field>\n\n      <div style="color: #ff0000" *ngIf="invalidNameError">\n        Invalid Name!\n      </div>\n      <div style="color: #ff0000" *ngIf="existingNameError">\n        Existing Name!\n      </div>\n      <br/>\n      <br/>\n      <button mat-raised-button color="primary" (click)="addGroup(groupInput.value)">Add Group</button>\n      <button mat-button matDialogClose color="secondary">Cancel</button>\n    </ng-template>\n  </div>\n\n  <button *ngIf="groupsExist && !showTagger"\n    mat-raised-button\n    style="margin-left: 15px"\n    (click)="toggleTagger()">Taggit!</button>\n\n  <button *ngIf="showTagger"\n    mat-raised-button\n    style="margin-left: 15px"\n    (click)="toggleTagger()">Gallery</button>\n\n\n</mat-toolbar>\n'},yXUO:function(e,t,i){"use strict";i.r(t),t.default='<div *ngFor="let opt of form.options" [id]="form.label" class="input-group">\n  <div  class="form-check form-check">\n    <label class="form-check-label">\n      <input class="form-check-input" type="checkbox" [checked]="isChecked(opt)" id="inlineCheckbox1" value={{opt.label}} (change)="selected($event, opt)" /> \n      {{opt.label}}\n    </label>\n  </div>\n</div>\n\n'},ynWL:function(e,t,i){"use strict";i.r(t),t.default=""},zUnb:function(e,t,i){"use strict";i.r(t);i("yLV6");var s=i("8Y7J"),n=i("wAiw"),o=i("mrSG"),r=i("cUpR"),a=i("omvX"),l=i("IheW"),c=i("SVse"),p=i("MNke"),u=i("7g+E"),d=i("neit"),h=i("gavF"),g=i("BzsH"),m=i("Fwaw"),f=i("s6ns"),b=i("Mz6y"),v=i("ZwOa"),y=i("Gi4r"),x=i("r0V8"),S=i("elxJ"),w=i("JjoW"),F=i("jGvI"),j=i("EApP"),O=i("vO5K"),k=i("nqmK"),P=i("iInd");let I=class{constructor(){}ngOnInit(){}};I=o.a([Object(s.n)({selector:"app-notfound",template:o.b(i("Af46")).default,styles:[o.b(i("6CRC")).default]}),o.c("design:paramtypes",[])],I);class G{}class T{constructor(){this.bbox=[],this.assetType=new Set}updateAssetTypes(e){this.assetType.has(e)?this.assetType.delete(e):this.assetType.add(e)}updateBBox(e){this.bbox=e}toJson(){return{assetType:[...this.assetType],bbox:this.bbox}}}class D{}class C{}class _{constructor(e,t){this.token=e,this.expires=new Date(t)}static fromExpiresIn(e,t){const i=new Date((new Date).getTime()+1e3*t);return new _(e,i)}isExpired(){return(new Date).getTime()>this.expires.getTime()}}class L{constructor(e){this.geometry=e.geometry,this.properties=e.properties,this.id=e.id,this.type=e.type,this.assets=e.assets,this.styles=e.styles,this.project_id=e.project_id}initialAsset(){return this.assets[0]}featureType(){return this.assets&&1===this.assets.length?this.initialAsset().asset_type:this.assets&&this.assets.length>1?"collection":this.assets.length?void 0:this.geometry.type}featurePath(){const e=this.initialAsset();return e.display_path?e.display_path:e.path?e.path:this.id.toString()}featureShortPath(){const[e]=this.assets;if(e.display_path)return/[^/]*$/.exec(e.display_path)[0];if(e.path){return/[^/]*$/.exec(e.path)[0].slice(0,15)+"..."}return this.id.toString()}}var E;!function(e){e.Production="production",e.Staging="staging",e.Local="local"}(E||(E={}));const M={production:!0,apiUrl:"https://agave.designsafe-ci.org/geo/v2/",clientId:"jHXnvsmQQcmP43qlrG7ATaxFXHQa",baseHref:"/",backend:E.Production};var A=i("jtHE");class R{constructor(e,t){this.username=e,this.email=t}}let U=class{constructor(e,t){this.http=e,this.router=t,this._currentUser=new A.a(1),this.currentUser=this._currentUser.asObservable(),this.LS_TOKEN_KEY="hazmapperToken",this.LS_USER_KEY="hazmapperUser"}login(){const e=localStorage.getItem(this.LS_TOKEN_KEY);if(e){const t=JSON.parse(e);this.userToken=new _(t.token,new Date(t.expires)),this.userToken&&!this.userToken.isExpired()||(this.logout(),this.redirectToauthenticaor()),this.getUserInfo()}else this.redirectToauthenticaor()}redirectToauthenticaor(){const e=`https://agave.designsafe-ci.org/authorize?scope=openid&client_id=${M.clientId}&response_type=token&redirect_uri=${location.origin+M.baseHref+"callback"}&state=${Math.random().toString(36)}`;window.location.href=e}isLoggedIn(){return this.userToken&&!this.userToken.isExpired()}logout(){this.userToken=null,localStorage.removeItem(this.LS_TOKEN_KEY),localStorage.removeItem(this.LS_USER_KEY)}setToken(e,t){this.userToken=_.fromExpiresIn(e,t),localStorage.setItem(this.LS_TOKEN_KEY,JSON.stringify(this.userToken)),this.router.navigate(["/"])}getUserInfo(){const e=localStorage.getItem(this.LS_USER_KEY),t=JSON.parse(e);null!==t?this._currentUser.next(new R(t.username,t.email)):this.http.get("https://agave.designsafe-ci.org/oauth2/userinfo?schema=openid").subscribe(e=>{const t=new R(e.name,e.email);localStorage.setItem(this.LS_USER_KEY,JSON.stringify(t)),this._currentUser.next(t)})}};U.ctorParameters=()=>[{type:l.b},{type:P.b}],U=o.a([Object(s.C)({providedIn:"root"}),o.c("design:paramtypes",[l.b,P.b])],U);var N=i("2Vo4"),V=i("IzEk"),z=i("r8II"),$=i("l5mm");let J=class{constructor(e,t,i){if(this.toastr=e,this.http=t,this.authService=i,this.TIMEOUT=5e3,this._notifications=new A.a(1),this.notifications=this._notifications.asObservable(),this.authService.isLoggedIn()){Object($.a)(this.TIMEOUT).subscribe(e=>{this.getRecent()})}}getRecent(){const e=M.apiUrl+"notifications/",t=new Date,i=new Date(t.getTime()-this.TIMEOUT);this.http.get(e+"?startDate="+i.toISOString()).subscribe(e=>{this._notifications.next(e),e.forEach(e=>{switch(e.status){case"success":this.showSuccessToast(e.message);break;case"error":this.showErrorToast(e.message)}})})}showSuccessToast(e){this.toastr.success(e)}showImportErrorToast(e){this.toastr.error(e+", trying alternate method")}showErrorToast(e){this.toastr.error(e)}};J.ctorParameters=()=>[{type:j.b},{type:l.b},{type:U}],J=o.a([Object(s.C)({providedIn:"root"}),o.c("design:paramtypes",[j.b,l.b,U])],J);let B=class{constructor(){this.scrollRestored=!0,this.scrollPosition=0}setScrollRestored(e){this.scrollRestored=e}setScrollPosition(){this.scrollPosition=document.documentElement.scrollTop}scroll(){document.documentElement.scroll({top:this.scrollPosition}),document.documentElement.scrollTop==this.scrollPosition&&(this.scrollRestored=!1)}};B=o.a([Object(s.C)({providedIn:"root"}),o.c("design:paramtypes",[])],B);var H=i("7Cbv");let W=class{constructor(e,t,i){this.http=e,this.notificationsService=t,this.scrollService=i,this._pointClouds=new N.a(null),this.pointClouds=this._pointClouds.asObservable(),this._loaded=new N.a(null),this.loaded=this._loaded.asObservable(),this._activeGroupId=new N.a(null),this.activeGroupId=this._activeGroupId.asObservable(),this._activeGroup=new N.a(null),this.activeGroup=this._activeGroup.asObservable(),this._activeGroupFeature=new N.a(null),this.activeGroupFeature=this._activeGroupFeature.asObservable(),this._groups=new N.a(null),this.groups=this._groups.asObservable(),this._groupsFeatures=new N.a(null),this.groupsFeatures=this._groupsFeatures.asObservable(),this._features=new N.a({type:"FeatureCollection",features:[]}),this.features$=this._features.asObservable(),this._activeFeature=new N.a(null),this._mapMouseLocation=new N.a(null),this._basemap=new N.a("roads"),this._overlays=new N.a(null),this._activeOverlay=new N.a(null)}getFeature(e,t){return this.http.get(M.apiUrl+`/projects/${e}/features/${t.id}/`)}getFeatures(e,t=new T,i=!1){const s=z.stringify(t.toJson());this.http.get(M.apiUrl+`/projects/${e}/features/?`+s).subscribe(e=>{e.features=e.features.map(e=>new L(e)),this.getGroups(e.features),this._features.next(e),this._loaded.next(!0),i&&this.scrollService.setScrollRestored(!0)})}deleteFeature(e){this.http.delete(M.apiUrl+`projects/${e.project_id}/features/${e.id}/`).subscribe(t=>{this.getFeatures(e.project_id,new T,!0)})}getPointClouds(e){this.http.get(M.apiUrl+`/projects/${e}/point-cloud/`).subscribe(e=>{this._pointClouds.next(e)})}setActiveGroup(e){if(this._activeGroup.next(e),e){const t=this._groupsFeatures.value.get(e.name);this._activeGroupFeature.value&&t.some(e=>this._activeGroupFeature.value.id===e.id)||this.setActiveGroupFeature(t[0])}else this.setActiveGroupFeature(null)}setActiveGroupFeature(e){this._activeGroupFeature.next(e)}addFeature(e){this.features$.pipe(Object(V.a)(1)).subscribe(t=>{t.features.push(e),this._features.next(t)})}addPointCloud(e,t,i){const s={description:t,conversion_parameters:i};this.http.post(M.apiUrl+`/projects/${e}/point-cloud/`,s).subscribe(t=>{this.getPointClouds(e)},e=>{})}updateFeatureProperty(e,t,i){this.http.post(M.apiUrl+`projects/${e}/features/${t}/properties/`,i).subscribe(t=>{this.getFeatures(e)},e=>{})}updateFeatureStyle(e,t,i){this.http.post(M.apiUrl+`/projects/${e}/features/${t}/styles/`,i).subscribe(e=>{},e=>{})}deletePointCloud(e){this.http.delete(M.apiUrl+`/projects/${e.project_id}/point-cloud/${e.id}/`).subscribe(t=>{this.getPointClouds(e.project_id)})}addFileToPointCloud(e,t){const i=new FormData;i.append("file",t),this.http.post(M.apiUrl+`/projects/${e.project_id}/point-cloud/${e.id}/`,i).subscribe(e=>{console.log(e)})}importFileFromTapis(e,t){const i=t.map(e=>({system:e.system,path:e.path})),s={files:i};this.fileList=i,this.http.post(M.apiUrl+`projects/${e}/features/files/import/`,s).subscribe(e=>{this.notificationsService.showSuccessToast("Import started!")},e=>{this.notificationsService.showImportErrorToast("Import failed! Try again?")})}importImage(e,t,i){const s=t.id;let n;this.fileList.forEach(e=>{e.path==i&&(n=e)});const o={system_id:n.system,path:n.path};this.http.post(M.apiUrl+`projects/${e}/features/${s}/assets/`,o).subscribe(e=>{this.notificationsService.showSuccessToast("Import started!")})}uploadNewFeature(e,t,i){const s=t;let n;this.http.post(M.apiUrl+`projects/${e}/features/`,s).subscribe(t=>{n=new L(t[0]),this.importImage(e,n,i)})}downloadGeoJSON(e,t=new T){const i=z.stringify(t.toJson()),s=document.createElement("a");this.http.get(M.apiUrl+`/projects/${e}/features/?`+i).subscribe(e=>{const t=new Blob([JSON.stringify(e)],{type:"application/json"});s.href=URL.createObjectURL(t),s.setAttribute("download","hazmapper.json"),document.body.appendChild(s),s.click(),document.body.removeChild(s)})}uploadFile(e,t){const i=new FormData;i.append("file",t,t.name),this.http.post(M.apiUrl+`/projects/${e}/features/files/`,i).subscribe(e=>{e.forEach(e=>{this.addFeature(new L(e))})},e=>{})}uploadAssetFile(e,t,i){const s=new FormData;s.append("file",i,i.name),this.http.post(M.apiUrl+`/api/projects/${e}/features/${t}/assets/`,s).subscribe(i=>{const s=this._activeFeature.getValue();s&&s.id===t&&(this.activeFeature=new L(i),this.getFeatures(e))},e=>{})}getOverlays(e){this.http.get(M.apiUrl+`/projects/${e}/overlays/`).subscribe(e=>{this._overlays.next(e)})}addOverlay(e,t,i,s,n,o,r){const a=new FormData;a.append("file",t),a.append("label",i),a.append("minLat",s.toFixed(6)),a.append("maxLat",n.toFixed(6)),a.append("minLon",o.toFixed(6)),a.append("maxLon",r.toFixed(6)),this.http.post(M.apiUrl+`/projects/${e}/overlays/`,a).subscribe(t=>{this.getOverlays(e)})}getGroups(e){const t=new Map,i=new Map;e.filter(e=>e.properties.group&&e.properties.group.length>0).forEach(e=>{e.properties.group.forEach(s=>{i.set(s.name,i.has(s.name)?[...i.get(s.name),e]:[e]),t.set(s.name,s)})}),this._groups.next(t),this._groupsFeatures.next(i);const s=this._activeGroup.value;s&&this.setActiveGroup(t.get(s.name))}getGroup(e){return this._groups.value.get(e)}getGroupFeatures(e,t){return e.filter(e=>e.properties.group&&e.properties.group.length&&e.properties.group.some(e=>e.id===t.id))}createGroup(e,t){return e.map(e=>{let i=e.properties.group?e.properties.group:[];return i=i.filter(e=>e.id!==t.id),i.push(t),e.properties.group=i,e})}createGroupInFeature(e,t){return e.properties.group&&e.properties.group.filter(e=>e.name!==t.name).push(t),e}updateGroup(e,t){return this.getGroupFeatures(e,t).map(e=>{const i=e.properties.group.filter(e=>e.id!==t.id);return i.push(t),e.properties.group=i,e})}deleteGroup(e,t){return this.getGroupFeatures(e,t).map(e=>(e.properties.group=e.properties.group.filter(e=>e.id!==t.id),e))}createNewGroup(e,t,i){const s={id:Object(H.a)(),name:i,color:function(){let e="#";for(let t=0;t<6;t++)e+="0123456789ABCDEF"[Math.floor(16*Math.random())];return e}(),icon:"fa-house-damage"};return this.createGroupFeatures(e,t,s),s}createGroupFeatures(e,t,i){this.createGroup(t,i).forEach(t=>{this.updateFeatureProperty(e,t.id,t.properties)})}deleteGroupFeatures(e,t,i){this.deleteGroup(t,i).forEach(t=>{this.updateFeatureProperty(e,t.id,t.properties)})}updateGroupFeatures(e,t,i){this.updateGroup(t,i).forEach(t=>{this.updateFeatureProperty(e,t.id,t.properties)})}renameGroup(e,t,i,s){const n=Object.assign({},i,{name:s});this.updateGroupFeatures(e,t,n)}reiconGroup(e,t,i,s){const n=Object.assign({},i,{icon:s});this.updateGroupFeatures(e,t,n)}getForms(e){return this._groups.value.get(e).forms}get overlays(){return this._overlays.asObservable()}get features(){return this._features.asObservable()}get activeFeature(){return this._activeFeature.asObservable()}set activeFeature(e){e?e===this._activeFeature.getValue()?this._activeFeature.next(null):this._activeFeature.next(e):this._activeFeature.next(null)}get activeOverlay(){return this._activeOverlay.asObservable()}set activeOverlay(e){this._activeOverlay.next(e)}get mapMouseLocation(){return this._mapMouseLocation.asObservable()}set mapMouseLocation(e){this._mapMouseLocation.next(e)}set basemap(e){this._basemap.next(e)}get basemap(){return this._basemap.asObservable()}};W.ctorParameters=()=>[{type:l.b},{type:J},{type:B}],W=o.a([Object(s.C)({providedIn:"root"}),o.c("design:paramtypes",[l.b,J,B])],W);let K=class{constructor(e,t,i){this.geoDataService=e,this.authService=t,this.bsModalService=i}ngOnInit(){}};K.ctorParameters=()=>[{type:W},{type:U},{type:d.c}],K=o.a([Object(s.n)({selector:"app-main",template:o.b(i("AZwa")).default,styles:[o.b(i("8lyn")).default]}),o.c("design:paramtypes",[W,U,d.c])],K);let Z=class{constructor(e,t){this.route=e,this.auth=t}ngOnInit(){const e=this.route.snapshot.fragment,t=new URLSearchParams(e),i=t.get("access_token"),s=+t.get("expires_in");this.auth.setToken(i,s)}};Z.ctorParameters=()=>[{type:P.a},{type:U}],Z=o.a([Object(s.n)({selector:"app-callback",template:o.b(i("X9m5")).default,styles:[o.b(i("u61n")).default]}),o.c("design:paramtypes",[P.a,U])],Z);let X=class{constructor(e){this.authSvc=e}canActivate(e,t){if(this.authSvc.isLoggedIn())return!0;this.authSvc.login()}};X.ctorParameters=()=>[{type:U}],X=o.a([Object(s.C)(),o.c("design:paramtypes",[U])],X);const q=[{path:"",component:K,canActivate:[X]},{path:"callback",component:Z},{path:"404",component:I}];let Y=class{};Y=o.a([Object(s.K)({imports:[P.c.forRoot(q,{onSameUrlNavigation:"reload"})],exports:[P.c],providers:[X]})],Y);let Q=class{constructor(e){this.authService=e,this.title="viewer"}ngOnInit(){this.authService.login()}};Q.ctorParameters=()=>[{type:U}],Q=o.a([Object(s.n)({selector:"app-root",template:o.b(i("VzVu")).default,styles:[o.b(i("ynWL")).default]}),o.c("design:paramtypes",[U])],Q);var ee=i("4R65");i("JXP8");function te(e,t){let i;return i="image"==e.featureType()?function(e,t){const i=Object(ee.divIcon)({className:"leaflet-fa-marker-icon",html:"<i class='fas fa-camera-retro fa-2x light-blue'></i>"});return Object(ee.marker)(t,{icon:i})}(0,t):"collection"==e.featureType()?function(e,t){const i=Object(ee.divIcon)({className:"icon-marker",html:'<i class="fa fa-folder-open fa-2x light-blue"></i>'});return Object(ee.marker)(t,{icon:i})}(0,t):"video"==e.featureType()?function(e,t){const i=Object(ee.divIcon)({className:"leaflet-fa-marker-icon",html:"<i class='fas fa-video fa-2x light-blue'></i>"});return Object(ee.marker)(t,{icon:i})}(0,t):function(e,t){return Object(ee.circleMarker)(t,{radius:8,fillColor:"#d3d3d3",color:"black",weight:1,opacity:1,fillOpacity:.8})}(0,t),i}var ie=i("WVt+"),se=i("zP0r"),ne=i("pLZG");let oe=class{constructor(e,t){this.GeoDataService=e,this.route=t,this.mapType="normal",this.features=new ee.FeatureGroup,this.featureClickHandler.bind(this),this.mouseEventHandler.bind(this)}ngOnInit(){this.environment=M,this.overlays=new Map,this.map=new ee.Map("map",{center:[40,-80],zoom:9});const e=ee.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19,attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}),t=ee.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{attribution:"Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community"});this.map.addLayer(e),this.loadFeatures(),this.map.on("mousemove",e=>this.mouseEventHandler(e)),this.GeoDataService.activeOverlay.pipe(Object(se.a)(1)).subscribe(e=>{this.addRemoveOverlay(e)}),this.GeoDataService.activeFeature.pipe(Object(ne.a)(e=>null!=e)).subscribe(e=>{this.activeFeature=e;const t=ie.bbox(e);this.map.fitBounds([[t[1],t[0]],[t[3],t[2]]])}),this.GeoDataService.basemap.pipe(Object(se.a)(1)).subscribe(i=>{"sat"==i&&(this.map.removeLayer(e),this.map.addLayer(t)),"roads"==i&&(this.map.removeLayer(t),this.map.addLayer(e))})}addRemoveOverlay(e){if(this.overlays.has(e.id))this.features.removeLayer(this.overlays.get(e.id)),this.overlays.delete(e.id);else{const t=ee.imageOverlay(M.apiUrl+"/assets/"+e.path,[[e.minLat,e.minLon],[e.maxLat,e.maxLon]]);this.overlays.set(e.id,t),this.features.addLayer(t)}this.map.fitBounds(this.features.getBounds())}mouseEventHandler(e){this.GeoDataService.mapMouseLocation=e.latlng}loadFeatures(){const e={pointToLayer:te};this.GeoDataService.features.subscribe(t=>{this.features.clearLayers();const i=ee.markerClusterGroup({iconCreateFunction:e=>ee.divIcon({html:`<div><b>${e.getChildCount()}</b></div>`,className:"marker-cluster"})});t.features.forEach(t=>{const s=ee.geoJSON(t,e);s.on("click",e=>{this.featureClickHandler(e)}),"Point"==t.geometry.type?i.addLayer(s):this.features.addLayer(s)}),this.features.addLayer(i),this.map.addLayer(this.features);try{this.map.fitBounds(this.features.getBounds())}catch(s){}})}featureClickHandler(e){const t=e.layer.feature;this.GeoDataService.activeFeature=t}};oe.ctorParameters=()=>[{type:W},{type:P.a}],oe=o.a([Object(s.n)({selector:"app-map",template:o.b(i("eC1z")).default,styles:[o.b(i("obZR")).default]}),o.c("design:paramtypes",[W,P.a])],oe);var re=i("vkgz");let ae=class{constructor(e,t,i){this.http=e,this.authService=t,this.notificationsService=i,this._projects=new N.a([]),this.projects=this._projects.asObservable(),this._activeProject=new A.a(1),this.activeProject=this._activeProject.asObservable(),this._projectUsers=new A.a(1),this.projectUsers$=this._projectUsers.asObservable(),this._deletingProjects=new N.a([]),this.deletingProjects=this._deletingProjects.asObservable()}testGeoApi(){this.http.post("http://localhost:8888/projects/",{name:"Awesome Project",description:"Cool project"}).subscribe(e=>{this._projects.next([...this._projects.value,e]),this._activeProject.next(e)});this.http.get("http://localhost:8888/projects/").subscribe(e=>{this._projects.next(e)})}updateProjectsList(e=[]){const t=0!==e.length?e:this._projects.value;0!==this._deletingProjects.value.length?this._projects.next(t.map(e=>{const t=this._deletingProjects.value.find(t=>t.id===e.id);return t||e})):this._projects.next(t)}getProjects(){this.http.get(M.apiUrl+"/projects/").subscribe(e=>{this.updateProjectsList(e)},e=>{this.notificationsService.showErrorToast("Error importing files Design Safe, GeoAPI might be down")})}create(e){const t=this.http.post(M.apiUrl+"/projects/",e);return t.subscribe(e=>{this._projects.next([...this._projects.value,e]),this.setActiveProject(e),this.setActiveProject(e)}),t}setActiveProject(e){window.localStorage.setItem("lastProj",JSON.stringify(e));try{this._activeProject.next(e)}catch(t){return t}}update(e){this.http.put(M.apiUrl+`/projects/${e.project.id}/`,e).subscribe(e=>{this._activeProject.next(e)})}delete(e){this._deletingProjects.next([...this._deletingProjects.value,Object.assign({},e,{deleting:!0})]),this.updateProjectsList(),this.http.delete(M.apiUrl+`projects/${e.id}/`).subscribe(t=>{window.localStorage.setItem("lastProj",JSON.stringify("none")),this._deletingProjects.next(this._deletingProjects.value.filter(t=>t.id!==e.id)),this.updateProjectsList(),this.getProjects(),window.localStorage.setItem("lastProj",JSON.stringify("none"))},t=>{window.localStorage.setItem("lastProj",JSON.stringify("none")),this._deletingProjects.next(this._deletingProjects.value.map(t=>t.id===e.id?Object.assign({},t,{deleting:!1,deletingFailed:!0}):t)),this.updateProjectsList(),this.getProjects(),this.notificationsService.showErrorToast("Could not delete project!"),console.error(t)})}getProjectUsers(e){return this.http.get(M.apiUrl+`/projects/${e.id}/users/`).pipe(Object(re.a)(e=>{this._projectUsers.next(e)}))}addUserToProject(e,t){const i={username:t};this.http.post(M.apiUrl+`/projects/${e.id}/users/`,i).subscribe(t=>{this.getProjectUsers(e).subscribe()})}deleteUserFromProject(e,t){this.http.delete(M.apiUrl+`/projects/${e.id}/users/${t}/`).subscribe(t=>{this.getProjectUsers(e).subscribe()},e=>{console.log(e)})}};ae.ctorParameters=()=>[{type:l.b},{type:U},{type:J}],ae=o.a([Object(s.C)({providedIn:"root"}),o.c("design:paramtypes",[l.b,U,J])],ae);let le=class{constructor(e){this.tapis=e,this.baseUrl="https://agave.designsafe-ci.org/systems/v2/",this._systems=new A.a(1),this.systems=this._systems.asObservable(),this._projects=new A.a(1),this.projects=this._projects.asObservable()}list(){this.tapis.systemsList({type:"STORAGE"}).subscribe(e=>{this._systems.next(e.result),this._projects.next(e.result.filter(e=>e.id.startsWith("project")))},e=>{this._systems.next(null),this._projects.next(null)})}};le.ctorParameters=()=>[{type:k.b}],le=o.a([Object(s.C)({providedIn:"root"}),o.c("design:paramtypes",[k.b])],le);var ce=i("dFDH");let pe=class{constructor(e,t,i,s){this.tapis=e,this.http=t,this.authService=i,this.popup=s,this.baseUrl="https://agave.designsafe-ci.org/files/v2/",this._listing=new N.a([]),this.listing=this._listing.asObservable(),this.IMPORTABLE_TYPES=["jpg","jpeg","las","laz","json","geojson","geotiff","tiff","gpx"]}checkIfSelectable(e){if("dir"===e.type)return!1;const t=this.getFileExtension(e);return this.IMPORTABLE_TYPES.includes(t)}getFileExtension(e){return e.name.split(".").pop().toLowerCase()}listFiles(e,t,i,s){return this.tapis.filesList({systemId:e,filePath:t,offset:i,limit:s})}getParentPath(e){const t=e.replace("//","/").split("/");t.pop();return t.join("/")}export(e,t,i,s,n){const o={duration:3e3,horizontalPosition:"right",verticalPosition:"top"},r=`https://agave.designsafe-ci.org/files/v2/media/system/${e}${t}`;let a="plain/text";a=".csv"==s?"text/csv":"application/json";const l=new Blob([n],{type:a}),c=new Date,p=new File([l],i,{lastModified:c.valueOf()}),u=new FormData;u.append("fileToUpload",p),this.http.post(r,u).subscribe(i=>{console.log(i);const s="Successfully saved file to "+e+t;this.popup.open(s,"",o)},i=>{console.log(i);const s="Faled to save file to "+e+t;this.popup.open(s,"",o)})}saveState(){const e=JSON.stringify(this.lastSystem),t=JSON.stringify(this.lastFile);window.localStorage.setItem("system",e),window.localStorage.setItem("file",t)}getState(){try{this.lastSystem=JSON.parse(window.localStorage.getItem("system")),this.lastFile=JSON.parse(window.localStorage.getItem("file")),this.noPreviousSelections=null==this.lastFile}catch(e){console.log(e)}}};pe.ctorParameters=()=>[{type:k.b},{type:l.b},{type:U},{type:ce.a}],pe=o.a([Object(s.C)({providedIn:"root"}),o.c("design:paramtypes",[k.b,l.b,U,ce.a])],pe);var ue,de=i("XNiG"),he=i("itXk");let ge=ue=class{constructor(e,t,i,n,o){this.tapisFilesService=e,this.dialogRef=t,this.dialog=i,this.authService=n,this.agaveSystemsService=o,this.currentPath=new s.w,this.allowedExtensions=this.tapisFilesService.IMPORTABLE_TYPES,this.filesList=[],this.inProgress=!0,this.retrievalError=!1,this.selectedFiles=new Map,this.onClose=new de.a}ngOnInit(){this.agaveSystemsService.list(),Object(he.a)([this.authService.currentUser,this.agaveSystemsService.systems,this.agaveSystemsService.projects]).pipe(Object(V.a)(1)).subscribe(([e,t,i])=>{this.myDataSystem=t.find(e=>"designsafe.storage.default"===e.id),this.communityDataSystem=t.find(e=>"designsafe.storage.community"===e.id),this.publishedDataSystem=t.find(e=>"designsafe.storage.published"===e.id),this.selectedSystem=this.tapisFilesService.lastSystem,null==this.selectedSystem&&(this.selectedSystem=this.myDataSystem,this.tapisFilesService.lastSystem=this.myDataSystem),this.currentDirectory=this.tapisFilesService.lastFile,this.projects=i,this.currentUser=e;const s={system:this.myDataSystem.id,type:"dir",path:this.currentUser.username};this.tapisFilesService.noPreviousSelections&&(this.selectedSystem=this.myDataSystem,this.tapisFilesService.lastFile=s,this.tapisFilesService.noPreviousSelections=!1),this.browse(this.tapisFilesService.lastFile)})}selectSystem(e){let t;t=e.id===this.myDataSystem.id?this.currentUser.username:"/";const i={system:e.id,type:"dir",path:t};this.selectedSystem=e,this.tapisFilesService.lastSystem=this.selectedSystem,this.browse(i)}browse(e){this.selectedPath=e.path,this.selectedSystem=this.selectedSystem,"dir"===e.type&&(this.currentDirectory=e,this.tapisFilesService.lastFile=e,this.filesList=[],this.offset=0,this.inProgress=!1,this.getFiles())}toRoot(){let e;e=this.selectedSystem.id===this.myDataSystem.id?this.currentUser.username:"/";const t={system:this.selectedSystem.id,type:"dir",path:e};this.browse(t)}getFiles(){const e=this.offset%ue.limit==0;!this.inProgress&&e&&(this.inProgress=!0,this.tapisFilesService.listFiles(this.currentDirectory.system,this.currentDirectory.path,this.offset,ue.limit).subscribe(e=>{const t=e.result;if(t.length&&"."===t[0].name){const e=t.shift();this.currentPath.next(e.path),e.path=this.tapisFilesService.getParentPath(e.path),e.name="..",t.unshift(e)}const i=[],s=this.allowedExtensions;t.forEach((function(e,t){("file"==e.type&&s.includes(e.path.split(".").pop().toLowerCase())||"dir"==e.type)&&i.push(e)})),this.inProgress=!1,this.retrievalError=!1,this.filesList=this.filesList.concat(i),this.offset=this.offset+t.length},e=>{this.retrievalError=!0,this.inProgress=!1}))}select(e,t,i){e.shiftKey?this.selectFilesShiftClick(i,t):this.tapisFilesService.checkIfSelectable(t)&&this.addSelectedFile(t,i)}selectFilesShiftClick(e,t){this.selectShift(e,t)}addSelectedFile(e,t){-1!=t&&(this.firstFileIndex=t),this.tapisFilesService.checkIfSelectable(e)&&(this.selectedFiles.has(e.path)?this.selectedFiles.delete(e.path):this.selectedFiles.set(e.path,e))}chooseFiles(){this.tapisFilesService.saveState(),this.tapisFilesService.lastSystem=this.selectedSystem;const e=Array.from(this.selectedFiles.values());this.dialogRef.close(e)}cancel(){this.tapisFilesService.saveState(),this.tapisFilesService.lastSystem=this.selectedSystem,this.dialogRef.close()}selectAll(){let e=0;for(const t of this.filesList)this.selectedFiles.has(t.path)||(this.select("",t,-1),e+=1);1==e&&this.selectedFiles.clear()}selectShift(e,t){null!=this.firstFileIndex&&this.firstFileIndex!=e?this.addRangeFiles(this.firstFileIndex,e,!0):this.addSelectedFile(t,e)}addRangeFiles(e,t,i){const s=Math.max(e,t);for(let n=Math.min(e,t);n<s+1;++n)this.addSelectedFile(this.filesList[n],-1);i&&this.addSelectedFile(this.filesList[e],-1)}};ge.limit=200,ge.ctorParameters=()=>[{type:pe},{type:f.d},{type:f.b},{type:U},{type:le}],o.a([Object(s.R)(),o.c("design:type",s.w)],ge.prototype,"currentPath",void 0),ge=ue=o.a([Object(s.n)({selector:"app-modal-file-browser",template:o.b(i("0NOL")).default,styles:[o.b(i("u6lZ")).default]}),o.c("design:paramtypes",[pe,f.d,f.b,U,le])],ge);var me,fe=i("s7LF");let be=me=class{constructor(e,t,i,n,o){this.tapisFilesService=e,this.dialogRef=t,this.dialog=i,this.authService=n,this.agaveSystemsService=o,this.currentPath=new s.w,this.filesList=[],this.inProgress=!0,this.selectedFiles=new Map,this.onClose=new de.a,this.passbackData=["","","",""],this.fileName="Custom File Name",this.fileExtension=".csv"}ngOnInit(){this.downloadSelectForm=new fe.c({Name:new fe.b(this.fileName),Extension:new fe.b(this.fileExtension)}),this.agaveSystemsService.list(),Object(he.a)([this.authService.currentUser,this.agaveSystemsService.systems,this.agaveSystemsService.projects]).pipe(Object(V.a)(1)).subscribe(([e,t,i])=>{this.myDataSystem=t.find(e=>"designsafe.storage.default"===e.id),this.communityDataSystem=t.find(e=>"designsafe.storage.community"===e.id),this.publishedDataSystem=t.find(e=>"designsafe.storage.published"===e.id),this.selectedSystem=this.myDataSystem,this.projects=i,this.currentUser=e;const s={system:this.myDataSystem.id,type:"dir",path:this.currentUser.username};this.browse(s)})}selectSystem(e){let t;t=e.id===this.myDataSystem.id?this.currentUser.username:"/";const i={system:e.id,type:"dir",path:t};this.browse(i)}browse(e){"dir"===e.type&&(this.currentDirectory=e,this.filesList=[],this.offset=0,this.inProgress=!1,this.getFiles())}getFiles(){const e=this.offset%me.limit==0;!this.inProgress&&e&&(this.inProgress=!0,this.tapisFilesService.listFiles(this.currentDirectory.system,this.currentDirectory.path,this.offset,me.limit).subscribe(e=>{const t=e.result;if(t.length&&"."===t[0].name){const e=t.shift();this.currentPath.next(e.path),this.passbackData[1]=e.path,e.path=this.tapisFilesService.getParentPath(e.path),e.name="..",t.unshift(e)}const i=[];t.forEach((function(e,t){"file"!=e.type&&"dir"!=e.type||i.push(e)})),this.inProgress=!1,this.filesList=this.filesList.concat(i),this.offset=this.offset+t.length},e=>{this.inProgress=!1}))}chooseFiles(){this.passbackData[0]=this.selectedSystem.id,this.downloadSelectForm.dirty?this.passbackData[2]=this.downloadSelectForm.get("Name").value:this.passbackData[2]="",this.passbackData[3]=this.fileExtension,this.dialogRef.close(this.passbackData)}cancel(){this.dialogRef.close()}};be.limit=200,be.ctorParameters=()=>[{type:pe},{type:f.d},{type:f.b},{type:U},{type:le}],o.a([Object(s.R)(),o.c("design:type",s.w)],be.prototype,"currentPath",void 0),be=me=o.a([Object(s.n)({selector:"app-modal-download-selector",template:o.b(i("7E2L")).default,styles:[o.b(i("Ag+R")).default]}),o.c("design:paramtypes",[pe,f.d,f.b,U,le])],be);let ve=class{constructor(e,t,i){this.dialogRef=e,this.dialog=t,this.projectsService=i,this.onClose=new de.a}ngOnInit(){this.projCreateForm=new fe.c({name:new fe.b(""),description:new fe.b("")})}close(e){this.dialogRef.close()}submit(){const e=new D,t=new C;e.description=this.projCreateForm.get("description").value,e.name=this.projCreateForm.get("name").value,t.project=e,this.projectsService.create(t),this.dialogRef.close()}};ve.ctorParameters=()=>[{type:f.d},{type:f.b},{type:ae}],ve=o.a([Object(s.n)({selector:"app-modal-create-project",template:o.b(i("nOsy")).default,styles:[o.b(i("fWOx")).default]}),o.c("design:paramtypes",[f.d,f.b,ae])],ve);let ye=class{constructor(e,t,i){this.dialogRef=e,this.dialog=t,this.projectsService=i}ngOnInit(){this.projShareForm=new fe.c({name:new fe.b("")}),this.projectsService.activeProject.subscribe(e=>{this.activeProj=e}),this.projectsService.getProjectUsers(this.activeProj).subscribe(e=>{this.projectUsers=e,this.onlyOne=1==this.projectUsers.length})}close(){this.dialogRef.close()}submit(){this.projectsService.addUserToProject(this.activeProj,this.projShareForm.get("name").value),this.dialogRef.close()}delete(e){this.projectsService.deleteUserFromProject(this.activeProj,e),this.dialogRef.close()}};ye.ctorParameters=()=>[{type:f.d},{type:f.b},{type:ae}],ye=o.a([Object(s.n)({selector:"app-modal-share-project",template:o.b(i("P1jy")).default,styles:[o.b(i("dp4s")).default]}),o.c("design:paramtypes",[f.d,f.b,ae])],ye);let xe=class{constructor(){this._selectedImages=new N.a([]),this.selectedImages=this._selectedImages.asObservable(),this._showTagger=new N.a(!1),this.showTagger=this._showTagger.asObservable(),this._showTagGenerator=new N.a(!1),this.showTagGenerator=this._showTagGenerator.asObservable()}imageSelected(e){return this._selectedImages.value.some(t=>t.id===e.id)}unselectAllImages(){this._selectedImages.next([])}toggleImageSelect(e){const t=this._selectedImages.value,i=this.imageSelected(e)?t.filter(t=>t.id!==e.id):[e,...t];this._selectedImages.next(i)}setSelectedImages(e){this._selectedImages.next(e)}toggleTagger(){this._showTagger.next(!this._showTagger.value)}setShowTagGenerator(e){this._showTagGenerator.next(e)}};xe=o.a([Object(s.C)({providedIn:"root"}),o.c("design:paramtypes",[])],xe);let Se=class{constructor(e){this.geoDataService=e}deleteForm(e,t,i,s){const n=Object.assign({},i,{forms:i.forms.filter(e=>e.id!==t.id)});this.geoDataService.updateGroupFeatures(e,s,n)}renameForm(e,t,i,s,n){const o=Object.assign({},i,{forms:[...i.forms.filter(e=>e.id!==t.id),Object.assign({},t,{label:n})]});this.geoDataService.updateGroupFeatures(e,s,o)}createForm(e,t,i,s){const n=Object(H.a)();t=Object.assign({},t,{id:n});const o=Object.assign({},i,{forms:i.forms?[...i.forms,t]:[t]});this.geoDataService.updateGroupFeatures(e,s,o)}checkDefault(e,t){if("default"===e)try{e=t.styles.color}catch(i){e="#00C8FF"}return e}saveStyles(e,t,i,s){i.color=this.checkDefault(t,s);const n={faIcon:i.icon,color:i.color};this.geoDataService.updateGroupFeatures(e,[s],i),this.geoDataService.updateFeatureStyle(e,s.id,n)}updateTagValue(e,t,i,s){let n=t.properties.tags?t.properties.tags:[];n=n.filter(e=>i.id!==e.id);const o={id:i.id,value:s};t.properties.tags=[...n,o],this.geoDataService.updateFeatureProperty(e.id,t.id,t.properties)}updateTagValues(e,t,i,s){t.properties.tags=s,this.geoDataService.updateFeatureProperty(e.id,t.id,t.properties)}getTagValue(e,t){if(e.properties.tags){const i=e.properties.tags.find(e=>e.id&&e.id===t.id);if(i)return i.value}return"checkbox"===t.type?[]:""}};Se.ctorParameters=()=>[{type:W}],Se=o.a([Object(s.C)({providedIn:"root"}),o.c("design:paramtypes",[W])],Se);let we=class{constructor(e,t,i,s){this.dialogRef=e,this.dialog=t,this.projectsService=i,this.projData=s}ngOnInit(){this.projectsService.activeProject.subscribe(e=>{this.activeProject=e}),this.projCreateForm=new fe.c({name:new fe.b(this.activeProject.name),description:new fe.b(this.activeProject.description)})}close(){this.dialogRef.close()}delete(){confirm("Are you sure you want to delete this project? This will also delete it from HazMapper, and anyone this project was shared with.")&&this.projectsService.delete(this.activeProject),this.dialogRef.close()}update(){const e=new D,t=new C;e.description=this.projCreateForm.get("description").value,e.name=this.projCreateForm.get("name").value,e.id=this.activeProject.id,e.uuid=this.activeProject.uuid,t.project=e,this.projectsService.update(t),this.dialogRef.close()}};we.ctorParameters=()=>[{type:f.d},{type:f.b},{type:ae},{type:void 0,decorators:[{type:s.B,args:[f.a]}]}],we=o.a([Object(s.n)({selector:"app-modal-current-project",template:o.b(i("moaK")).default,styles:[o.b(i("tw4j")).default]}),o.d(3,Object(s.B)(f.a)),o.c("design:paramtypes",[f.d,f.b,ae,Object])],we);let Fe=class{constructor(e){this.geoDataService=e,this._features=new N.a({type:"FeatureCollection",features:[]}),this.features$=this._features.asObservable(),this.geoDataService.features.subscribe(e=>{this._features.next(e),this.featureCollection=e})}deleteFeature(e){this.featureCollection.features=this.featureCollection.features.filter(t=>t.id!=e.id),this._features.next(this.featureCollection),this.geoDataService.deleteFeature(e)}bulkFeatureDelete(e){e.forEach(e=>{this.featureCollection.features=this.featureCollection.features.filter(t=>t.id!=e.id),this.geoDataService.deleteFeature(e)}),this._features.next(this.featureCollection)}saveFeature(e){this.geoDataService.updateFeatureProperty(e.project_id,Number(e.id),e.properties)}updateFeatureProperties(e,t=null){null!=t&&(e.properties=t),this.featureCollection.features.forEach(t=>{t.id==e.id&&(t=e)}),this.saveFeature(e)}};Fe.ctorParameters=()=>[{type:W}],Fe=o.a([Object(s.C)({providedIn:"root"}),o.c("design:paramtypes",[W])],Fe);let je=class{constructor(e,t,i,s,n,o,r,a,l,c,p,u,d){this.projectsService=e,this.geoDataService=t,this.bsModalService=i,this.groupsService=s,this.formsService=n,this.authService=o,this.cdr=r,this.filesService=a,this.router=l,this.dialog=c,this.scrollService=p,this.notificationsService=u,this.featureService=d,this.featureList=[],this.mapMouseLocation=new ee.LatLng(0,0),this.showTagger=!1,this.invalidNameError=!1,this.existingNameError=!1,this.foundFilePaths=[]}ngOnInit(){this.filesService.getState(),this.featureService.features$.subscribe(e=>{this.features=e,null!=this.features&&(this.featureList=e.features.filter(e=>{try{return e.initialAsset()&&"image"===e.featureType()}catch(t){return console.error(t),e.assets.push({path:"../../images/Image-not-found.png"}),!1}}))}),this.geoDataService.groups.subscribe(e=>{this.groups=e,this.groupsExist=!(!e||!e.size)}),Object(he.a)(this.geoDataService.activeGroup,this.geoDataService.groupsFeatures).subscribe(([e,t])=>{this.activeGroup=e,this.groupsFeatures=t,e&&t&&(this.activeGroupFeatures=t.get(e.name),this.activeGroupFeatures&&(this.activeGroupFeaturesRotate=[...this.activeGroupFeatures]))}),this.geoDataService.activeGroupFeature.subscribe(e=>{this.activeGroupFeature=e}),this.geoDataService.activeFeature.subscribe(e=>{this.activeFeature=e}),this.notificationsService.notifications.subscribe(e=>{const t=e.some(e=>"success"===e.status),i=e.some(e=>"error"===e.status);t&&this.geoDataService.getFeatures(this.selectedProject.id),i&&(e.forEach(e=>{if("Error importing "==e.message.substring(0,16)&&!this.foundFilePaths.some(t=>t===e.message.substring(16))){const t=e.message.substring(16);this.geoDataService.uploadNewFeature(this.selectedProject.id,this.createBlankFeature(),t),this.foundFilePaths.push(t)}}),this.geoDataService.getFeatures(this.selectedProject.id))}),this.authService.currentUser.subscribe(e=>this.currentUser=e),this.projectsService.getProjects(),this.projectsService.projects.subscribe(e=>{if(this.projects=e,this.projects.length){let e;e=this.projectsService.setActiveProject(this.projects[0]),"none"!=e&&null!=e||(e=this.projects[0]),this.projectsService.setActiveProject(e)}this.groupsService.selectedImages.subscribe(e=>{this.selectedImages=e}),this.groupsService.showTagger.subscribe(e=>{this.showTagger=e})}),this.projectsService.activeProject.subscribe(e=>{this.selectedProject=e,this.getDataForProject(this.selectedProject),this.hazmapperLink="https://hazmapper.tacc.utexas.edu/hazmapper/project/"+e.uuid}),this.geoDataService.mapMouseLocation.pipe(Object(se.a)(1)).subscribe(e=>{this.mapMouseLocation=e})}ngAfterViewChecked(){this.cdr.detectChanges()}clearAll(){this.groupsService.unselectAllImages()}selectProject(e){this.projectsService.setActiveProject(e),this.getDataForProject(e)}getDataForProject(e){this.geoDataService.getFeatures(e.id),this.geoDataService.getOverlays(e.id),this.geoDataService.getPointClouds(e.id)}openFilePicker(){this.foundFilePaths=[];this.dialog.open(ge).afterClosed().subscribe(e=>{null!=e&&this.geoDataService.importFileFromTapis(this.selectedProject.id,e)})}createBlankFeature(){return{type:"Feature",geometry:{type:"Point",coordinates:[0,0]},properties:{}}}openDownloadSelector(e){let t;this.dialog.open(be).afterClosed().subscribe(e=>{t=e,this.saveFile(".json"==t[3],!0,t[0],t[1],t[2])})}openCreateProjectModal(){this.dialog.open(ve,{height:"400px",width:"600px"})}openShareProjectModal(){this.dialog.open(ye,{height:"400px",width:"600px"})}openProjectModal(e){this.dialog.open(we,{height:"400px",width:"600px",data:{id:e.id,name:e.name,description:e.description,uuid:e.uuid}}).afterClosed().subscribe(e=>{this.projectsService.setActiveProject(this.projects[0])})}addGroup(e){if(this.groupName=e,e&&0!==e.length)if(this.groups.get(e))this.invalidNameError=!1,this.existingNameError=!0;else{this.invalidNameError=!1,this.existingNameError=!1;this.geoDataService.createNewGroup(this.selectedProject.id,this.selectedImages,e);this.dialog.closeAll(),this.groupsService.unselectAllImages()}else this.invalidNameError=!0,this.existingNameError=!1}openAddGroupModal(e){this.dialog.open(e)}toggleTagger(){if(this.showTagger)this.scrollService.setScrollPosition();else{this.scrollService.setScrollRestored(!0);const[e]=this.groupsFeatures.keys(),t=(this.groupsFeatures.get(e),this.groups.get(e));this.geoDataService.setActiveGroup(t),this.groupsService.setShowTagGenerator(!1),this.groupsService.unselectAllImages()}this.groupsService.toggleTagger()}getAssetDisplay(){return this.activeGroupFeature.featureShortPath()}otherPath(e){e?this.activeGroupFeaturesRotate.push(this.activeGroupFeaturesRotate.shift()):this.activeGroupFeaturesRotate.unshift(this.activeGroupFeaturesRotate.pop()),this.activeGroupFeature=this.activeGroupFeaturesRotate[0],this.geoDataService.setActiveGroupFeature(this.activeGroupFeature)}saveFile(e,t=!1,i="",s="",n){let o,r,a="FeatureID,longitude,latitude,src",l="",c="",p=!0,u=!1,d=0;this.featureList.forEach(t=>{c=t.project_id;const i=t.geometry.coordinates;let s,n,o,r=M.apiUrl+"/assets/"+t.assets[0].path;r=r.replace(/([^:])(\/{2,})/g,"$1/");try{try{s=t.properties.group}catch(h){s=[{color:"#000000",name:"N/A",icon:"fa-house-damage"}]}try{n=t.properties.style}catch(g){n=[]}try{o=t.properties.tag}catch(m){o=[]}s.length>0&&!u&&(a+=",groupName,groupColor,groupIcon"),null!=o&&p&&!u?(a+=",Icon,Color,tagType,tagSelection",o.forEach(e=>{let t=0;e.options.forEach(e=>{t++,t>d&&(a+=",tagOption",d=t)})}),u||(a+="\r\n",p=!1,u=!0)):u||(a+="\r\n",u=!0)}catch(f){}if(e)l+=this.compileJSON(i,t.id,r,s,o,n)+", \n";else if(null==s){a+="\r\n";const e=t.id+","+i[0]+","+i[1]+","+r+"\r\n";a+=e}else s.forEach(e=>{if(null!=o)try{o.forEach(s=>{{let o=t.id+","+i[0]+","+i[1]+","+r+","+e.name+","+e.color+","+e.icon+","+n.faIcon+","+n.color+","+s.type+","+s.extra[0].option;s.options.forEach(e=>{o+=","+e.label}),o+="\r\n",a+=o}})}catch(h){try{const s=t.id+","+i[0]+","+i[1]+","+r+","+e.name+","+e.color+","+e.icon+"\r\n";a+=s}catch(f){const s=t.id+","+i[0]+","+i[1]+","+r+"\r\n";a+=s}}else{const s=t.id+","+i[0]+","+i[1]+","+r+","+e.name+","+e.color+","+e.icon+"\r\n";a+=s}})}),e?(o=l,r=".json"):(o=a,r=".csv"),t?(""==n?n=c+r:n+=r,this.filesService.export(i,s,n,r,o)):this.download(o,r,c)}compileJSON(e,t,i,s=[],n=[],o){let r,a="";return r={longitude:e[0],latitude:e[1],src:i},a+=JSON.stringify(r),0!=s.length&&s.forEach(e=>{r={groupName:e.name,groupColor:e.color},a+=JSON.stringify(r),n.length>0&&n.forEach(e=>{e.feature==t&&(r={icon:o.faIcon,"icon color":o.color,"tag name":e.label,"tag type":e.type,"tag selection":e.extra[0].option},a+=JSON.stringify(r))})}),""==a&&(r={longitude:e[0],latitude:e[1],src:i},a+=JSON.stringify(r)),a}download(e,t,i){const s=new Blob(["\ufeff"+e],{type:"text/csv;charset=utf-8;"}),n=document.createElement("a"),o=URL.createObjectURL(s),r="taggit-proj-"+i;-1!=navigator.userAgent.indexOf("Safari")&&-1==navigator.userAgent.indexOf("Chrome")&&n.setAttribute("target","_blank"),n.setAttribute("href",o),n.setAttribute("download",r+t),n.style.visibility="hidden",document.body.appendChild(n),n.click(),document.body.removeChild(n)}};je.ctorParameters=()=>[{type:ae},{type:W},{type:d.c},{type:xe},{type:Se},{type:U},{type:s.k},{type:pe},{type:P.b},{type:f.b},{type:B},{type:J},{type:Fe}],je=o.a([Object(s.n)({selector:"app-control-bar",template:o.b(i("vlUF")).default,styles:[o.b(i("uV4w")).default]}),o.c("design:paramtypes",[ae,W,d.c,xe,Se,U,s.k,pe,P.b,f.b,B,J,Fe])],je);var Oe=i("z6cu"),ke=i("JIr8");let Pe=class{constructor(e){this.authService=e}intercept(e,t){return t.handle(e).pipe(Object(ke.a)(e=>{401===e.status&&(this.authService.logout(),location.reload());const t=e.error.message||e.statusText;return Object(Oe.a)(t)}))}};Pe.ctorParameters=()=>[{type:U}],Pe=o.a([Object(s.C)(),o.c("design:paramtypes",[U])],Pe);let Ie=class{constructor(e){this.authSvc=e}intercept(e,t){return e.url.indexOf("https://agave.designsafe-ci.org")>-1&&this.authSvc.isLoggedIn()&&(e=e.clone({setHeaders:{Authorization:"Bearer "+this.authSvc.userToken.token}})),e.url.indexOf("http://localhost")>-1&&this.authSvc.isLoggedIn()&&(e=e.clone({setHeaders:{"X-JWT-Assertion-designsafe":M.jwt}})),e.url.indexOf("http://localhost")>-1&&this.authSvc.isLoggedIn()&&(e=e.clone({setHeaders:{"X-JWT-Assertion-designsafe":M.jwt}})),t.handle(e)}};Ie.ctorParameters=()=>[{type:U}],Ie=o.a([Object(s.C)(),o.c("design:paramtypes",[U])],Ie);let Ge=class{constructor(e,t,i,s,n,o,r,a,l){this.geoDataService=e,this.projectsService=t,this.groupsService=i,this.cdr=s,this.renderer=n,this.spinner=o,this.dialog=r,this.scrollService=a,this.featureService=l,this.showTagger=!1,this.scrolling=!1,this.featureList=[],this.scrollSum=15}ngAfterViewChecked(){this.scrollService.scrollRestored&&this.scrollService.scroll(),this.cdr.detectChanges()}ngOnInit(){this.environment=M,this.geoDataService.loaded.subscribe(e=>{this.loaded=e},e=>{this.projectsExist=!1}),this.featureService.features$.subscribe(e=>{e&&(e.features.length>0?(this.imagesExist=!0,this.featureList=e.features.filter(e=>{try{return e.initialAsset()&&"image"===e.featureType()}catch(t){return console.error(t),e.assets.push({path:"../../images/Image-not-found.png"}),!1}}),this.featureListScroll=this.featureList.slice(0,this.scrollSum)):this.imagesExist=!1)}),this.projectsService.projects.subscribe(e=>{this.projects=e,this.projects.length?this.projectsExist=!0:this.projectsExist=!1}),this.geoDataService.groupsFeatures.subscribe(e=>{this.groupsFeatures=e}),this.geoDataService.groups.subscribe(e=>{this.groups=e}),this.geoDataService.activeFeature.subscribe(e=>{e&&(this.activeFeature=e)}),this.geoDataService.activeGroup.subscribe(e=>{this.activeGroup=e}),this.geoDataService.activeGroupFeature.subscribe(e=>{this.activeGroupFeature=e}),this.geoDataService.groups.subscribe(e=>{this.groups=e}),this.groupsService.showTagger.subscribe(e=>{this.showTagger=e,this.scrollStatus=e?"success":"danger"})}getPath(){return this.environment.apiUrl+"/assets/"+this.activeGroupFeature.assets[0].path.replace(/([^:])(\/{2,})/g,"$1/")}appendSum(){if(0!=this.featureList.length){if(this.scrollSum==this.featureList.length)return this.spinner.hide(),void(this.scrolling=!1);this.scrollSum>this.featureList.length&&(this.scrollSum=this.featureList.length)}this.featureListScroll=this.featureList.slice(0,this.scrollSum),setTimeout(()=>{this.spinner.hide(),this.scrolling=!1},1300)}onScroll(){this.scrolling||(this.spinner.show(),this.scrollSum+=10,this.appendSum(),this.scrolling=!0)}openCreateProjectModal(){this.dialog.open(ve,{height:"400px",width:"600px"})}};Ge.ctorParameters=()=>[{type:W},{type:ae},{type:xe},{type:s.k},{type:s.Z},{type:u.b},{type:f.b},{type:B},{type:Fe}],Ge=o.a([Object(s.n)({selector:"app-image-gallery",template:o.b(i("Pwca")).default,styles:[o.b(i("N3QO")).default]}),o.c("design:paramtypes",[W,ae,xe,s.k,s.Z,u.b,f.b,B,Fe])],Ge);var Te=i("KaVy");let De=class{constructor(e,t,i,s,n,o,r,a){this.geoDataService=e,this.groupsService=t,this.projectsService=i,this.modalService=s,this.formsService=n,this.dialog=o,this.scrollService=r,this.featureService=a,this.status=!1,this.imageSelected="img-unselected",this.hasGroup=!1,this.colors=[]}ngOnInit(){let e;this.environment=M,e="../../images/Image-not-found.png"!=this.feature.assets[0].path?this.environment.apiUrl+"/assets/"+this.feature.assets[0].path:this.feature.assets[0].path,e=e.replace(/([^:])(\/{2,})/g,"$1/"),this.featureSource=e,this.coordinates=this.feature.geometry.coordinates,this.projectsService.activeProject.subscribe(e=>{this.activeProject=e}),this.geoDataService.groups.subscribe(e=>{this.groups=e}),this.groupsService.selectedImages.subscribe(e=>{this.selectedImages=e,this.imageSelected=this.groupsService.imageSelected(this.feature)?"img-selected":"img-unselected"}),this.featurePath=this.feature.featurePath()}imageSelect(){this.groupsService.toggleImageSelect(this.feature)}imageZoom(e){this.dialog.open(e)}imageDelete(){const e=this.featureService;this.selectedImages.forEach((function(t){e.deleteFeature(t)})),this.groupsService.unselectAllImages(),this.scrollService.setScrollRestored(!0)}openMoreGroupsModal(e){this.dialog.open(e)}openImageDeleteModal(e){this.scrollService.setScrollPosition(),this.dialog.open(e)}deleteFromGroup(e,t){this.geoDataService.deleteGroupFeatures(this.activeProject.id,[e],t)}openImageAddModal(e){this.scrollService.setScrollPosition(),this.dialog.open(e)}addGroup(e){this.geoDataService.createGroupFeatures(this.activeProject.id,this.selectedImages,this.groups.get(e.name)),this.groupsService.unselectAllImages(),this.scrollService.setScrollRestored(!0)}};De.ctorParameters=()=>[{type:W},{type:xe},{type:ae},{type:Te.a},{type:Se},{type:f.b},{type:B},{type:Fe}],o.a([Object(s.F)(),o.c("design:type",Object)],De.prototype,"feature",void 0),De=o.a([Object(s.n)({selector:"app-image-box",template:o.b(i("ay+3")).default,styles:[o.b(i("if2z")).default]}),o.c("design:paramtypes",[W,xe,ae,Te.a,Se,f.b,B,Fe])],De);let Ce=class{constructor(e){this.formsService=e,this.newValue=new s.w,this.checked=!1,this.colorArray=[],this.values=[],this.name=new fe.b("")}ngOnInit(){this.generateColors()}generateColors(){let e=this.form.options.length,t=!1;e%2==1&&(t=!0,e--),e=(e-2)/2;let i=Math.floor(255/e);255===i&&(i=Math.floor(i/2)),this.colorArray.push("#00FF00");let s,n=0;for(let o=0;o<e;o++)n+=i,s=n.toString(16),this.colorArray.push(`#${s}FF00`);t&&this.colorArray.push("#FFFF00"),n=255;for(let o=0;o<e;o++)n-=i,s=n.toString(16),2!=s.length&&(s="0"+s),this.colorArray.push(`#FF${s}00`);this.colorArray.push("#FF0000")}setValue(e){this.newValue.emit(e)}};Ce.ctorParameters=()=>[{type:Se}],o.a([Object(s.F)(),o.c("design:type",G)],Ce.prototype,"form",void 0),o.a([Object(s.R)(),o.c("design:type",Object)],Ce.prototype,"newValue",void 0),Ce=o.a([Object(s.n)({selector:"app-form-generator",template:o.b(i("zusP")).default,styles:[o.b(i("ld75")).default]}),o.c("design:paramtypes",[Se])],Ce);let _e=class{constructor(e){this.groupsService=e,this.showTagGenerator=!1}ngOnInit(){this.groupsService.showTagGenerator.subscribe(e=>{this.showTagGenerator=e})}};_e.ctorParameters=()=>[{type:xe}],_e=o.a([Object(s.n)({selector:"app-side-bar",template:o.b(i("c6cR")).default,styles:[o.b(i("IElf")).default]}),o.c("design:paramtypes",[xe])],_e);const Le=[{id:"fa-house-damage",unicode:"&#xf6f1; house-damage"},{id:"fa-car",unicode:"&#xf1b9; car"},{id:"fa-tree",unicode:"&#xf1bb; tree"},{id:"fa-school",unicode:"&#xf549; school"},{id:"fa-archway",unicode:"&#xf557; archway"},{id:"fa-building",unicode:"&#xf1ad; building"},{id:"fa-bus",unicode:"&#xf207; bus"},{id:"fa-church",unicode:"&#xf51d; church"},{id:"fa-helicopter",unicode:"&#xf533; helicopter"},{id:"fa-hospital-alt",unicode:"&#xf47d; hospital"},{id:"fa-hotel",unicode:"&#xf594; hotel"},{id:"fa-igloo",unicode:"&#xf7ae; igloo"},{id:"fa-motorcycle",unicode:"&#xf21c; motorcycle"},{id:"fa-place-of-worship",unicode:"&#xf67f; place-of-worship"},{id:"fa-plane",unicode:"&#xf072; plane"},{id:"fa-school",unicode:"&#xf549; school"},{id:"fa-rocket",unicode:"&#xf135; rocket"},{id:"fa-ship",unicode:"&#xf21a; ship"},{id:"fa-shopping-cart",unicode:"&#xf07a; shopping-cart"},{id:"fa-shuttle-van",unicode:"&#xf5b6; shuttle-van"},{id:"fa-monument",unicode:"&#xf5a6; monument"},{id:"fa-store",unicode:"&#xf54e; store"},{id:"fa-subway",unicode:"&#xf239; subway"},{id:"fa-taxi",unicode:"&#xf1ba; taxi"},{id:"fa-train",unicode:"&#xf238; train"},{id:"fa-truck",unicode:"&#xf0d1; truck"},{id:"fa-truck-pickup",unicode:"&#xf63c; truck-pickup"},{id:"fa-university",unicode:"&#xf19c; university"},{id:"fa-warehouse",unicode:"&#xf494; warehouse"},{id:"fa-bolt",unicode:"&#xf0e7; bolt"}];let Ee=class{constructor(e,t,i,s,n,o){this.formsService=e,this.groupsService=t,this.geoDataService=i,this.projectsService=s,this.dialog=n,this.featureService=o,this.iconList=Le,this.selectedIcon="fa-house-damage",this.showSubitem=!0}ngOnInit(){this.projectsService.activeProject.subscribe(e=>{this.selectedProject=e}),this.groups$=this.geoDataService.groups.subscribe(e=>{this.groups=e}),this.geoDataService.groupsFeatures.subscribe(e=>{this.groupsFeatures=e}),this.activeGroup$=this.geoDataService.activeGroup.subscribe(e=>{this.activeGroup=e,e||this.groupsService.toggleTagger()})}selectGroupForm(e){this.geoDataService.setActiveGroup(e)}openRenameOptionModal(e){this.dialog.open(e)}deleteGroup(e){const t=this.groupsFeatures.get(e.name);this.geoDataService.deleteGroupFeatures(this.selectedProject.id,t,e)}openRenameModal(e,t){this.selectedGroup=t,this.dialog.open(e)}openIconSelection(e,t){this.selectedGroup=t,this.selectedIcon=t.icon,this.dialog.open(e)}saveIcon(e){this.geoDataService.reiconGroup(this.selectedProject.id,this.groupsFeatures.get(this.selectedGroup.name),this.groups.get(this.selectedGroup.name),e),this.dialog.closeAll()}isChecked(e){return this.activeGroup&&this.activeGroup.name===e?"checked":""}renameGroup(e){this.geoDataService.renameGroup(this.selectedProject.id,this.groupsFeatures.get(this.selectedGroup.name),this.groups.get(this.selectedGroup.name),e),this.dialog.closeAll()}expandPanel(){this.showSubitem=!this.showSubitem}ngOnDestroy(){this.groups$.unsubscribe(),this.activeGroup$.unsubscribe()}};Ee.ctorParameters=()=>[{type:Se},{type:xe},{type:W},{type:ae},{type:f.b},{type:Fe}],Ee=o.a([Object(s.n)({selector:"app-select-group",template:o.b(i("s9wi")).default,styles:[o.b(i("I57P")).default]}),o.c("design:paramtypes",[Se,xe,W,ae,f.b,Fe])],Ee);let Me=class{constructor(e,t,i){this.formsService=e,this.geoDataService=t,this.projectsService=i,this.showSubitem=!0}ngOnInit(){this.projectsService.activeProject.subscribe(e=>{this.activeProject=e}),this.geoDataService.groups.subscribe(e=>{this.groups=e}),this.geoDataService.activeGroup.subscribe(e=>{this.activeGroup=e}),this.geoDataService.activeGroupFeature.subscribe(e=>{this.activeGroupFeature=e}),this.geoDataService.groupsFeatures.subscribe(e=>{if(this.groupsFeatures=e,e&&this.activeGroup){const e=this.groupsFeatures.get(this.activeGroup.name);if(e)e.some(e=>e.id===this.activeGroupFeature.id)||this.geoDataService.setActiveGroupFeature(e[0]);else{const[e]=this.groups.values();e?this.geoDataService.setActiveGroup(e):this.geoDataService.setActiveGroup(null)}}})}getActiveFeatures(){if(this.activeGroup){const e=this.groupsFeatures.get(this.activeGroup.name);if(this.groups.get(this.activeGroup.name))return e;{const[e]=this.groups.values();return e?(this.geoDataService.setActiveGroup(e),this.groupsFeatures.get(e.name)):[]}}return[]}jumpToImage(e){this.geoDataService.setActiveGroupFeature(e)}isActiveFeature(e){return this.activeGroupFeature.id===e.id}deleteFeature(e){this.geoDataService.deleteGroupFeatures(this.activeProject.id,[e],this.groups.get(this.activeGroup.name))}getFeaturePath(e){return e.featureShortPath()}expandPanel(){this.showSubitem=!this.showSubitem}};Me.ctorParameters=()=>[{type:Se},{type:W},{type:ae}],Me=o.a([Object(s.n)({selector:"app-select-image",template:o.b(i("033P")).default,styles:[o.b(i("T7o7")).default]}),o.c("design:paramtypes",[Se,W,ae])],Me);let Ae=class{constructor(e,t,i,s,n,o){this.formsService=e,this.groupsService=t,this.dialog=i,this.router=s,this.geoDataService=n,this.projectsService=o,this.formOptions=[],this.optionColorFilter="#000000",this.openOption={},this.enabledControls=[],this.showSubitem=!0}ngOnInit(){this.geoDataService.activeGroup.subscribe(e=>{this.activeGroup=e}),this.geoDataService.groups.subscribe(e=>{this.groups=e}),this.geoDataService.groupsFeatures.subscribe(e=>{this.groupsFeatures=e}),this.projectsService.activeProject.subscribe(e=>{this.activeProject=e}),this.formOptions=[],this.formType="text",this.formName="",this.formLabel="",this.formValue="",this.formRequired=!1,this.enabledControls=["Text","Checkbox","Radio","Dropdown","Color"]}inputFormLabel(e){this.formLabel=e.target.value}inputFormColor(e){this.formColor=e.target.value}addOptionItem(e){if(e){0==this.formOptions.filter(t=>t.label==e).length&&0!=e.length&&this.formOptions.push({label:e,color:this.optionColorFilter})}}deleteOption(e){this.formOptions=this.formOptions.filter(t=>t.label!=e.label)}openRenameModal(e,t){this.selectedGroup=t,this.dialog.open(e)}openRenameOptionModal(e){this.dialog.open(e)}renameOption(e,t){t=t.toLowerCase(),this.formOptions.forEach(i=>{i.label==e.label&&(i.label=t)})}selectInputForm(e){this.formType=e,this.formLabel="",this.formOptions=[]}clearOption(){this.optionFilter=""}clearLabel(){this.labelFilter=""}clearOptionColor(){this.optionColorFilter="#000000"}clear(){this.clearLabel(),this.clearOptionColor(),this.clearOption()}addFormItem(){const e={type:this.formType,groupName:this.activeGroup.name,label:this.formLabel,options:[]};if(this.openOption[this.formLabel]=!1,"text"!==this.formType&&0!=this.formOptions.length){const t=[];for(const e of this.formOptions)t.push({label:e});e.options=this.formOptions}this.formsService.createForm(this.activeProject.id,e,this.groups.get(this.activeGroup.name),this.groupsFeatures.get(this.activeGroup.name)),this.formLabel="",this.formColor="",this.formOptions=[],this.groupsService.setShowTagGenerator(!1),this.clear()}cancelCreate(){this.groupsService.setShowTagGenerator(!1),this.clear()}expandPanel(){this.showSubitem=!this.showSubitem}};Ae.ctorParameters=()=>[{type:Se},{type:xe},{type:f.b},{type:P.b},{type:W},{type:ae}],Ae=o.a([Object(s.n)({selector:"app-tag-generator",template:o.b(i("MHpZ")).default,styles:[o.b(i("dTB+")).default]}),o.c("design:paramtypes",[Se,xe,f.b,P.b,W,ae])],Ae);let Re=class{constructor(e,t,i,s,n,o,r){this.groupsService=e,this.formsService=t,this.dialog=i,this.router=s,this.projectsService=n,this.geoDataService=o,this.featureService=r,this.showSubitem=!0,this.formList=[],this.tagName="",this.tagValues=[]}ngOnInit(){Object(he.a)(this.geoDataService.activeGroup,this.geoDataService.groupsFeatures,this.geoDataService.groups).subscribe(([e,t,i])=>{this.activeGroup=e,this.groupsFeatures=t,this.groups=i,e&&(this.formList=e.forms)}),this.geoDataService.activeGroupFeature.subscribe(e=>{this.activeGroupFeature=e}),this.projectsService.activeProject.subscribe(e=>{this.activeProject=e})}openRenameModal(e,t){this.selectedGroup=t,this.dialog.open(e)}deleteForm(e){this.formsService.deleteForm(this.activeProject.id,e,this.groups.get(this.activeGroup.name),this.groupsFeatures.get(this.activeGroup.name))}renameForm(e){this.formsService.renameForm(this.activeProject.id,e,this.groups.get(this.activeGroup.name),this.groupsFeatures.get(this.activeGroup.name),this.tagName),this.tagName="",this.dialog.closeAll()}showTagGenerator(){this.groupsService.setShowTagGenerator(!0)}saveTags(){this.formsService.updateTagValues(this.activeProject,this.activeGroupFeature,this.formList,this.tagValues)}setValue(e){this.tagValues=this.tagValues.filter(t=>t.id!==e.id),this.tagValues.push(e)}expandPanel(){this.showSubitem=!this.showSubitem}};Re.ctorParameters=()=>[{type:xe},{type:Se},{type:f.b},{type:P.b},{type:ae},{type:W},{type:Fe}],Re=o.a([Object(s.n)({selector:"app-tag-images",template:o.b(i("zXfM")).default,styles:[o.b(i("qk7I")).default]}),o.c("design:paramtypes",[xe,Se,f.b,P.b,ae,W,Fe])],Re);var Ue=i("hOhj"),Ne=i("W5yJ"),Ve=i("AaDx"),ze=i("8P0U");let $e=class{constructor(){}ngOnInit(){}};$e=o.a([Object(s.n)({selector:"app-form-fields",template:o.b(i("T+fY")).default}),o.c("design:paramtypes",[])],$e);let Je=class{constructor(e,t,i,n,o){this.formsService=e,this.groupsService=t,this.geoDataService=i,this.projectsService=n,this.featureService=o,this.formValue=new s.w,this.value=[]}ngOnInit(){this.geoDataService.activeGroupFeature.subscribe(e=>{this.activeGroupFeature=e,this.value=this.formsService.getTagValue(e,this.form),this.formValue.emit({id:this.form.id,value:this.value})}),this.geoDataService.activeGroup.subscribe(e=>{this.activeGroup=e}),this.projectsService.activeProject.subscribe(e=>{this.activeProject=e})}isChecked(e){return this.value.some(t=>t.label===e.label)}selected(e,t){this.value=this.value.filter(e=>e.label!==t.label),e.target.checked&&this.value.push(t),this.formValue.emit({id:this.form.id,value:this.value})}};Je.ctorParameters=()=>[{type:Se},{type:xe},{type:W},{type:ae},{type:Fe}],o.a([Object(s.R)(),o.c("design:type",s.w)],Je.prototype,"formValue",void 0),o.a([Object(s.F)(),o.c("design:type",Object)],Je.prototype,"field",void 0),o.a([Object(s.F)(),o.c("design:type",G)],Je.prototype,"form",void 0),Je=o.a([Object(s.n)({selector:"app-form-checkbox",template:o.b(i("yXUO")).default}),o.c("design:paramtypes",[Se,xe,W,ae,Fe])],Je);let Be=class{constructor(e,t){this.formsService=e,this.geoDataService=t,this.formValue=new s.w,this.field={}}ngOnInit(){this.geoDataService.activeGroupFeature.subscribe(e=>{this.value=this.formsService.getTagValue(e,this.form),this.formValue.emit({id:this.form.id,value:this.value})})}updateCheckedTag(){this.formValue.emit({id:this.form.id,value:this.value})}};Be.ctorParameters=()=>[{type:Se},{type:W}],o.a([Object(s.R)(),o.c("design:type",s.w)],Be.prototype,"formValue",void 0),o.a([Object(s.F)(),o.c("design:type",Object)],Be.prototype,"field",void 0),o.a([Object(s.F)(),o.c("design:type",G)],Be.prototype,"form",void 0),Be=o.a([Object(s.n)({selector:"app-form-dropdown",template:o.b(i("/WLi")).default}),o.c("design:paramtypes",[Se,W])],Be);let He=class{constructor(){this.field={}}ngOnChange(){console.log(this.field.value)}};He=o.a([Object(s.n)({selector:"app-form-file",template:o.b(i("503e")).default,styles:[o.b(i("1NWJ")).default]}),o.c("design:paramtypes",[])],He);let We=class{constructor(e,t){this.formsService=e,this.geoDataService=t,this.formValue=new s.w,this.field={}}ngOnInit(){this.geoDataService.activeGroupFeature.subscribe(e=>{this.value=this.formsService.getTagValue(e,this.form),this.formValue.emit({id:this.form.id,value:this.value})})}updateCheckedTag(){this.formValue.emit({id:this.form.id,value:this.value})}};We.ctorParameters=()=>[{type:Se},{type:W}],o.a([Object(s.R)(),o.c("design:type",s.w)],We.prototype,"formValue",void 0),o.a([Object(s.F)(),o.c("design:type",Object)],We.prototype,"field",void 0),o.a([Object(s.F)(),o.c("design:type",G)],We.prototype,"form",void 0),o.a([Object(s.F)(),o.c("design:type",String)],We.prototype,"label",void 0),We=o.a([Object(s.n)({selector:"app-form-radio",template:o.b(i("fIZ9")).default}),o.c("design:paramtypes",[Se,W])],We);let Ke=class{constructor(e,t){this.formsService=e,this.geoDataService=t,this.formValue=new s.w,this.field={},this.value=""}ngOnInit(){this.geoDataService.activeGroupFeature.subscribe(e=>{this.value=this.formsService.getTagValue(e,this.form),this.formValue.emit({id:this.form.id,value:this.value})})}updateValue(){this.formValue.emit({id:this.form.id,value:this.value})}};Ke.ctorParameters=()=>[{type:Se},{type:W}],o.a([Object(s.R)(),o.c("design:type",s.w)],Ke.prototype,"formValue",void 0),o.a([Object(s.F)(),o.c("design:type",Object)],Ke.prototype,"field",void 0),o.a([Object(s.F)(),o.c("design:type",G)],Ke.prototype,"form",void 0),Ke=o.a([Object(s.n)({selector:"app-form-textbox",template:o.b(i("dagV")).default}),o.c("design:paramtypes",[Se,W])],Ke);let Ze=class{constructor(e,t){this.formsService=e,this.geoDataService=t,this.formValue=new s.w,this.field={},this.chosenColor="#ffffff",this.value={}}ngOnInit(){this.geoDataService.activeGroupFeature.subscribe(e=>{this.value=this.formsService.getTagValue(e,this.form),this.chosenTag=this.value.label,this.formValue.emit({id:this.form.id,value:this.value})})}updateCheckedTag(){this.value=this.form.options.find(e=>e.label===this.chosenTag),this.formValue.emit({id:this.form.id,value:this.value})}};Ze.ctorParameters=()=>[{type:Se},{type:W}],o.a([Object(s.R)(),o.c("design:type",s.w)],Ze.prototype,"formValue",void 0),o.a([Object(s.F)(),o.c("design:type",Object)],Ze.prototype,"field",void 0),o.a([Object(s.F)(),o.c("design:type",G)],Ze.prototype,"form",void 0),o.a([Object(s.F)(),o.c("design:type",String)],Ze.prototype,"color",void 0),o.a([Object(s.F)(),o.c("design:type",String)],Ze.prototype,"label",void 0),Ze=o.a([Object(s.n)({selector:"app-form-color",template:o.b(i("m/u+")).default,styles:[o.b(i("FN4D")).default]}),o.c("design:paramtypes",[Se,W])],Ze);var Xe=i("igqZ");let qe=class{};qe=o.a([Object(s.K)({declarations:[Q,oe,I,K,je,Z,ge,Ge,De,Ce,_e,Ee,Me,Ae,Re,ve,we,ze.a,be,$e,Je,Be,He,We,Ke,ye,Ze],imports:[k.a.forRoot({rootUrl:"https://agave.designsafe-ci.org/"}),r.a,Y,l.c,a.b,p.a,u.a,F.a,j.a.forRoot(),d.d.forRoot(),h.a,g.a,m.a,f.c,b.a,v.a,x.a,w.a,S.a,y.a,d.a.forRoot(),fe.j,fe.e,O.a,d.b.forRoot(),c.b,Ne.a,Ue.b,Ve.a,ce.b,Xe.a],providers:[U,{provide:l.a,multi:!0,useClass:Pe},{provide:l.a,multi:!0,useClass:Ie},{provide:c.a,useValue:M.baseHref}],bootstrap:[Q],entryComponents:[ge,be,ve,we,ye]})],qe),M.production&&Object(s.sb)(),Object(n.a)().bootstrapModule(qe).catch(e=>console.error(e))},zXfM:function(e,t,i){"use strict";i.r(t),t.default='<div class="tag-forms">\n  <div class="subitem-title" (click)="expandPanel()">\n    <span>\n      Tag Images\n    </span>\n    <span>\n      <span style="cursor: pointer"\n            (click)="showTagGenerator()"\n            matTooltip="Add New Tag Form"\n            style="cursor: pointer; margin-right: 10px"\n            matTooltipPosition="above">\n        <i class="fas fa-plus"></i>\n      </span>\n    </span>\n  </div> \x3c!-- subitem-title --\x3e\n\n  <div *ngIf="showSubitem" class="subitem">\n    <div class="subitem-scroll">\n\n      <div *ngFor = "let form of formList">\n        <div class="form-item-container">  \n          <div class="name-group"> {{form.label}} ({{form.type}})</div>\n          <div class="button-group">\n            <div (click)="deleteForm(form)">\n              <i class="fas fa-minus"\n                 matTooltip="Delete"\n                 matTooltipPosition="above"\n                 style="cursor: pointer">\n              </i>\n            </div> \x3c!-- delete button --\x3e\n\n            <div (click)="openRenameOptionModal(renameFormItemModal)">\n              <i class="fas fa-edit"\n                 matTooltip="Rename"\n                 matTooltipPosition="above"\n                 style="cursor: pointer">\n              </i>\n            </div>\n\n            <ng-template #renameFormItemModal>\n              <input matInput #formItemRename\n                     [(ngModel)]="newTagValue"\n                     value={{form.label}}\n                     placeholder="Rename Form Item"\n                     (keyup.enter)="renameForm(form)">\n              <br/>\n              <br/>\n              <div class="button-group">\n                <button matDialogClose\n                        mat-raised-button\n                        color="primary" (click)="renameForm(form.label)"\n                        >Rename</button>\n                <button matDialogClose\n                        mat-button>Cancel</button>\n              </div> \n            </ng-template> \x3c!-- rename modal --\x3e\n\n          </div> \x3c!-- button group --\x3e\n        </div> \x3c!-- form-item-container --\x3e\n        <app-form-generator (newValue)="setValue($event)" [form]="form"></app-form-generator>\n\n      </div>\n      <div *ngIf="formList && formList.length"><button mat-raised-button color="primary" (click)="saveTags()">Save</button></div>\n    </div> \x3c!-- subitem scroll --\x3e\n  </div> \x3c!--subitem --\x3e\n</div> \x3c!-- tag-forms --\x3e\n'},zusP:function(e,t,i){"use strict";i.r(t),t.default='<div>\n  <div [ngSwitch]="form.type" class="form-controls">\n\t<ng-container *ngSwitchCase="\'text\'">\n\t  \t<app-form-textbox (formValue)="setValue($event)" [field]="form.options" [form]="form"></app-form-textbox>\n\t</ng-container>\n\n\t<ng-container *ngSwitchCase="\'dropdown\'">\n\t  \t<app-form-dropdown (formValue)="setValue($event)" [field]="form.options" [form]="form"></app-form-dropdown>\n\t</ng-container>\n\n\t<ng-container *ngSwitchCase="\'radio\'">\n      <app-form-radio (formValue)="setValue($event)" [field]="opt" [form]="form" label={{form.label}}></app-form-radio>\n    </ng-container>\n\n    <ng-container *ngSwitchCase="\'checkbox\'">\n      <app-form-checkbox (formValue)="setValue($event)" [form]="form"></app-form-checkbox>\n\t</ng-container>\n\n    <ng-container *ngSwitchCase="\'color\'">\n      <app-form-color (formValue)="setValue($event)" [field]="opt" [form]="form" label={{form.label}} [color]="colorArray[form.options.indexOf(opt)]"></app-form-color>\n    </ng-container>\n\n  </div>\n</div>\n'}},[[0,0,5]]]);
//# sourceMappingURL=main-es2015.8d99adc4ec6b7ad364fc.js.map