function _createForOfIteratorHelper(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return r=e.done,e},e:function(e){s=!0,a=e},f:function(){try{r||null==n.return||n.return()}finally{if(s)throw a}}}}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,o,a=[],r=!0,s=!1;try{for(n=n.call(e);!(r=(i=n.next()).done)&&(a.push(i.value),!t||a.length!==t);r=!0);}catch(l){s=!0,o=l}finally{try{r||null==n.return||n.return()}finally{if(s)throw o}}return a}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"/WLi":function(e,t,n){"use strict";n.r(t),t.default='<div>\n  <select\n    class="form-control"\n    [(ngModel)]="value"\n    id="field.name"\n    name="field.name"\n    (change)="updateCheckedTag()"\n  >\n    <option *ngFor="let opt of field" [value]="opt.label">\n      {{ opt.label }}\n    </option>\n  </select>\n</div>\n'},0:function(e,t,n){e.exports=n("zUnb")},"033P":function(e,t,n){"use strict";n.r(t),t.default='<div class="asset-list">\n  <div class="subitem-title" (click)="expandPanel()">Image List</div>\n\n  <div *ngIf="showSubitem" class="subitem asset-subitem">\n    <div\n      *ngFor="let feature of getActiveFeatures()"\n      (click)="jumpToImage(feature)"\n      class="asset-container"\n      [ngClass]="{ highlight: isActiveFeature(feature) }"\n    >\n      <div class="name-group">\n        {{ getFeaturePath(feature) }}\n      </div>\n\n      <div class="button-group">\n        <div (click)="deleteFeature(feature)">\n          <i\n            class="fas fa-minus"\n            matTooltip="Delete"\n            matTooltipPosition="above"\n          >\n          </i>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n'},"0NOL":function(e,t,n){"use strict";n.r(t),t.default='<h4>Select Files</h4>\n<small\n  ><em>\n    Note: Only files are selectable, not folders. Double click on a folder to\n    navigate into it.\n  </em></small\n>\n<hr />\n<select (ngModelChange)="selectSystem($event)" [(ngModel)]="selectedSystem">\n  <option [ngValue]="myDataSystem">My Data</option>\n  <option [ngValue]="communityDataSystem">Community Data</option>\n  <option [ngValue]="publishedDataSystem">Published Data</option>\n  <optgroup label="My Projects">\n    <option *ngFor="let project of projects" [ngValue]="project">\n      {{ project.description }}\n    </option>\n  </optgroup>\n</select>\n\n<div\n  class="fileslisting"\n  infiniteScroll\n  [infiniteScrollDistance]="2"\n  [infiniteScrollThrottle]="100"\n  [scrollWindow]="false"\n  (scrolled)="getFiles()"\n>\n  <div class="clickable" class="grid-x file-row" (dblclick)="toRoot()">\n    <i class="fas fa-folder"></i>\n    <span> Home </span>\n  </div>\n  <div class="clickable" class="grid-x file-row">\n    <i class="fas fa-folder-open"></i>\n    <span class="lineBreak"> {{ selectedPath }} </span>\n  </div>\n  <div *ngIf="retrievalError" class="grid-x file-row" class="error">\n    Error retrieving files\n  </div>\n  <div\n    class="grid-x file-row"\n    *ngFor="let file of filesList; let fileIndex = index"\n    [ngClass]="{ selected: selectedFiles.has(file.path) }"\n  >\n    <div\n      class="clickable"\n      (click)="select($event, file, fileIndex)"\n      (dblclick)="browse(file)"\n    >\n      <i class="fas fa-folder" *ngIf="file.type === \'dir\'"></i>\n      <i class="far fa-file" *ngIf="file.type !== \'dir\'"></i>\n      <span> {{ file.name }} </span>\n    </div>\n    <div class="size">\n      {{ file.length | filesize }}\n    </div>\n  </div>\n  <div class="grid-x" *ngIf="inProgress">\n    <div class="cell medium-12">\n      <i class="fas fa-spin fa-atom"></i>\n    </div>\n  </div>\n</div>\n\n<div class="button-group">\n  <button mat-raised-button color="basic" (click)="selectAll()">\n    Select all\n  </button>\n  <button\n    mat-raised-button\n    color="warn"\n    class="button warning"\n    (click)="cancel()"\n  >\n    Done\n  </button>\n  <button\n    mat-raised-button\n    color="primary"\n    class="button"\n    [disabled]="!selectedFiles.size"\n    (click)="chooseFiles()"\n  >\n    Import\n  </button>\n</div>\n'},"1NWJ":function(e,t,n){"use strict";n.r(t),t.default=":host .drop-container {\n  background: #fff;\n  border-radius: 6px;\n  height: 150px;\n  width: 100%;\n  box-shadow: 1px 2px 20px rgba(10, 10, 10, 0.1);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border: 2px dashed #c0c4c7;\n}\n:host p {\n  font-size: 16px;\n  font-weight: 400;\n  color: #c0c4c7;\n}\n:host .upload-button {\n  display: inline-block;\n  border: none;\n  outline: none;\n  cursor: pointer;\n  color: #5754a3;\n}\n:host .upload-button input {\n  display: none;\n}\n:host .dropzone {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-direction: column;\n  border-radius: 5px;\n  background: white;\n  margin: 10px 0;\n}\n:host .dropzone.hovering {\n  border: 2px solid #f16624;\n  color: #dadada !important;\n}\n:host progress::-webkit-progress-value {\n  transition: width 0.1s ease;\n}"},"503e":function(e,t,n){"use strict";n.r(t),t.default='<div [formGroup]="form">\n  <div\n    *ngIf="!field.value"\n    class="drop-container dropzone"\n    dropZone\n    (hovered)="toggleHover($event)"\n    (dropped)="field.onUpload($event)"\n    [class.hovering]="isHovering"\n  >\n    <p class="m-0">\n      Drag a file here or\n      <label class="upload-button">\n        <input\n          type="file"\n          multiple=""\n          (change)="field.onUpload($event.target.files)"\n        />\n        browse\n      </label>\n      to upload.\n    </p>\n  </div>\n  <div *ngIf="field.value">\n    \x3c!-- <button type="button" class="btn btn-primary">Change</button> --\x3e\n    <div class="card">\n      <img class="card-img-top" [src]="field.value" />\n    </div>\n  </div>\n</div>\n'},"6CRC":function(e,t,n){"use strict";n.r(t),t.default=""},"7E2L":function(e,t,n){"use strict";n.r(t),t.default='<h4>Select Files</h4>\n<small\n  ><em>\n    If no folder is selected, the file will be saved in the root of your\n    selected system.\n  </em></small\n>\n<hr />\n<select (ngModelChange)="selectSystem($event)" [(ngModel)]="selectedSystem">\n  <option [ngValue]="myDataSystem">My Data</option>\n  <option [ngValue]="communityDataSystem">Community Data</option>\n  <option [ngValue]="publishedDataSystem">Published Data</option>\n  <optgroup label="My Galleries">\n    <option *ngFor="let project of projects" [ngValue]="project">\n      {{ project.description }}\n    </option>\n  </optgroup>\n</select>\n<div\n  class="fileslisting"\n  infiniteScroll\n  [infiniteScrollDistance]="2"\n  [infiniteScrollThrottle]="100"\n  [scrollWindow]="false"\n  (scrolled)="getFiles()"\n>\n  <div\n    class="grid-x file-row"\n    *ngFor="let file of filesList"\n    [ngClass]="{ selected: selectedFiles.has(file.path) }"\n  >\n    <div class="clickable" (dblclick)="browse(file)">\n      <i class="fas fa-folder" *ngIf="file.type === \'dir\'"></i>\n      <i class="far fa-file" *ngIf="file.type !== \'dir\'"></i>\n      <span> {{ file.name }} </span>\n    </div>\n    <div class="size">\n      {{ file.length | filesize }}\n    </div>\n  </div>\n  <div class="grid-x" *ngIf="inProgress">\n    <div class="cell medium-12">\n      <i class="fas fa-spin fa-atom"></i>\n    </div>\n  </div>\n</div>\n\n<form\n  [formGroup]="downloadSelectForm"\n  (ngSubmit)="update()"\n  id="current-project-form"\n>\n  <div>\n    <small\n      ><em>\n        If no filename is specified, it will default to the Gallery ID number.\n      </em></small\n    >\n  </div>\n\n  <mat-form-field>\n    <input\n      matInput\n      type="text"\n      formControlName="Name"\n      appearance="filled"\n      required="false"\n    />\n  </mat-form-field>\n</form>\n<span class="radio-box">\n  <mat-radio-group [(ngModel)]="fileExtension">\n    <mat-radio-button value=".csv">.csv</mat-radio-button>\n    <mat-radio-button value=".json">.json</mat-radio-button>\n  </mat-radio-group>\n</span>\n\n<div class="button-group">\n  <button\n    mat-raised-button\n    color="warn"\n    class="button warning"\n    (click)="cancel()"\n  >\n    Cancel\n  </button>\n  <button\n    mat-raised-button\n    color="primary"\n    class="button"\n    (click)="chooseFiles()"\n  >\n    Save\n  </button>\n</div>\n'},"8lyn":function(e,t,n){"use strict";n.r(t),t.default=":host .top-bar {\n  height: 40px;\n  padding: 5px;\n  padding-left: 0.5em;\n  flex-wrap: nowrap;\n  position: fixed;\n  overflow: hidden;\n  width: 100%;\n  z-index: 999;\n}\n:host .top-bar-right .top-bar-left {\n  -webkit-box-flex: 0;\n  flex-wrap: nowrap;\n  flex: 0 1 auto;\n  max-width: 100%;\n}\n@media print, screen and (min-width: 40em) {\n  :host .top-bar {\n    flex-wrap: nowrap;\n    flex: 0 1 auto;\n  }\n}"},AZwa:function(e,t,n){"use strict";n.r(t),t.default='\x3c!-- <div class="grid-x"> --\x3e\n\n\x3c!--   <div class="top-bar" style="background-color: black" id="navbar"> --\x3e\n\n\x3c!--\t<div class="top-bar-left"> --\x3e\n\x3c!--\t  <img src="assets/logo.svg" width="30PX"> --\x3e\n\x3c!--\t  <span style="color: white">Taggit</span> --\x3e\n\x3c!--\t</div> --\x3e\n\n\x3c!--\t<div class="top-bar-right"> --\x3e\n\x3c!--\t  <div class="light-blue" *ngIf="currentUser">{{ currentUser.username }}</div> --\x3e\n\x3c!--\t</div> --\x3e\n\n\x3c!--   </div> --\x3e\n\n\x3c!--   <\\!-- <div class="cell control-bar"> -\\-> --\x3e\n\x3c!--   <\\!--\t<app-control-bar></app-control-bar> -\\-> --\x3e\n\x3c!--   <\\!-- </div> -\\-> --\x3e\n\x3c!-- </div> --\x3e\n\n<app-control-bar></app-control-bar>\n\x3c!-- NOTE Router Outlet was here --\x3e\n<app-image-gallery></app-image-gallery>\n\n\x3c!-- NOTE Leaflet was here --\x3e\n'},Af46:function(e,t,n){"use strict";n.r(t),t.default="<p>notfound works!</p>\n"},"Ag+R":function(e,t,n){"use strict";n.r(t),t.default=":host {\n  min-height: 20em;\n}\n:host .fileslisting {\n  height: 20em;\n  overflow-y: scroll;\n  padding: 0px 20px;\n}\n:host .file-row {\n  display: flex;\n  background: #f9f9f9;\n  border: 1px solid transparent;\n  user-select: none;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n}\n:host .clickable {\n  flex: 1;\n  max-width: 20em;\n}\n:host .size {\n  align-items: flex-end;\n}\n:host .file-row:hover {\n  border: 1px solid;\n}\n:host .file-row.selected {\n  background: #d3d3d3;\n}\n:host .mat-radio-button ~ .mat-radio-button {\n  margin-left: 16px;\n}\n:host .radio-box {\n  position: relative;\n  bottom: 45px;\n  left: 45%;\n}"},FN4D:function(e,t,n){"use strict";n.r(t),t.default=""},I57P:function(e,t,n){"use strict";n.r(t),t.default=':host {\n  overflow-y: scroll;\n}\n:host .select-group {\n  overflow: hidden;\n  max-height: 20%;\n}\n:host .subitem-title {\n  text-align: left;\n  color: #555;\n  font-size: 14px;\n  padding: 10px;\n  background-color: #f1f1f1;\n  display: flex;\n  justify-content: space-between;\n}\n:host .subitem {\n  border-width: 0px 10px;\n  border-color: #f1f1f1;\n  border-style: solid;\n  overflow-y: scroll;\n  background-color: #ffffff;\n  height: 100%;\n}\n:host .group-subitem {\n  height: 100px;\n}\n:host .subitem-scroll {\n  border-width: 5px;\n}\n:host .boxed input[type=radio] {\n  display: none;\n}\n:host .boxed label {\n  background-color: #fff;\n  transition: all 0.3s;\n}\n:host .boxed input[type=radio]:checked + label {\n  background-color: #b3e5ff;\n}\n:host .group-container {\n  display: flex;\n  flex-direction: row;\n  margin: 0;\n  justify-content: space-between;\n}\n:host .name-group {\n  display: inline-block;\n  padding: 3px;\n}\n:host .button-group {\n  margin: 0;\n  display: flex;\n  flex-direction: row;\n}\n:host .button-group div {\n  padding: 3px;\n}\n:host .fa {\n  font-weight: 900;\n  display: inline-block;\n  font-style: normal;\n  font-variant: normal;\n  text-rendering: auto;\n  font-family: "FontAwesome";\n  line-height: 1;\n}\n:host .fa option {\n  font-weight: 900;\n}'},IElf:function(e,t,n){"use strict";n.r(t),t.default=":host {\n  background-color: #f1f1f1;\n}"},MHpZ:function(e,t,n){"use strict";n.r(t),t.default='<div class="create-prompt">\n  <div class="subitem-title" (click)="expandPanel()">\n    <span> Create Tag </span>\n  </div>\n  \x3c!-- subitem-title --\x3e\n\n  <div *ngIf="showSubitem" class="subitem">\n    <form class="form-type-form">\n      <div\n        *ngFor="let control of enabledControls; let idx = index"\n        class="box form"\n      >\n        <input\n          type="radio"\n          [id]="control"\n          value="control.toLowerCase()"\n          name="form-type"\n          [checked]="idx === 0"\n          (change)="selectInputForm(control.toLowerCase())"\n        />\n        <label\n          style="cursor: pointer; margin: 3px; padding: 3px; font-size: 10px"\n          [for]="control"\n          >{{ control }}</label\n        >\n      </div>\n      \x3c!-- form-type-form --\x3e\n    </form>\n\n    <div class="form-name">\n      <mat-form-field class="input-label-group">\n        <mat-label>Label</mat-label>\n        <input\n          matInput\n          placeholder="Label"\n          #labelValue\n          [(ngModel)]="labelFilter"\n          (keyup)="inputFormLabel($event)"\n          name="labelFilter"\n          class="tiny"\n          type="text"\n        />\n      </mat-form-field>\n\n      <ng-container *ngIf="formType != \'text\'">\n        <ng-container *ngIf="formType == \'color\'">\n          <mat-form-field class="input-label-group">\n            <mat-label>Option Color</mat-label>\n            <input\n              matInput\n              #optionColorValue\n              placeholder="Option Color"\n              #labelValue\n              [(ngModel)]="optionColorFilter"\n              (change)="inputFormColor($event)"\n              name="optionColorilter"\n              class="tiny"\n              type="color"\n            />\n          </mat-form-field>\n        </ng-container>\n\n        <mat-form-field class="input-label-group">\n          <mat-label>Options</mat-label>\n          <div class="input-group">\n            <input\n              matInput\n              #optionValue\n              class="input-group-field"\n              placeholder="Option"\n              type="text"\n              [(ngModel)]="optionFilter"\n              name="optionFilter"\n              (keyup.enter)="\n                addOptionItem(optionValue.value);\n                optionValue.value = \'\';\n                optionColorValue.value = \'\';\n                clearOption();\n                clearOptionColor()\n              "\n            />\n          </div>\n          \x3c!-- input-group --\x3e\n        </mat-form-field>\n\n        <div class="input-group-button">\n          <button\n            mat-button\n            color="accent"\n            class="button"\n            (click)="\n              addOptionItem(optionValue.value);\n              optionValue.value = \'\';\n              clearOption()\n            "\n          >\n            <i class="fas fa-plus"></i>\n          </button>\n        </div>\n        \x3c!-- input-group-button --\x3e\n\n        <ul class="form-option-container">\n          <li *ngFor="let opt of formOptions" class="list-group">\n            <div>\n              {{ opt.label }}\n              <ng-container *ngIf="formType == \'color\'">\n                <svg class="box" width="10px" height="10px">\n                  <rect width="10px" height="10px" style="fill: #ffffff" />\n                  <rect\n                    width="8px"\n                    height="8px"\n                    x="1px"\n                    y="1px"\n                    [style.fill]="opt.color"\n                  />\n                </svg>\n              </ng-container>\n            </div>\n            \x3c!-- showopt --\x3e\n            <div class="button-group">\n              <div (click)="deleteOption(opt)">\n                <i\n                  class="fas fa-minus"\n                  matTooltip="Delete"\n                  matTooltipPosition="above"\n                  style="cursor: pointer"\n                >\n                </i>\n              </div>\n              \x3c!-- delete opt --\x3e\n\n              <div (click)="openRenameOptionModal(renameOptionModal)">\n                <i\n                  class="fas fa-edit"\n                  style="cursor: pointer"\n                  matTooltip="Rename"\n                  matTooltipPosition="above"\n                >\n                </i>\n              </div>\n\n              <ng-template #renameOptionModal>\n                <input matInput #optionRename placeholder="Rename Option" />\n                <br />\n                <br />\n                <div class="button-group">\n                  <button\n                    matDialogClose\n                    mat-raised-button\n                    color="primary"\n                    (click)="renameOption(opt, optionRename.value)"\n                  >\n                    Rename\n                  </button>\n                  <button matDialogClose mat-button>Cancel</button>\n                </div>\n              </ng-template>\n            </div>\n            \x3c!-- button group --\x3e\n          </li>\n        </ul>\n      </ng-container>\n    </div>\n    \x3c!-- form-name --\x3e\n\n    <button mat-raised-button color="primary" (click)="addFormItem()">\n      Save\n    </button>\n    <button mat-button color="primary" (click)="cancelCreate()">Cancel</button>\n  </div>\n  \x3c!-- subitem --\x3e\n</div>\n\x3c!-- create-group --\x3e\n'},N3QO:function(e,t,n){"use strict";n.r(t),t.default=":host .img-list-container {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));\n  grid-gap: 1em;\n  height: 100%;\n  padding: 1em;\n}\n:host #no-img {\n  font-size: 32px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 70vh;\n}\n:host #no-proj {\n  font-size: 32px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 70vh;\n}\n:host #new-proj {\n  font-size: 32px;\n  display: flex;\n  height: 100vh;\n  justify-content: center;\n  align-items: center;\n}\n:host app-image-box {\n  height: 100%;\n}\n:host .masonry-item {\n  width: 200px;\n}\n:host img-spin {\n  position: relative;\n  bottom: 0px;\n  left: 0px;\n  width: 100%;\n  height: 100px;\n  background: #fff;\n}\n:host load-spin {\n  position: relative;\n  width: 100%;\n  height: 100px;\n  background: #fff;\n}\n:host .side-bar-container {\n  background-color: #f1f1f1;\n  position: fixed;\n  width: 25%;\n  margin-right: 0px;\n  height: calc(100vh - 50px);\n  right: 0;\n}\n:host .success {\n  margin-right: 20%;\n}\n:host .danger {\n  margin-right: 0%;\n}\n:host #gallery-container-container {\n  position: relative;\n  width: 100%;\n  height: auto;\n  text-align: center;\n  display: flex;\n  flex-direction: column;\n  margin-top: 0px;\n}\n:host #loading-load {\n  position: relative;\n  width: 100%;\n  height: auto;\n  text-align: center;\n  flex-direction: column;\n  margin-top: 50px;\n}\n:host #gallery-container {\n  position: relative;\n  width: 100%;\n  height: auto;\n  text-align: center;\n  display: flex;\n  flex-direction: column;\n}\n:host #gallery-container .gallery-image {\n  height: 100%;\n  display: inline-flex;\n  justify-content: center;\n  align-items: center;\n}\n:host #gallery-container .gallery-image img {\n  max-width: 100%;\n  max-height: 100%;\n  margin: 0 auto;\n}\n:host .imager {\n  width: 75%;\n  height: calc(100vh - 50px);\n  background-color: #fefefe;\n}\n:host .view-image {\n  max-width: 100%;\n  height: auto;\n}\n:host .gallery-btn {\n  width: 35px;\n  height: 35px;\n  background: #000;\n  color: #fff;\n  text-align: center;\n  line-height: 35px;\n  cursor: pointer;\n  transition: all 0.4s ease;\n  font-size: 20px;\n  box-sizing: border-box;\n  padding-left: 2px;\n  position: fixed;\n  bottom: 10px;\n}\n:host .gallery-btn:hover {\n  background: #222;\n}\n:host .gallery-close {\n  top: 10px;\n}\n:host .gallery-close .gallery-next {\n  right: 10px;\n}\n:host .gallery-prev {\n  right: 50px;\n}\n:host .gallery-prev .gallery-next {\n  bottom: 10px;\n}\n@media (min-width: 478px) {\n  :host .img-list-container img:nth-child(3n):not(last-of-type) {\n    grid-row-end: span 2;\n  }\n}\n@media (max-width: 768px) {\n  :host .img-list-container {\n    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));\n  }\n}\n@media (max-width: 450px) {\n  :host .img-list-container {\n    grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));\n  }\n}"},P1jy:function(e,t,n){"use strict";n.r(t),t.default='<h4>Share this project</h4>\n<small\n  ><em>\n    People you share your project with will have full ability to edit and delete\n    this project on Taggit and on HazMapper.\n  </em></small\n>\n\n<form [formGroup]="projShareForm" (ngSubmit)="submit()" id="share-project-form">\n  <mat-form-field>\n    <mat-label>Username:</mat-label>\n    <input matInput type="text" formControlName="name" required="true" />\n  </mat-form-field>\n\n  <div class="button-group small">\n    <button\n      mat-raised-button\n      color="warn"\n      class="button small warning"\n      type="button"\n      (click)="close()"\n    >\n      Close\n    </button>\n    <button\n      mat-raised-button\n      color="primary"\n      class="button small align-right"\n      type="submit"\n      [disabled]="!projShareForm.valid"\n    >\n      Add Member\n    </button>\n  </div>\n\n  <br />\n  <h5>Current Users</h5>\n  <div *ngFor="let user of projectUsers">\n    <br />\n    <mat-card class="card-container">\n      <span class="card-item">\n        {{ user.username }}\n      </span>\n      <span class="card-buttons">\n        <button\n          mat-raised-button\n          color="warn"\n          class="button small warning"\n          type="button"\n          [disabled]="onlyOne"\n          (click)="delete(user.username)"\n        >\n          <i class="fas fa-trash"></i>\n        </button>\n      </span>\n    </mat-card>\n  </div>\n</form>\n'},Pwca:function(e,t,n){"use strict";n.r(t),t.default='<div *ngIf="loaded; else loader" id="loading-load">\n  <div *ngIf="projectsExist; else noProjWarn" id="gallery-container">\n    <div *ngIf="imagesExist; else noImgWarn" id="gallery-container-container">\n      <div\n        [ngClass]="scrollStatus"\n        infiniteScroll\n        [infiniteScrollDistance]="1"\n        [infiniteScrollThrottle]="1500"\n        (scrolled)="onScroll()"\n        class="img-list-container"\n        *ngIf="!showTagger; else tagger"\n      >\n        <app-image-box *ngFor="let feat of featureListScroll" [feature]="feat">\n        </app-image-box>\n      </div>\n\n      <ngx-spinner\n        bdOpacity="0.9"\n        bdColor=""\n        size="default"\n        color="#3ADB76"\n        type="line-scale-pulse-out"\n        id="img-spin"\n        [fullScreen]="false"\n      >\n      </ngx-spinner>\n      <ng-template #tagger>\n        <div>\n          <div class="imager">\n            <img class="view-image" [src]="getPath()" />\n          </div>\n        </div>\n      </ng-template>\n      <div *ngIf="showTagger" class="side-bar-container">\n        <app-side-bar></app-side-bar>\n      </div>\n    </div>\n    <ng-template #noImgWarn>\n      <div id="no-img">\n        No images have been imported!<br />Please import images through the\n        menu.\n      </div>\n    </ng-template>\n  </div>\n\n  <ng-template #noProjWarn>\n    <div id="no-proj">\n      No project has been created!<br />Please create a project through the\n      menu.\n    </div>\n  </ng-template>\n</div>\n\n<ng-template #loader>\n  <div *ngIf="projectsExist; else createProj" id="loader">Loading...</div>\n\n  <ng-template #createProj>\n    <div id="new-proj" (click)="openCreateProjectModal()">\n      Start a new project\n    </div>\n  </ng-template>\n</ng-template>\n'},"T+fY":function(e,t,n){"use strict";n.r(t),t.default='<div class="form-group row" *ngFor="let tag of field">\n  <label class="col-md-3 form-control-label" [attr.for]="tag.label">\n    {{ field.label }}\n    <strong class="text-danger" *ngIf="tag.required">*</strong>\n  </label>\n  <div class="col-md-9" [ngSwitch]="tag.type">\n    <app-form-color\n      *ngSwitchCase="\'color\'"\n      [field]="field"\n      [form]="form"\n    ></app-form-color>\n    <app-form-textbox\n      *ngSwitchCase="\'text\'"\n      [field]="field"\n      [form]="form"\n    ></app-form-textbox>\n    <app-form-dropdown\n      *ngSwitchCase="\'dropdown\'"\n      [field]="field"\n      [form]="form"\n    ></app-form-dropdown>\n    <app-form-checkbox\n      *ngSwitchCase="\'checkbox\'"\n      [field]="field"\n      [form]="form"\n    ></app-form-checkbox>\n    <app-form-radio\n      *ngSwitchCase="\'radio\'"\n      [field]="field"\n      [form]="form"\n    ></app-form-radio>\n  </div>\n</div>\n'},T7o7:function(e,t,n){"use strict";n.r(t),t.default=":host .subitem-title {\n  text-align: left;\n  color: #555;\n  font-size: 14px;\n  padding: 10px;\n  background-color: #f1f1f1;\n  display: flex;\n  justify-content: space-between;\n}\n:host .subitem {\n  border-width: 0px 10px;\n  border-color: #f1f1f1;\n  border-style: solid;\n  overflow-y: scroll;\n  background-color: #ffffff;\n  height: 100%;\n}\n:host .subitem-scroll {\n  border-width: 5px;\n}\n:host .asset-list {\n  max-height: 20%;\n  overflow: hidden;\n}\n:host .asset-subitem {\n  height: 100px;\n}\n:host .asset-container {\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  cursor: pointer;\n}\n:host .highlight {\n  background-color: #b3e5ff;\n}\n:host .name-group {\n  display: inline-block;\n  padding: 3px;\n}\n:host .button-group {\n  margin: 0;\n  display: flex;\n  flex-direction: row;\n}\n:host .button-group div {\n  padding: 3px;\n  padding-right: 5px;\n}"},VzVu:function(e,t,n){"use strict";n.r(t),t.default="\x3c!--The content below is only a placeholder and can be replaced.--\x3e\n<router-outlet></router-outlet>\n"},X9m5:function(e,t,n){"use strict";n.r(t),t.default='<div id="callback">\n  <div>\n    <i class="fas fa-spinner"></i>\n  </div>\n</div>\n'},"ay+3":function(e,t,n){"use strict";n.r(t),t.default='<div class="img-container">\n  <img\n    [ngClass]="imageSelected"\n    [src]="featureSource"\n    (click)="imageSelect()"\n    class="img-responsive img-target"\n    title="{{ featurePath }}"\n  />\n  <div class="top-overlay">\n    <div\n      class="image-option"\n      matTooltip="Zoom"\n      matTooltipPosition="below"\n      (click)="imageZoom(diffSizes)"\n    >\n      <i class="fas fa-search-plus"></i>\n    </div>\n\n    <ng-template #diffSizes>\n      <div class="zoom-content">\n        <div class="img-container">\n          <img [src]="featureSource" title="{{ featurePath }}" />\n        </div>\n        <div class="img-details">\n          <div class="detail-container">\n            <div class="title">Coordinates</div>\n            <div class="detail-contents">\n              <div class="detail-item">{{ coordinates[0] }},</div>\n              <div class="detail-item">\n                {{ coordinates[1] }}\n              </div>\n            </div>\n          </div>\n          <div class="detail-container">\n            <div class="title">Image Source</div>\n            <div class="detail-contents">\n              <div class="detail-item">\n                {{ featurePath }}\n              </div>\n            </div>\n          </div>\n        </div>\n        <button\n          mat-button\n          class="close-button"\n          matDialogClose\n          aria-label="Close modal"\n          type="button"\n        >\n          <span aria-hidden="true">&times;</span>\n        </button>\n      </div>\n    </ng-template>\n\n    <div\n      class="image-option"\n      matTooltip="Remove"\n      matTooltipPosition="below"\n      (click)="openImageDeleteModal(deleteImage)"\n    >\n      <i class="fas fa-trash"></i>\n    </div>\n\n    <ng-template #deleteImage>\n      <div *ngIf="selectedImages.length === 1">\n        This image will be deleted from the current project. It will not be\n        deleted from the Data Depot.\n      </div>\n\n      <div *ngIf="selectedImages.length > 1">\n        {{ selectedImages.length }} images will be deleted from the current\n        project. They will not be deleted from the Data Depot.\n      </div>\n\n      <button\n        mat-raised-button\n        color="primary"\n        matDialogClose\n        (click)="imageDelete()"\n      >\n        Delete Image\n      </button>\n      <button mat-button matDialogClose>Cancel</button>\n    </ng-template>\n\n    <div\n      class="image-option"\n      matTooltip="Add To Group"\n      matTooltipPosition="below"\n      (click)="openImageAddModal(addMoreToGroup)"\n    >\n      <i class="fas fa-plus"></i>\n    </div>\n\n    <ng-template #addMoreToGroup>\n      <mat-form-field appearance="fill">\n        <mat-label>Groups</mat-label>\n        <mat-select matNativeControl required [(value)]="groupToAdd">\n          <mat-option\n            *ngFor="let group of groups | keyvalue"\n            [value]="group.value"\n          >\n            {{ group.key }}\n          </mat-option>\n        </mat-select>\n      </mat-form-field>\n\n      <p>\n        <button\n          mat-raised-button\n          color="primary"\n          matDialogClose\n          (click)="addGroup(groupToAdd)"\n          [disabled]="!groupToAdd"\n        >\n          Add To Group\n        </button>\n        <button mat-button color="secondary" matDialogClose>Cancel</button>\n      </p>\n    </ng-template>\n  </div>\n\n  <div class="bottom-overlay">\n    <div\n      *ngIf="feature.properties.group && feature.properties.group.length > 0"\n    >\n      <div\n        *ngIf="feature.properties.group.length < 5; else dotdot"\n        class="group-tags"\n      >\n        <div\n          *ngFor="let group of feature.properties.group"\n          class="center"\n          (mouseover)="(group.name)"\n          [matTooltip]="group.name"\n          matTooltipPosition="above"\n        >\n          <svg\n            class="box"\n            width="25px"\n            height="75px"\n            (click)="deleteFromGroup(feature, group)"\n          >\n            <rect\n              width="15px"\n              height="15px"\n              x="5"\n              y="30"\n              [style.fill]="group.color"\n            />\n            <rect\n              class="inner-del"\n              width="25px"\n              height="15px"\n              rx="3"\n              x="0"\n              y="0"\n              style="fill: #ffffff"\n            />\n            <rect\n              class="inner-del"\n              width="15px"\n              height="5px"\n              x="5"\n              y="5"\n              style="fill: #de6363"\n            />\n          </svg>\n        </div>\n      </div>\n\n      <ng-template #dotdot class="text">\n        <div\n          class="image-option"\n          (click)="openMoreGroupsModal(moreGroupsModal)"\n        >\n          <i class="fas fa-ellipsis-h"></i>\n        </div>\n      </ng-template>\n\n      \x3c!-- TODO Should close modal once zero groups --\x3e\n      <ng-template #moreGroupsModal>\n        <div\n          style="display: flex; justify-content: center; align-items: center"\n        >\n          <div\n            *ngFor="let group of feature.properties.group"\n            class="center-temp"\n            style="display: flex"\n            (mouseover)="(group.name)"\n            [matTooltip]="group.name"\n            matTooltipPosition="right"\n          >\n            <svg\n              style="padding: 1"\n              (click)="deleteFromGroup(feature, group)"\n              width="15px"\n              height="15px"\n            >\n              <rect width="15px" height="15px" [style.fill]="group.color" />\n              <rect\n                class="inner-del-temp"\n                width="8px"\n                height="4px"\n                x="3.3"\n                y="5.5"\n                style="fill: #000"\n              />\n            </svg>\n          </div>\n        </div>\n      </ng-template>\n    </div>\n  </div>\n</div>\n'},c6cR:function(e,t,n){"use strict";n.r(t),t.default='<app-select-group></app-select-group>\n<app-select-image></app-select-image>\n\n<app-tag-generator *ngIf="showTagGenerator; else tagImages"></app-tag-generator>\n<ng-template #tagImages>\n  <app-tag-images></app-tag-images>\n</ng-template>\n'},crnd:function(e,t){function n(e){return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}))}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id="crnd"},"dTB+":function(e,t,n){"use strict";n.r(t),t.default=":host {\n  display: block;\n  font-size: 0.8em;\n  height: calc(100vh - 50px);\n}\n:host .lat-lon-label {\n  font-size: 0.8em;\n  color: #4d4d4d;\n}\n:host .active-project {\n  background-color: #1aff8c;\n}\n:host .menu button.dropdown.button {\n  padding: 0.85em 1em;\n}\n:host .switch {\n  margin: 0;\n}\n:host .button.tiny {\n  margin: 0;\n}\n:host .create-prompt {\n  max-height: 500px;\n  height: 500px;\n}\n:host .select-group {\n  max-height: 20%;\n  height: 20%;\n}\n:host .subitem-title {\n  text-align: left;\n  color: #555;\n  font-size: 14px;\n  padding: 10px;\n  background-color: #f1f1f1;\n  display: flex;\n  justify-content: space-between;\n}\n:host .input-label-group {\n  padding: 10px;\n  display: block;\n}\n:host .input-group {\n  display: inline-block;\n}\n:host .form-name {\n  text-align: center;\n}\n:host .input-group-button {\n  display: inline-block;\n}\n:host .subitem {\n  border-width: 0px 10px;\n  border-color: #f1f1f1;\n  border-style: solid;\n  overflow-y: auto;\n  background-color: #ffffff;\n  height: 40vh;\n  padding: 20px;\n}\n:host .subitem-scroll {\n  border-width: 5px;\n}\n:host .preset-descriptions {\n  max-height: 20%;\n  height: 20%;\n}\n:host .boxed input[type=radio] {\n  display: none;\n}\n:host .boxed label {\n  background-color: #fff;\n  transition: all 0.3s;\n}\n:host .boxed input[type=radio]:checked + label {\n  background-color: #b3e5ff;\n}\n:host .group-container {\n  display: flex;\n  flex-direction: row;\n  margin: 0;\n  justify-content: space-between;\n}\n:host .button-group {\n  margin: 0;\n  display: flex;\n  flex-direction: row;\n}\n:host .form-option-container {\n  padding: 0px;\n}\n:host .list-group {\n  display: flex;\n  flex-direction: row;\n  margin: 0;\n  justify-content: space-between;\n}\n:host .list-suboptions {\n  background-color: #f0f0f0;\n}\n:host .button-group div {\n  padding: 3px;\n}\n:host .name-group {\n  display: inline-block;\n  padding: 3px;\n}\n:host .form-item-container {\n  display: flex;\n  flex-direction: row;\n  margin: 0;\n  justify-content: space-between;\n}\n:host .form-type-form {\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  margin: 5px;\n  margin-bottom: 15px;\n}\n:host .form-type-form input[type=radio] {\n  display: none;\n}\n:host .form-type-form label {\n  border-style: solid;\n  border-width: 1px;\n  border-color: #ddd;\n  transition: all 0.3s;\n}\n:host .form-type-form input[type=radio]:checked + label {\n  border-style: solid;\n  border-width: 1px;\n  border-color: #000;\n}\n:host .changed {\n  color: #f07575;\n}\n:host .unchanged {\n  color: #555555;\n}\n:host .asset-list {\n  max-height: 20%;\n  height: 20%;\n}\n:host .asset-container {\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  cursor: pointer;\n}\n:host .highlight {\n  background-color: #b3e5ff;\n}"},dagV:function(e,t,n){"use strict";n.r(t),t.default='<div>\n  <textarea\n    [id]="field.name"\n    rows="9"\n    class="form-control"\n    [placeholder]="\'notes\'"\n    [(ngModel)]="value"\n    (keyup)="updateValue()"\n  ></textarea>\n</div>\n'},dp4s:function(e,t,n){"use strict";n.r(t),t.default=":host #share-project-form {\n  display: flex;\n  flex-direction: column;\n  text-align: center;\n  padding: 5em;\n}\n\n.card-container {\n  display: flex;\n  justify-content: space-between;\n  width: 99%;\n}\n\n.card-item {\n  text-align: center;\n  align-items: center;\n}\n\n.card-buttons {\n  align-items: flex-end;\n}"},eC1z:function(e,t,n){"use strict";n.r(t),t.default='<div id="map" style="min-height: calc(100vh - 67px)"></div>\n'},fIZ9:function(e,t,n){"use strict";n.r(t),t.default='<div *ngFor="let opt of form.options" [id]="form.label" class="input-group">\n  <div class="form-check form-check">\n    <label class="form-check-label">\n      <input\n        class="form-check-input"\n        [(ngModel)]="value"\n        type="radio"\n        id="inlineCheckbox2"\n        name="{{ label }}"\n        value="{{ opt.label }}"\n        (change)="updateCheckedTag()"\n      />\n      {{ opt.label }}\n    </label>\n  </div>\n</div>\n'},fWOx:function(e,t,n){"use strict";n.r(t),t.default=":host #create-project-form {\n  display: flex;\n  flex-direction: column;\n  text-align: center;\n  padding: 5em;\n}"},if2z:function(e,t,n){"use strict";n.r(t),t.default=":host .img-container {\n  position: relative;\n}\n:host .img-container img {\n  -o-object-fit: cover;\n     object-fit: cover;\n  cursor: default;\n  width: 100%;\n  height: 100%;\n  transition: opacity 0.3s ease;\n  backface-visibility: hidden;\n  max-width: 100%;\n  max-height: 100%;\n  margin: 0 auto;\n}\n:host .top-overlay {\n  display: flex;\n  flex-direction: row;\n  transition: 0.3s ease;\n  opacity: 0;\n  position: absolute;\n  right: 10px;\n  top: 10px;\n  cursor: pointer;\n  text-align: center;\n}\n:host .bottom-overlay {\n  display: flex;\n  flex-direction: row;\n  transition: 0.3s ease;\n  opacity: 1;\n  position: absolute;\n  right: 10px;\n  bottom: 10px;\n  text-align: center;\n}\n:host .img-container:hover img {\n  opacity: 0.9;\n}\n:host .img-container:hover .top-overlay {\n  opacity: 0.9;\n}\n:host .img-container:hover .top-overlay:hover {\n  opacity: 1;\n}\n:host .image-option {\n  opacity: 0.9;\n  background-color: white;\n  display: flex;\n  color: black;\n  width: 40px;\n  height: 30px;\n  border-radius: 5px;\n  font-size: 16px;\n  margin: 3px;\n  justify-content: center;\n  align-items: center;\n}\n:host .image-option:hover {\n  opacity: 1;\n}\n:host .image-option .fas {\n  top: 5px;\n}\n:host .img-selected {\n  border: solid #0191ff;\n  border-width: 5px;\n}\n:host .img-unselected {\n  border: solid #fff;\n  border-width: 5px;\n}\n:host .group-tags {\n  opacity: 0.9;\n  background-color: white;\n  display: flex;\n  flex-direction: row;\n  width: auto;\n  height: 30px;\n  border-radius: 5px;\n  padding: 5px;\n  justify-content: center;\n  align-items: center;\n  z-index: 999;\n}\n:host .center {\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  transition: 0.3s ease;\n  align-items: center;\n}\n:host .center .inner-del {\n  opacity: 0;\n  transition: 0.3s ease;\n  cursor: pointer;\n}\n:host .center:hover .inner-del {\n  opacity: 1;\n}\n:host .box {\n  padding: 1px;\n}\n.center-temp {\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n}\n.center-temp .inner-del-temp {\n  opacity: 0;\n  transition: 0.3s ease;\n  cursor: pointer;\n}\n.center-temp:hover .inner-del-temp {\n  opacity: 0.5;\n}\n.zoom-content {\n  display: flex;\n  flex-direction: column;\n  max-height: 700px;\n}\n.zoom-content .img-container {\n  overflow-y: scroll;\n  width: 100%;\n  height: 100%;\n  background-color: #e7e7e7;\n}\n.zoom-content .img-details {\n  display: flex;\n  flex-direction: row;\n  margin-top: 24px;\n  background-color: #e7e7e7;\n  align-items: center;\n  text-align: center;\n}\n.zoom-content .title {\n  background-color: #ccc;\n  padding: 5px;\n}\n.zoom-content .detail-container {\n  display: flex;\n  flex-grow: 1;\n  flex-direction: column;\n  padding: 5px;\n}\n.zoom-content .detail-contents {\n  display: flex;\n  flex-direction: row;\n  padding: 5px;\n  background-color: #fff;\n}\n.zoom-content .detail-item {\n  padding: 5px;\n}"},ld75:function(e,t,n){"use strict";n.r(t),t.default=":host {\n  text-align: left;\n}\n:host .mat-form-field {\n  width: 100%;\n  text-align: left;\n}\n:host .input-group {\n  padding: 5px;\n}\n:host label {\n  padding: 5px;\n}\n:host input {\n  padding: 5px;\n  vertical-align: middle;\n}\n:host .radio-group {\n  display: flex;\n  flex-direction: column;\n}\n:host .form-controls {\n  padding: 20px;\n}"},"m/u+":function(e,t,n){"use strict";n.r(t),t.default='<div *ngFor="let opt of form.options" [id]="form.label" class="input-group">\n  <div class="form-check form-check">\n    <label class="form-check-label">\n      <input\n        class="form-check-input"\n        [(ngModel)]="chosenTag"\n        type="radio"\n        id="inlineCheckbox3"\n        name="{{ label }}"\n        value="{{ opt.label }}"\n        (change)="updateCheckedTag()"\n      />\n      {{ opt.label }}\n\n      <svg class="box" width="10px" height="10px">\n        <rect width="10px" height="10px" style="fill: #ffffff" />\n        <rect\n          width="8px"\n          height="8px"\n          x="1px"\n          y="1px"\n          [style.fill]="opt.color"\n        />\n      </svg>\n    </label>\n  </div>\n</div>\n'},moaK:function(e,t,n){"use strict";n.r(t),t.default='<h4>Current Gallery</h4>\n<form\n  [formGroup]="projCreateForm"\n  (ngSubmit)="update()"\n  id="current-project-form"\n>\n  <mat-form-field>\n    <mat-label>Name:</mat-label>\n    <input\n      matInput\n      type="text"\n      formControlName="name"\n      appearance="filled"\n      required="true"\n    />\n  </mat-form-field>\n\n  <mat-form-field>\n    <mat-label>Description</mat-label>\n    <textarea matInput formControlName="description" required="true"></textarea>\n  </mat-form-field>\n\n  <div class="button-group small">\n    <button\n      mat-raised-button\n      color="basic"\n      class="button small warning"\n      type="button"\n      (click)="close()"\n    >\n      Close\n    </button>\n    <button\n      *ngIf="activeProject.deletable"\n      mat-raised-button\n      color="warn"\n      class="button small warning"\n      type="delete"\n      (click)="delete()"\n    >\n      Delete\n    </button>\n    <button\n      mat-raised-button\n      color="primary"\n      class="button small align-right"\n      type="submit"\n      [disabled]="!projCreateForm.valid"\n    >\n      Update\n    </button>\n  </div>\n</form>\n'},nOsy:function(e,t,n){"use strict";n.r(t),t.default='<h4>Create a new Gallery</h4>\n<form\n  [formGroup]="projCreateForm"\n  (ngSubmit)="submit()"\n  id="create-project-form"\n>\n  <mat-form-field>\n    <mat-label>Name:</mat-label>\n    <input matInput type="text" formControlName="name" required="true" />\n  </mat-form-field>\n\n  <mat-form-field>\n    <mat-label>Description</mat-label>\n    <textarea matInput formControlName="description" required="true"></textarea>\n  </mat-form-field>\n\n  <div class="button-group small">\n    <button\n      mat-raised-button\n      color="warn"\n      class="button small warning"\n      type="button"\n      (click)="close()"\n    >\n      Close\n    </button>\n    <button\n      mat-raised-button\n      color="primary"\n      class="button small align-right"\n      type="submit"\n      [disabled]="!projCreateForm.valid"\n    >\n      Submit\n    </button>\n  </div>\n</form>\n'},obZR:function(e,t,n){"use strict";n.r(t),t.default=""},qk7I:function(e,t,n){"use strict";n.r(t),t.default=":host {\n  font-size: 0.8em;\n  display: block;\n}\n:host .subitem-title {\n  text-align: left;\n  display: flex;\n  justify-content: space-between;\n  color: #555;\n  font-size: 14px;\n  padding: 10px;\n  background-color: #f1f1f1;\n}\n:host .subitem {\n  border-width: 0px 10px;\n  border-color: #f1f1f1;\n  border-style: solid;\n  padding: 10px;\n  overflow-y: auto;\n  background-color: #ffffff;\n  height: 40vh;\n}\n:host .main-form-container {\n  padding: 10px;\n}\n:host .subitem-scroll {\n  padding: 10px;\n}\n:host .subitem-scroll {\n  border-width: 5px;\n}\n:host .highlight {\n  background-color: #b3e5ff;\n}\n:host .boxed input[type=radio] {\n  display: none;\n}\n:host .boxed label {\n  background-color: #fff;\n  transition: all 0.3s;\n}\n:host .boxed input[type=radio]:checked + label {\n  background-color: #b3e5ff;\n}\n:host .group-container {\n  display: flex;\n  flex-direction: row;\n  margin: 0;\n  justify-content: space-between;\n}\n:host .select-group {\n  max-height: 20%;\n  height: 20%;\n}\n:host .tag-forms {\n  height: 500px;\n}\n:host .asset-list {\n  max-height: 20%;\n  height: 20%;\n}\n:host .asset-container {\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  cursor: pointer;\n}\n:host .preset-descriptions {\n  max-height: 20%;\n  height: 20%;\n}\n:host .form-item-container {\n  display: flex;\n  flex-direction: row;\n  margin: 0;\n  justify-content: space-between;\n}\n:host .button-group {\n  display: flex;\n  flex-direction: row;\n  margin: 0;\n}\n:host .button-group div {\n  padding: 3px;\n}\n:host .name-group {\n  padding: 3px;\n  font-size: 17px;\n  font-weight: bold;\n}\n:host .list-group {\n  display: flex;\n  flex-direction: row;\n  margin: 0;\n  justify-content: space-between;\n}\n:host .list-suboptions {\n  background-color: #f0f0f0;\n}"},s9wi:function(e,t,n){"use strict";n.r(t),t.default='<div class="select-group">\n  <div class="subitem-title" (click)="expandPanel()">Groups</div>\n  <div *ngIf="showSubitem" class="subitem group-subitem">\n    \x3c!-- TODO redundant functionality radio is just for style --\x3e\n    <form class="boxed">\n      <div\n        *ngFor="let group of groups | keyvalue"\n        (click)="selectGroupForm(group.value)"\n        class="box form"\n      >\n        <input\n          type="radio"\n          [id]="group.key"\n          [value]="group.key"\n          name="skills"\n          [checked]="isChecked(group.key)"\n        />\n        <label\n          class="group-container"\n          style="cursor: pointer"\n          [for]="group.key"\n        >\n          <div class="name-group">\n            {{ group.key }}\n            <svg class="box" width="10px" height="10px">\n              <rect width="10px" height="10px" style="fill: #ffffff" />\n              <rect\n                width="8px"\n                height="8px"\n                x="1px"\n                y="1px"\n                [style.fill]="group.value.color"\n              />\n            </svg>\n          </div>\n          <div class="button-group">\n            <div (click)="deleteGroup(group.value)">\n              <i\n                class="fas fa-minus"\n                matTooltip="Delete"\n                matTooltipPosition="below"\n              >\n              </i>\n            </div>\n            <div (click)="openRenameModal(renameModal, group.value)">\n              <i\n                class="fas fa-edit"\n                matTooltip="Rename"\n                matTooltipPosition="below"\n              >\n              </i>\n            </div>\n            <div (click)="openIconSelection(iconModal, group.value)">\n              <span\n                class="fa {{ group.value.icon }}"\n                matTooltip="icons"\n                matTooltipPosition="below"\n              ></span>\n            </div>\n          </div>\n        </label>\n      </div>\n    </form>\n\n    <ng-template #renameModal>\n      <input\n        matInput\n        #groupRename\n        placeholder="Rename Group"\n        (keyup.enter)="renameGroup(groupRename.value)"\n      />\n      <br />\n      <br />\n      <div class="button-group">\n        <button\n          matDialogClose\n          color="primary"\n          mat-raised-button\n          (click)="renameGroup(groupRename.value)"\n        >\n          Rename\n        </button>\n        <button matDialogClose mat-button>Cancel</button>\n      </div>\n    </ng-template>\n\n    <ng-template #iconModal>\n      <div class="iconDropdown">\n        <select class="fa" [(ngModel)]="selectedIcon">\n          <option\n            class="fa"\n            *ngFor="let icon of iconList"\n            value="{{ icon.id }}"\n            [innerHTML]="icon.unicode"\n          ></option>\n        </select>\n        <br />\n        <br />\n        <div class="button-group">\n          <button\n            matDialogClose\n            color="primary"\n            mat-raised-button\n            (click)="saveIcon(selectedIcon)"\n          >\n            Save\n          </button>\n          <button matDialogClose mat-button>Cancel</button>\n        </div>\n      </div>\n    </ng-template>\n  </div>\n  \x3c!-- subitem --\x3e\n</div>\n\x3c!-- select-group --\x3e\n'},tw4j:function(e,t,n){"use strict";n.r(t),t.default=":host #current-project-form {\n  display: flex;\n  flex-direction: column;\n  text-align: center;\n  padding: 5em;\n}"},u61n:function(e,t,n){"use strict";n.r(t),t.default=""},u6lZ:function(e,t,n){"use strict";n.r(t),t.default=":host {\n  min-height: 20em;\n}\n:host .fileslisting {\n  height: 20em;\n  overflow-y: scroll;\n  padding: 0px 20px;\n}\n:host .file-row {\n  display: flex;\n  background: #f9f9f9;\n  border: 1px solid transparent;\n  user-select: none;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n}\n:host .clickable {\n  flex: 1;\n  max-width: 20em;\n}\n:host .size {\n  align-items: flex-end;\n}\n:host .file-row:hover {\n  border: 1px solid;\n}\n:host .file-row.selected {\n  background: #d3d3d3;\n}\n.error {\n  background-color: red;\n  color: white;\n}\n.lineBreak {\n  max-width: 350px;\n  word-break: break-word;\n}"},uV4w:function(e,t,n){"use strict";n.r(t),t.default=":host .active-project {\n  background-color: #1aff8c;\n}\n:host .menu button.dropdown.button {\n  padding: 0.85em 1em;\n}\n:host .button.tiny {\n  margin: 0;\n}\n:host .current-project {\n  padding: 30px;\n  font-size: 14px;\n}\n:host .goods {\n  height: 27px;\n  margin: 0px;\n  padding: 0px;\n}\n:host .toggler {\n  margin-left: 10px;\n}\n:host .picker {\n  display: inline-block;\n}\n:host .group-bar {\n  display: flex;\n  flex-direction: row;\n}\n:host .path-buttons {\n  text-align: center;\n}\n:host .project-menu {\n  margin-left: 10px;\n}\n:host .top-bar {\n  position: fixed;\n  margin-top: -50px;\n  height: 50px;\n  z-index: 999;\n}\n:host .top-bar-right .top-bar-left {\n  -webkit-box-flex: 0;\n  flex-wrap: nowrap;\n  flex: 0 1 auto;\n  max-width: 100%;\n}\n:host .my-button {\n  border-radius: 5px;\n  padding: 5px;\n}\n:host .button-spacing {\n  margin-right: 15px;\n}\n@media print, screen and (min-width: 40em) {\n  :host .top-bar {\n    flex-wrap: nowrap;\n    flex: 0 1 auto;\n  }\n}\n:host .example-spacer {\n  flex: 1 1 auto;\n}"},vlUF:function(e,t,n){"use strict";n.r(t),t.default='<mat-toolbar class="top-bar" color="primary">\n  <img src="assets/logo.svg" width="40PX" />\n  <span style="color: white">Taggit</span>\n\n  <button\n    mat-icon-button\n    [matMenuTriggerFor]="project"\n    color="foreground"\n    class="project-menu"\n  >\n    <mat-icon>menu</mat-icon>\n  </button>\n\n  <mat-menu #project="matMenu">\n    <span\n      mat-menu-item\n      *ngIf="selectedProject"\n      (click)="openProjectModal(selectedProject)"\n    >\n      Current Gallery : {{ selectedProject.name }}\n    </span>\n    <button mat-menu-item (click)="openCreateProjectModal()">\n      Create Gallery\n    </button>\n    <button mat-menu-item [matMenuTriggerFor]="projectList">\n      Select Gallery\n    </button>\n    <button mat-menu-item (click)="openFilePicker(test)">File Browser</button>\n    <button mat-menu-item [matMenuTriggerFor]="saveOptions">Save as</button>\n  </mat-menu>\n\n  <mat-menu #projectList="matMenu">\n    <button\n      mat-menu-item\n      class="clickable"\n      *ngFor="let p of projects"\n      (click)="selectProject(p)"\n      [ngClass]="{ \'active-project\': p === selectedProject }"\n    >\n      {{ p.name }}\n    </button>\n  </mat-menu>\n\n  <mat-menu #saveOptions="matMenu">\n    <button mat-menu-item (click)="saveFile(0)">CSV file</button>\n    <button mat-menu-item (click)="saveFile(1)">JSON file</button>\n    <button mat-menu-item (click)="openDownloadSelector()">\n      Export to DesignSafe\n    </button>\n  </mat-menu>\n\n  <span class="example-spacer"></span>\n\n  <div *ngIf="showTagger" class="path-buttons">\n    <div class="slides" style="line-height: 1; font-size: 12px">\n      {{ getAssetDisplay() }}\n      <div class="lr-buttons" style="margin-top: 5px">\n        <i\n          (click)="otherPath(false)"\n          style="margin-right: 10px; cursor: pointer"\n          class="fas fa-angle-left"\n        ></i>\n        <i\n          (click)="otherPath(true)"\n          style="margin-left: 10px; cursor: pointer"\n          class="fas fa-angle-right"\n        ></i>\n      </div>\n    </div>\n  </div>\n\n  <span class="example-spacer"></span>\n\n  <div class="group-bar grid-x align-right">\n    <button\n      mat-raised-button\n      class="button-spacing"\n      [disabled]="selectedImages.length === 0"\n      (click)="clearAll()"\n    >\n      Clear Selected\n    </button>\n\n    \x3c!-- A link that looks like a button, links to Hazmapper--\x3e\n    <a\n      class="button-spacing"\n      mat-raised-button\n      href="{{ hazMapperLink }}"\n      title="Open your gallery in HazMapper"\n      target="_blank"\n    >\n      <img src="assets/hazmapper-header-logo.png" width="100PX" />\n    </a>\n\n    <button\n      mat-raised-button\n      (click)="openAddGroupModal(addGroupModal)"\n      *ngIf="selectedImages.length > 0 && !showTagger"\n    >\n      Add Group\n    </button>\n\n    <ng-template #addGroupModal>\n      <mat-form-field>\n        <mat-label>Group Name</mat-label>\n        <input\n          matInput\n          placeholder="Group Name"\n          (keyup.enter)="addGroup(groupInput.value)"\n          #groupInput\n        />\n      </mat-form-field>\n\n      <div style="color: #ff0000" *ngIf="invalidNameError">Invalid Name!</div>\n      <div style="color: #ff0000" *ngIf="existingNameError">Existing Name!</div>\n      <br />\n      <br />\n      <button\n        mat-raised-button\n        color="primary"\n        (click)="addGroup(groupInput.value)"\n      >\n        Add Group\n      </button>\n      <button mat-button matDialogClose color="secondary">Cancel</button>\n    </ng-template>\n  </div>\n\n  <button\n    *ngIf="groupsExist && !showTagger"\n    mat-raised-button\n    style="margin-left: 15px"\n    (click)="toggleTagger()"\n  >\n    Taggit!\n  </button>\n\n  <button\n    *ngIf="showTagger"\n    mat-raised-button\n    style="margin-left: 15px"\n    (click)="toggleTagger()"\n  >\n    Gallery\n  </button>\n</mat-toolbar>\n'},yXUO:function(e,t,n){"use strict";n.r(t),t.default='<div *ngFor="let opt of form.options" [id]="form.label" class="input-group">\n  <div class="form-check form-check">\n    <label class="form-check-label">\n      <input\n        class="form-check-input"\n        type="checkbox"\n        [checked]="isChecked(opt)"\n        id="inlineCheckbox1"\n        value="{{ opt.label }}"\n        (change)="selected($event, opt)"\n      />\n      {{ opt.label }}\n    </label>\n  </div>\n</div>\n'},ynWL:function(e,t,n){"use strict";n.r(t),t.default=""},zUnb:function(e,t,n){"use strict";n.r(t),n("yLV6");var i=n("8Y7J"),o=n("wAiw"),a=n("mrSG"),r=n("cUpR"),s=n("omvX"),l=n("IheW"),c=n("SVse"),u=n("MNke"),p=n("7g+E"),d=n("neit"),f=n("gavF"),h=n("BzsH"),g=n("Fwaw"),m=n("s6ns"),v=n("Mz6y"),b=n("ZwOa"),y=n("Gi4r"),x=n("r0V8"),k=n("elxJ"),S=n("JjoW"),w=n("jGvI"),j=n("EApP"),F=n("vO5K"),C=n("nqmK"),_=n("iInd"),O=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}();O=a.a([Object(i.n)({selector:"app-notfound",template:a.b(n("Af46")).default,styles:[a.b(n("6CRC")).default]}),a.c("design:paramtypes",[])],O);var P,I=function e(){_classCallCheck(this,e)},T=function(){function e(){_classCallCheck(this,e),this.bbox=[],this.assetType=new Set}return _createClass(e,[{key:"updateAssetTypes",value:function(e){this.assetType.has(e)?this.assetType.delete(e):this.assetType.add(e)}},{key:"updateBBox",value:function(e){this.bbox=e}},{key:"toJson",value:function(){return{assetType:_toConsumableArray(this.assetType),bbox:this.bbox}}}]),e}(),G=function e(){_classCallCheck(this,e)},D=function e(){_classCallCheck(this,e)},A=function(){function e(t,n){_classCallCheck(this,e),this.token=t,this.expires=new Date(n)}return _createClass(e,[{key:"isExpired",value:function(){return(new Date).getTime()>this.expires.getTime()}}],[{key:"fromExpiresIn",value:function(t,n){return new e(t,new Date((new Date).getTime()+1e3*n))}}]),e}(),L=function(){function e(t){_classCallCheck(this,e),this.geometry=t.geometry,this.properties=t.properties,this.id=t.id,this.type=t.type,this.assets=t.assets,this.styles=t.styles,this.project_id=t.project_id}return _createClass(e,[{key:"initialAsset",value:function(){return this.assets[0]}},{key:"featureType",value:function(){return this.assets&&1===this.assets.length?this.initialAsset().asset_type:this.assets&&this.assets.length>1?"collection":this.assets.length?void 0:this.geometry.type}},{key:"featurePath",value:function(){var e=this.initialAsset();return e.display_path?e.display_path:e.path?e.path:this.id.toString()}},{key:"featureShortPath",value:function(){var e=_slicedToArray(this.assets,1)[0];return e.display_path?/[^/]*$/.exec(e.display_path)[0]:e.path?/[^/]*$/.exec(e.path)[0].slice(0,15)+"...":this.id.toString()}}]),e}();!function(e){e.Production="production",e.Staging="staging",e.Local="local"}(P||(P={}));var E={production:!0,apiUrl:"https://agave.designsafe-ci.org/geo/v2/",clientId:"jHXnvsmQQcmP43qlrG7ATaxFXHQa",baseHref:"/",backend:P.Production},M=n("jtHE"),R=function e(t,n){_classCallCheck(this,e),this.username=t,this.email=n},U=function(){function e(t,n){_classCallCheck(this,e),this.http=t,this.router=n,this._currentUser=new M.a(1),this.currentUser=this._currentUser.asObservable(),this.LS_TOKEN_KEY="hazmapperToken",this.LS_USER_KEY="hazmapperUser"}return _createClass(e,[{key:"login",value:function(){var e=localStorage.getItem(this.LS_TOKEN_KEY);if(e){var t=JSON.parse(e);this.userToken=new A(t.token,new Date(t.expires)),this.userToken&&!this.userToken.isExpired()||(this.logout(),this.redirectToauthenticaor()),this.getUserInfo()}else this.redirectToauthenticaor()}},{key:"redirectToauthenticaor",value:function(){var e="https://agave.designsafe-ci.org/authorize?scope=openid&client_id=".concat(E.clientId,"&response_type=token&redirect_uri=").concat(location.origin+E.baseHref+"callback","&state=").concat(Math.random().toString(36));window.location.href=e}},{key:"isLoggedIn",value:function(){return this.userToken&&!this.userToken.isExpired()}},{key:"logout",value:function(){this.userToken=null,localStorage.removeItem(this.LS_TOKEN_KEY),localStorage.removeItem(this.LS_USER_KEY)}},{key:"setToken",value:function(e,t){this.userToken=A.fromExpiresIn(e,t),localStorage.setItem(this.LS_TOKEN_KEY,JSON.stringify(this.userToken)),this.router.navigate(["/"])}},{key:"getUserInfo",value:function(){var e=this,t=localStorage.getItem(this.LS_USER_KEY),n=JSON.parse(t);null!==n?this._currentUser.next(new R(n.username,n.email)):this.http.get("https://agave.designsafe-ci.org/oauth2/userinfo?schema=openid").subscribe((function(t){var n=new R(t.name,t.email);localStorage.setItem(e.LS_USER_KEY,JSON.stringify(n)),e._currentUser.next(n)}))}}]),e}();U.ctorParameters=function(){return[{type:l.b},{type:_.b}]},U=a.a([Object(i.C)({providedIn:"root"}),a.c("design:paramtypes",[l.b,_.b])],U);var N=n("2Vo4"),V=n("IzEk"),z=n("r8II"),J=n("l5mm"),H=function(){function e(t,n,i){var o=this;_classCallCheck(this,e),this.toastr=t,this.http=n,this.authService=i,this.TIMEOUT=5e3,this._notifications=new M.a(1),this.notifications=this._notifications.asObservable(),this.authService.isLoggedIn()&&Object(J.a)(this.TIMEOUT).subscribe((function(e){o.getRecent()}))}return _createClass(e,[{key:"getRecent",value:function(){var e=this,t=E.apiUrl+"notifications/",n=new Date,i=new Date(n.getTime()-this.TIMEOUT);this.http.get(t+"?startDate="+i.toISOString()).subscribe((function(t){e._notifications.next(t),t.forEach((function(t){switch(t.status){case"success":e.showSuccessToast(t.message);break;case"error":e.showErrorToast(t.message)}}))}))}},{key:"showSuccessToast",value:function(e){this.toastr.success(e)}},{key:"showImportErrorToast",value:function(e){this.toastr.error(e+", trying alternate method")}},{key:"showErrorToast",value:function(e){this.toastr.error(e)}}]),e}();H.ctorParameters=function(){return[{type:j.b},{type:l.b},{type:U}]},H=a.a([Object(i.C)({providedIn:"root"}),a.c("design:paramtypes",[j.b,l.b,U])],H);var $=function(){function e(){_classCallCheck(this,e),this.scrollRestored=!0,this.scrollPosition=0}return _createClass(e,[{key:"setScrollRestored",value:function(e){this.scrollRestored=e}},{key:"setScrollPosition",value:function(){this.scrollPosition=document.documentElement.scrollTop}},{key:"scroll",value:function(){document.documentElement.scroll({top:this.scrollPosition}),document.documentElement.scrollTop==this.scrollPosition&&(this.scrollRestored=!1)}}]),e}();$=a.a([Object(i.C)({providedIn:"root"}),a.c("design:paramtypes",[])],$);var B=n("EcEN"),W=function(){function e(t,n,i){_classCallCheck(this,e),this.http=t,this.notificationsService=n,this.scrollService=i,this._pointClouds=new N.a(null),this.pointClouds=this._pointClouds.asObservable(),this._loaded=new N.a(null),this.loaded=this._loaded.asObservable(),this._activeGroupId=new N.a(null),this.activeGroupId=this._activeGroupId.asObservable(),this._activeGroup=new N.a(null),this.activeGroup=this._activeGroup.asObservable(),this._activeGroupFeature=new N.a(null),this.activeGroupFeature=this._activeGroupFeature.asObservable(),this._groups=new N.a(null),this.groups=this._groups.asObservable(),this._groupsFeatures=new N.a(null),this.groupsFeatures=this._groupsFeatures.asObservable(),this._features=new N.a({type:"FeatureCollection",features:[]}),this.features$=this._features.asObservable(),this._activeFeature=new N.a(null),this._mapMouseLocation=new N.a(null),this._basemap=new N.a("roads"),this._overlays=new N.a(null),this._activeOverlay=new N.a(null)}return _createClass(e,[{key:"getFeature",value:function(e,t){return this.http.get(E.apiUrl+"/projects/".concat(e,"/features/").concat(t.id,"/"))}},{key:"getFeatures",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new T,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=z.stringify(n.toJson());this.http.get(E.apiUrl+"/projects/".concat(e,"/features/?")+o).subscribe((function(e){e.features=e.features.map((function(e){return new L(e)})),t.getGroups(e.features),t._features.next(e),t._loaded.next(!0),i&&t.scrollService.setScrollRestored(!0)}))}},{key:"deleteFeature",value:function(e){var t=this;this.http.delete(E.apiUrl+"projects/".concat(e.project_id,"/features/").concat(e.id,"/")).subscribe((function(n){t.getFeatures(e.project_id,new T,!0)}))}},{key:"getPointClouds",value:function(e){var t=this;this.http.get(E.apiUrl+"/projects/".concat(e,"/point-cloud/")).subscribe((function(e){t._pointClouds.next(e)}))}},{key:"setActiveGroup",value:function(e){var t=this;if(this._activeGroup.next(e),e){var n=this._groupsFeatures.value.get(e.name);this._activeGroupFeature.value&&n.some((function(e){return t._activeGroupFeature.value.id===e.id}))||this.setActiveGroupFeature(n[0])}else this.setActiveGroupFeature(null)}},{key:"setActiveGroupFeature",value:function(e){this._activeGroupFeature.next(e)}},{key:"addFeature",value:function(e){var t=this;this.features$.pipe(Object(V.a)(1)).subscribe((function(n){n.features.push(e),t._features.next(n)}))}},{key:"addPointCloud",value:function(e,t,n){var i=this,o={description:t,conversion_parameters:n};this.http.post(E.apiUrl+"/projects/".concat(e,"/point-cloud/"),o).subscribe((function(t){i.getPointClouds(e)}),(function(e){}))}},{key:"updateFeatureProperty",value:function(e,t,n){var i=this;this.http.post(E.apiUrl+"projects/".concat(e,"/features/").concat(t,"/properties/"),n).subscribe((function(t){i.getFeatures(e)}),(function(e){}))}},{key:"updateFeatureStyle",value:function(e,t,n){this.http.post(E.apiUrl+"/projects/".concat(e,"/features/").concat(t,"/styles/"),n).subscribe((function(e){}),(function(e){}))}},{key:"deletePointCloud",value:function(e){var t=this;this.http.delete(E.apiUrl+"/projects/".concat(e.project_id,"/point-cloud/").concat(e.id,"/")).subscribe((function(n){t.getPointClouds(e.project_id)}))}},{key:"addFileToPointCloud",value:function(e,t){var n=new FormData;n.append("file",t),this.http.post(E.apiUrl+"/projects/".concat(e.project_id,"/point-cloud/").concat(e.id,"/"),n).subscribe((function(e){console.log(e)}))}},{key:"importFileFromTapis",value:function(e,t){var n=this,i=t.map((function(e){return{system:e.system,path:e.path}})),o={files:i};this.fileList=i,this.http.post(E.apiUrl+"projects/".concat(e,"/features/files/import/"),o).subscribe((function(e){n.notificationsService.showSuccessToast("Import started!")}),(function(e){n.notificationsService.showImportErrorToast("Import failed! Try again?")}))}},{key:"importImage",value:function(e,t,n){var i,o=this,a=t.id;this.fileList.forEach((function(e){e.path==n&&(i=e)}));var r={system_id:i.system,path:i.path};this.http.post(E.apiUrl+"projects/".concat(e,"/features/").concat(a,"/assets/"),r).subscribe((function(e){o.notificationsService.showSuccessToast("Import started!")}))}},{key:"uploadNewFeature",value:function(e,t,n){var i,o=this,a=t;this.http.post(E.apiUrl+"projects/".concat(e,"/features/"),a).subscribe((function(t){i=new L(t[0]),o.importImage(e,i,n)}))}},{key:"downloadGeoJSON",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new T,n=z.stringify(t.toJson()),i=document.createElement("a");this.http.get(E.apiUrl+"/projects/".concat(e,"/features/?")+n).subscribe((function(e){var t=new Blob([JSON.stringify(e)],{type:"application/json"});i.href=URL.createObjectURL(t),i.setAttribute("download","hazmapper.json"),document.body.appendChild(i),i.click(),document.body.removeChild(i)}))}},{key:"uploadFile",value:function(e,t){var n=this,i=new FormData;i.append("file",t,t.name),this.http.post(E.apiUrl+"/projects/".concat(e,"/features/files/"),i).subscribe((function(e){e.forEach((function(e){n.addFeature(new L(e))}))}),(function(e){}))}},{key:"uploadAssetFile",value:function(e,t,n){var i=this,o=new FormData;o.append("file",n,n.name),this.http.post(E.apiUrl+"/api/projects/".concat(e,"/features/").concat(t,"/assets/"),o).subscribe((function(n){var o=i._activeFeature.getValue();o&&o.id===t&&(i.activeFeature=new L(n),i.getFeatures(e))}),(function(e){}))}},{key:"getOverlays",value:function(e){var t=this;this.http.get(E.apiUrl+"/projects/".concat(e,"/overlays/")).subscribe((function(e){t._overlays.next(e)}))}},{key:"addOverlay",value:function(e,t,n,i,o,a,r){var s=this,l=new FormData;l.append("file",t),l.append("label",n),l.append("minLat",i.toFixed(6)),l.append("maxLat",o.toFixed(6)),l.append("minLon",a.toFixed(6)),l.append("maxLon",r.toFixed(6)),this.http.post(E.apiUrl+"/projects/".concat(e,"/overlays/"),l).subscribe((function(t){s.getOverlays(e)}))}},{key:"getGroups",value:function(e){var t=new Map,n=new Map;e.filter((function(e){return e.properties.group&&e.properties.group.length>0})).forEach((function(e){e.properties.group.forEach((function(i){n.set(i.name,n.has(i.name)?[].concat(_toConsumableArray(n.get(i.name)),[e]):[e]),t.set(i.name,i)}))})),this._groups.next(t),this._groupsFeatures.next(n);var i=this._activeGroup.value;i&&this.setActiveGroup(t.get(i.name))}},{key:"getGroup",value:function(e){return this._groups.value.get(e)}},{key:"getGroupFeatures",value:function(e,t){return e.filter((function(e){return e.properties.group&&e.properties.group.length&&e.properties.group.some((function(e){return e.id===t.id}))}))}},{key:"createGroup",value:function(e,t){return e.map((function(e){var n=e.properties.group?e.properties.group:[];return(n=n.filter((function(e){return e.id!==t.id}))).push(t),e.properties.group=n,e}))}},{key:"createGroupInFeature",value:function(e,t){return e.properties.group&&e.properties.group.filter((function(e){return e.name!==t.name})).push(t),e}},{key:"updateGroup",value:function(e,t){return this.getGroupFeatures(e,t).map((function(e){var n=e.properties.group.filter((function(e){return e.id!==t.id}));return n.push(t),e.properties.group=n,e}))}},{key:"deleteGroup",value:function(e,t){return this.getGroupFeatures(e,t).map((function(e){return e.properties.group=e.properties.group.filter((function(e){return e.id!==t.id})),e}))}},{key:"createNewGroup",value:function(e,t,n){var i={id:Object(B.v4)(),name:n,color:function(){for(var e="#",t=0;t<6;t++)e+="0123456789ABCDEF"[Math.floor(16*Math.random())];return e}(),icon:"fa-house-damage"};return this.createGroupFeatures(e,t,i),i}},{key:"createGroupFeatures",value:function(e,t,n){var i=this;this.createGroup(t,n).forEach((function(t){i.updateFeatureProperty(e,t.id,t.properties)}))}},{key:"deleteGroupFeatures",value:function(e,t,n){var i=this;this.deleteGroup(t,n).forEach((function(t){i.updateFeatureProperty(e,t.id,t.properties)}))}},{key:"updateGroupFeatures",value:function(e,t,n){var i=this;this.updateGroup(t,n).forEach((function(t){i.updateFeatureProperty(e,t.id,t.properties)}))}},{key:"renameGroup",value:function(e,t,n,i){var o=Object.assign({},n,{name:i});this.updateGroupFeatures(e,t,o)}},{key:"reiconGroup",value:function(e,t,n,i){var o=Object.assign({},n,{icon:i});this.updateGroupFeatures(e,t,o)}},{key:"getForms",value:function(e){return this._groups.value.get(e).forms}},{key:"overlays",get:function(){return this._overlays.asObservable()}},{key:"features",get:function(){return this._features.asObservable()}},{key:"activeFeature",get:function(){return this._activeFeature.asObservable()},set:function(e){e?e===this._activeFeature.getValue()?this._activeFeature.next(null):this._activeFeature.next(e):this._activeFeature.next(null)}},{key:"activeOverlay",get:function(){return this._activeOverlay.asObservable()},set:function(e){this._activeOverlay.next(e)}},{key:"mapMouseLocation",get:function(){return this._mapMouseLocation.asObservable()},set:function(e){this._mapMouseLocation.next(e)}},{key:"basemap",get:function(){return this._basemap.asObservable()},set:function(e){this._basemap.next(e)}}]),e}();W.ctorParameters=function(){return[{type:l.b},{type:H},{type:$}]},W=a.a([Object(i.C)({providedIn:"root"}),a.c("design:paramtypes",[l.b,H,$])],W);var Z=function(){function e(t,n,i){_classCallCheck(this,e),this.geoDataService=t,this.authService=n,this.bsModalService=i}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}();Z.ctorParameters=function(){return[{type:W},{type:U},{type:d.c}]},Z=a.a([Object(i.n)({selector:"app-main",template:a.b(n("AZwa")).default,styles:[a.b(n("8lyn")).default]}),a.c("design:paramtypes",[W,U,d.c])],Z);var K=function(){function e(t,n){_classCallCheck(this,e),this.route=t,this.auth=n}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this.route.snapshot.fragment,t=new URLSearchParams(e),n=t.get("access_token"),i=+t.get("expires_in");this.auth.setToken(n,i)}}]),e}();K.ctorParameters=function(){return[{type:_.a},{type:U}]},K=a.a([Object(i.n)({selector:"app-callback",template:a.b(n("X9m5")).default,styles:[a.b(n("u61n")).default]}),a.c("design:paramtypes",[_.a,U])],K);var X=function(){function e(t){_classCallCheck(this,e),this.geoDataService=t}return _createClass(e,[{key:"deleteForm",value:function(e,t,n,i){var o=Object.assign({},n,{forms:n.forms.filter((function(e){return e.id!==t.id}))});this.geoDataService.updateGroupFeatures(e,i,o)}},{key:"renameForm",value:function(e,t,n,i,o){var a=Object.assign({},n,{forms:[].concat(_toConsumableArray(n.forms.filter((function(e){return e.id!==t.id}))),[Object.assign({},t,{label:o})])});this.geoDataService.updateGroupFeatures(e,i,a)}},{key:"createForm",value:function(e,t,n,i){var o=Object(B.v4)();t=Object.assign({},t,{id:o});var a=Object.assign({},n,{forms:n.forms?[].concat(_toConsumableArray(n.forms),[t]):[t]});this.geoDataService.updateGroupFeatures(e,i,a)}},{key:"checkDefault",value:function(e,t){if("default"===e)try{e=t.styles.color}catch(n){e="#00C8FF"}return e}},{key:"saveStyles",value:function(e,t,n,i){n.color=this.checkDefault(t,i);var o={faIcon:n.icon,color:n.color};this.geoDataService.updateGroupFeatures(e,[i],n),this.geoDataService.updateFeatureStyle(e,i.id,o)}},{key:"updateTagValue",value:function(e,t,n,i){var o=t.properties.tags?t.properties.tags:[];o=o.filter((function(e){return n.id!==e.id}));var a={id:n.id,value:i};t.properties.tags=[].concat(_toConsumableArray(o),[a]),this.geoDataService.updateFeatureProperty(e.id,t.id,t.properties)}},{key:"updateTagValues",value:function(e,t,n,i){t.properties.tags=i,this.geoDataService.updateFeatureProperty(e.id,t.id,t.properties)}},{key:"getTagValue",value:function(e,t){if(e.properties.tags){var n=e.properties.tags.find((function(e){return e.id&&e.id===t.id}));if(n)return n.value}return"checkbox"===t.type?[]:""}}]),e}();X.ctorParameters=function(){return[{type:W}]},X=a.a([Object(i.C)({providedIn:"root"}),a.c("design:paramtypes",[W])],X);var q=function(){function e(){_classCallCheck(this,e),this._selectedImages=new N.a([]),this.selectedImages=this._selectedImages.asObservable(),this._showTagger=new N.a(!1),this.showTagger=this._showTagger.asObservable(),this._showTagGenerator=new N.a(!1),this.showTagGenerator=this._showTagGenerator.asObservable()}return _createClass(e,[{key:"imageSelected",value:function(e){return this._selectedImages.value.some((function(t){return t.id===e.id}))}},{key:"unselectAllImages",value:function(){this._selectedImages.next([])}},{key:"toggleImageSelect",value:function(e){var t=this._selectedImages.value,n=this.imageSelected(e)?t.filter((function(t){return t.id!==e.id})):[e].concat(_toConsumableArray(t));this._selectedImages.next(n)}},{key:"setSelectedImages",value:function(e){this._selectedImages.next(e)}},{key:"toggleTagger",value:function(){this._showTagger.next(!this._showTagger.value)}},{key:"setShowTagGenerator",value:function(e){this._showTagGenerator.next(e)}}]),e}();q=a.a([Object(i.C)({providedIn:"root"}),a.c("design:paramtypes",[])],q);var Y=n("vkgz"),Q=function(){function e(t,n,i){_classCallCheck(this,e),this.http=t,this.authService=n,this.notificationsService=i,this._projects=new N.a([]),this.projects=this._projects.asObservable(),this._activeProject=new M.a(1),this.activeProject=this._activeProject.asObservable(),this._projectUsers=new M.a(1),this.projectUsers$=this._projectUsers.asObservable(),this._deletingProjects=new N.a([]),this.deletingProjects=this._deletingProjects.asObservable()}return _createClass(e,[{key:"testGeoApi",value:function(){var e=this;this.http.post("http://localhost:8888/projects/",{name:"Awesome Project",description:"Cool project"}).subscribe((function(t){e._projects.next([].concat(_toConsumableArray(e._projects.value),[t])),e._activeProject.next(t)})),this.http.get("http://localhost:8888/projects/").subscribe((function(t){e._projects.next(t)}))}},{key:"updateProjectsList",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=0!==t.length?t:this._projects.value;0!==this._deletingProjects.value.length?this._projects.next(n.map((function(t){return e._deletingProjects.value.find((function(e){return e.id===t.id}))||t}))):this._projects.next(n)}},{key:"getProjects",value:function(){var e=this;this.http.get(E.apiUrl+"/projects/").subscribe((function(t){e.updateProjectsList(t)}),(function(t){e.notificationsService.showErrorToast("Error importing files Design Safe, GeoAPI might be down")}))}},{key:"create",value:function(e){var t=this,n=this.http.post(E.apiUrl+"/projects/",e);return n.subscribe((function(e){t._projects.next([].concat(_toConsumableArray(t._projects.value),[e])),t.setActiveProject(e),t.setActiveProject(e)})),n}},{key:"setActiveProject",value:function(e){window.localStorage.setItem("lastProj",JSON.stringify(e));try{this._activeProject.next(e)}catch(t){return t}}},{key:"update",value:function(e){var t=this;this.http.put(E.apiUrl+"/projects/".concat(e.project.id,"/"),e).subscribe((function(e){t._activeProject.next(e)}))}},{key:"delete",value:function(e){var t=this;this._deletingProjects.next([].concat(_toConsumableArray(this._deletingProjects.value),[Object.assign({},e,{deleting:!0})])),this.updateProjectsList(),this.http.delete(E.apiUrl+"projects/".concat(e.id,"/")).subscribe((function(n){window.localStorage.setItem("lastProj",JSON.stringify("none")),t._deletingProjects.next(t._deletingProjects.value.filter((function(t){return t.id!==e.id}))),t.updateProjectsList(),t.getProjects(),window.localStorage.setItem("lastProj",JSON.stringify("none"))}),(function(n){window.localStorage.setItem("lastProj",JSON.stringify("none")),t._deletingProjects.next(t._deletingProjects.value.map((function(t){return t.id===e.id?Object.assign({},t,{deleting:!1,deletingFailed:!0}):t}))),t.updateProjectsList(),t.getProjects(),t.notificationsService.showErrorToast("Could not delete project!"),console.error(n)}))}},{key:"getProjectUsers",value:function(e){var t=this;return this.http.get(E.apiUrl+"/projects/".concat(e.id,"/users/")).pipe(Object(Y.a)((function(e){t._projectUsers.next(e)})))}},{key:"addUserToProject",value:function(e,t){var n=this,i={username:t};this.http.post(E.apiUrl+"/projects/".concat(e.id,"/users/"),i).subscribe((function(t){n.getProjectUsers(e).subscribe()}))}},{key:"deleteUserFromProject",value:function(e,t){var n=this;this.http.delete(E.apiUrl+"/projects/".concat(e.id,"/users/").concat(t,"/")).subscribe((function(t){n.getProjectUsers(e).subscribe()}),(function(e){console.log(e)}))}}]),e}();Q.ctorParameters=function(){return[{type:l.b},{type:U},{type:H}]},Q=a.a([Object(i.C)({providedIn:"root"}),a.c("design:paramtypes",[l.b,U,H])],Q);var ee=function(){function e(t,n,i,o,a,r){_classCallCheck(this,e),this.formsService=t,this.groupsService=n,this.dialog=i,this.router=o,this.geoDataService=a,this.projectsService=r,this.formOptions=[],this.optionColorFilter="#000000",this.openOption={},this.enabledControls=[],this.showSubitem=!0}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.geoDataService.activeGroup.subscribe((function(t){e.activeGroup=t})),this.geoDataService.groups.subscribe((function(t){e.groups=t})),this.geoDataService.groupsFeatures.subscribe((function(t){e.groupsFeatures=t})),this.projectsService.activeProject.subscribe((function(t){e.activeProject=t})),this.formOptions=[],this.formType="text",this.formName="",this.formLabel="",this.formValue="",this.formRequired=!1,this.enabledControls=["Text","Checkbox","Radio","Dropdown","Color"]}},{key:"inputFormLabel",value:function(e){this.formLabel=e.target.value}},{key:"inputFormColor",value:function(e){this.formColor=e.target.value}},{key:"addOptionItem",value:function(e){e&&0==this.formOptions.filter((function(t){return t.label==e})).length&&0!=e.length&&this.formOptions.push({label:e,color:this.optionColorFilter})}},{key:"deleteOption",value:function(e){this.formOptions=this.formOptions.filter((function(t){return t.label!=e.label}))}},{key:"openRenameModal",value:function(e,t){this.selectedGroup=t,this.dialog.open(e)}},{key:"openRenameOptionModal",value:function(e){this.dialog.open(e)}},{key:"renameOption",value:function(e,t){t=t.toLowerCase(),this.formOptions.forEach((function(n){n.label==e.label&&(n.label=t)}))}},{key:"selectInputForm",value:function(e){this.formType=e,this.formLabel="",this.formOptions=[]}},{key:"clearOption",value:function(){this.optionFilter=""}},{key:"clearLabel",value:function(){this.labelFilter=""}},{key:"clearOptionColor",value:function(){this.optionColorFilter="#000000"}},{key:"clear",value:function(){this.clearLabel(),this.clearOptionColor(),this.clearOption()}},{key:"addFormItem",value:function(){var e={type:this.formType,groupName:this.activeGroup.name,label:this.formLabel,options:[]};if(this.openOption[this.formLabel]=!1,"text"!==this.formType&&0!=this.formOptions.length){var t,n=[],i=_createForOfIteratorHelper(this.formOptions);try{for(i.s();!(t=i.n()).done;){var o=t.value;n.push({label:o})}}catch(a){i.e(a)}finally{i.f()}e.options=this.formOptions}this.formsService.createForm(this.activeProject.id,e,this.groups.get(this.activeGroup.name),this.groupsFeatures.get(this.activeGroup.name)),this.formLabel="",this.formColor="",this.formOptions=[],this.groupsService.setShowTagGenerator(!1),this.clear()}},{key:"cancelCreate",value:function(){this.groupsService.setShowTagGenerator(!1),this.clear()}},{key:"expandPanel",value:function(){this.showSubitem=!this.showSubitem}}]),e}();ee.ctorParameters=function(){return[{type:X},{type:q},{type:m.b},{type:_.b},{type:W},{type:Q}]},ee=a.a([Object(i.n)({selector:"app-tag-generator",template:a.b(n("MHpZ")).default,styles:[a.b(n("dTB+")).default]}),a.c("design:paramtypes",[X,q,m.b,_.b,W,Q])],ee);var te=n("itXk"),ne=function(){function e(t,n,i,o,a){_classCallCheck(this,e),this.groupsService=t,this.formsService=n,this.dialog=i,this.projectsService=o,this.geoDataService=a,this.showSubitem=!0,this.formList=[],this.tagName="",this.tagValues=[]}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;Object(te.a)(this.geoDataService.activeGroup,this.geoDataService.groupsFeatures,this.geoDataService.groups).subscribe((function(t){var n=_slicedToArray(t,3),i=n[0],o=n[1],a=n[2];e.activeGroup=i,e.groupsFeatures=o,e.groups=a,i&&(e.formList=i.forms)})),this.geoDataService.activeGroupFeature.subscribe((function(t){e.activeGroupFeature=t})),this.projectsService.activeProject.subscribe((function(t){e.activeProject=t}))}},{key:"openRenameModal",value:function(e,t){this.selectedGroup=t,this.dialog.open(e)}},{key:"deleteForm",value:function(e){this.formsService.deleteForm(this.activeProject.id,e,this.groups.get(this.activeGroup.name),this.groupsFeatures.get(this.activeGroup.name))}},{key:"renameForm",value:function(e){this.formsService.renameForm(this.activeProject.id,e,this.groups.get(this.activeGroup.name),this.groupsFeatures.get(this.activeGroup.name),this.tagName),this.tagName="",this.dialog.closeAll()}},{key:"showTagGenerator",value:function(){this.groupsService.setShowTagGenerator(!0)}},{key:"saveTags",value:function(){this.formsService.updateTagValues(this.activeProject,this.activeGroupFeature,this.formList,this.tagValues)}},{key:"setValue",value:function(e){this.tagValues=this.tagValues.filter((function(t){return t.id!==e.id})),this.tagValues.push(e)}},{key:"expandPanel",value:function(){this.showSubitem=!this.showSubitem}}]),e}();ne.ctorParameters=function(){return[{type:q},{type:X},{type:m.b},{type:Q},{type:W}]},ne=a.a([Object(i.n)({selector:"app-tag-images",template:a.b(n("zXfM")).default,styles:[a.b(n("qk7I")).default]}),a.c("design:paramtypes",[q,X,m.b,Q,W])],ne);var ie=function(){function e(t){_classCallCheck(this,e),this.authSvc=t}return _createClass(e,[{key:"canActivate",value:function(e,t){if(this.authSvc.isLoggedIn())return!0;this.authSvc.login()}}]),e}();ie.ctorParameters=function(){return[{type:U}]};var oe=[{path:"",component:Z,canActivate:[ie=a.a([Object(i.C)(),a.c("design:paramtypes",[U])],ie)],children:[{path:"tagger",component:ne,canActivateChild:[ie]},{path:"preset",component:ee,canActivateChild:[ie]}]},{path:"callback",component:K},{path:"404",component:O}],ae=function e(){_classCallCheck(this,e)};ae=a.a([Object(i.K)({imports:[_.c.forRoot(oe,{onSameUrlNavigation:"reload"})],exports:[_.c],providers:[ie]})],ae);var re=function(){function e(t){_classCallCheck(this,e),this.authService=t,this.title="viewer"}return _createClass(e,[{key:"ngOnInit",value:function(){this.authService.login()}}]),e}();re.ctorParameters=function(){return[{type:U}]},re=a.a([Object(i.n)({selector:"app-root",template:a.b(n("VzVu")).default,styles:[a.b(n("ynWL")).default]}),a.c("design:paramtypes",[U])],re);var se=n("4R65");function le(e,t){return"image"==e.featureType()?function(e,t){var n=Object(se.divIcon)({className:"leaflet-fa-marker-icon",html:"<i class='fas fa-camera-retro fa-2x light-blue'></i>"});return Object(se.marker)(t,{icon:n})}(0,t):"collection"==e.featureType()?function(e,t){var n=Object(se.divIcon)({className:"icon-marker",html:'<i class="fa fa-folder-open fa-2x light-blue"></i>'});return Object(se.marker)(t,{icon:n})}(0,t):"video"==e.featureType()?function(e,t){var n=Object(se.divIcon)({className:"leaflet-fa-marker-icon",html:"<i class='fas fa-video fa-2x light-blue'></i>"});return Object(se.marker)(t,{icon:n})}(0,t):function(e,t){return Object(se.circleMarker)(t,{radius:8,fillColor:"#d3d3d3",color:"black",weight:1,opacity:1,fillOpacity:.8})}(0,t)}n("JXP8");var ce=n("WVt+"),ue=n("zP0r"),pe=n("pLZG"),de=function(){function e(t,n){_classCallCheck(this,e),this.GeoDataService=t,this.route=n,this.mapType="normal",this.features=new se.FeatureGroup,this.featureClickHandler.bind(this),this.mouseEventHandler.bind(this)}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.environment=E,this.overlays=new Map,this.map=new se.Map("map",{center:[40,-80],zoom:9});var t=se.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19,attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}),n=se.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{attribution:"Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community"});this.map.addLayer(t),this.loadFeatures(),this.map.on("mousemove",(function(t){return e.mouseEventHandler(t)})),this.GeoDataService.activeOverlay.pipe(Object(ue.a)(1)).subscribe((function(t){e.addRemoveOverlay(t)})),this.GeoDataService.activeFeature.pipe(Object(pe.a)((function(e){return null!=e}))).subscribe((function(t){e.activeFeature=t;var n=ce.bbox(t);e.map.fitBounds([[n[1],n[0]],[n[3],n[2]]])})),this.GeoDataService.basemap.pipe(Object(ue.a)(1)).subscribe((function(i){"sat"==i&&(e.map.removeLayer(t),e.map.addLayer(n)),"roads"==i&&(e.map.removeLayer(n),e.map.addLayer(t))}))}},{key:"addRemoveOverlay",value:function(e){if(this.overlays.has(e.id))this.features.removeLayer(this.overlays.get(e.id)),this.overlays.delete(e.id);else{var t=se.imageOverlay(E.apiUrl+"/assets/"+e.path,[[e.minLat,e.minLon],[e.maxLat,e.maxLon]]);this.overlays.set(e.id,t),this.features.addLayer(t)}this.map.fitBounds(this.features.getBounds())}},{key:"mouseEventHandler",value:function(e){this.GeoDataService.mapMouseLocation=e.latlng}},{key:"loadFeatures",value:function(){var e=this,t={pointToLayer:le};this.GeoDataService.features.subscribe((function(n){e.features.clearLayers();var i=se.markerClusterGroup({iconCreateFunction:function(e){return se.divIcon({html:"<div><b>".concat(e.getChildCount(),"</b></div>"),className:"marker-cluster"})}});n.features.forEach((function(n){var o=se.geoJSON(n,t);o.on("click",(function(t){e.featureClickHandler(t)})),"Point"==n.geometry.type?i.addLayer(o):e.features.addLayer(o)})),e.features.addLayer(i),e.map.addLayer(e.features);try{e.map.fitBounds(e.features.getBounds())}catch(o){}}))}},{key:"featureClickHandler",value:function(e){var t=e.layer.feature;this.GeoDataService.activeFeature=t}}]),e}();de.ctorParameters=function(){return[{type:W},{type:_.a}]},de=a.a([Object(i.n)({selector:"app-map",template:a.b(n("eC1z")).default,styles:[a.b(n("obZR")).default]}),a.c("design:paramtypes",[W,_.a])],de);var fe=function(){function e(t){_classCallCheck(this,e),this.tapis=t,this.baseUrl="https://agave.designsafe-ci.org/systems/v2/",this._systems=new M.a(1),this.systems=this._systems.asObservable(),this._projects=new M.a(1),this.projects=this._projects.asObservable()}return _createClass(e,[{key:"list",value:function(){var e=this;this.tapis.systemsList({type:"STORAGE"}).subscribe((function(t){e._systems.next(t.result),e._projects.next(t.result.filter((function(e){return e.id.startsWith("project")})))}),(function(t){e._systems.next(null),e._projects.next(null)}))}}]),e}();fe.ctorParameters=function(){return[{type:C.b}]},fe=a.a([Object(i.C)({providedIn:"root"}),a.c("design:paramtypes",[C.b])],fe);var he=n("dFDH"),ge=function(){function e(t,n,i,o){_classCallCheck(this,e),this.tapis=t,this.http=n,this.authService=i,this.popup=o,this.baseUrl="https://agave.designsafe-ci.org/files/v2/",this._listing=new N.a([]),this.listing=this._listing.asObservable(),this.IMPORTABLE_TYPES=["jpg","jpeg","las","laz","json","geojson","geotiff","tiff","gpx"]}return _createClass(e,[{key:"checkIfSelectable",value:function(e){if("dir"===e.type)return!1;var t=this.getFileExtension(e);return this.IMPORTABLE_TYPES.includes(t)}},{key:"getFileExtension",value:function(e){return e.name.split(".").pop().toLowerCase()}},{key:"listFiles",value:function(e,t,n,i){return this.tapis.filesList({systemId:e,filePath:t,offset:n,limit:i})}},{key:"getParentPath",value:function(e){var t=e.replace("//","/").split("/");return t.pop(),t.join("/")}},{key:"export",value:function(e,t,n,i,o){var a=this,r={duration:3e3,horizontalPosition:"right",verticalPosition:"top"},s="https://agave.designsafe-ci.org/files/v2/media/system/".concat(e).concat(t),l=new Blob([o],{type:".csv"==i?"text/csv":"application/json"}),c=new Date,u=new File([l],n,{lastModified:c.valueOf()}),p=new FormData;p.append("fileToUpload",u),this.http.post(s,p).subscribe((function(n){console.log(n);var i="Successfully saved file to "+e+t;a.popup.open(i,"",r)}),(function(n){console.log(n);var i="Faled to save file to "+e+t;a.popup.open(i,"",r)}))}},{key:"saveState",value:function(){var e=JSON.stringify(this.lastSystem),t=JSON.stringify(this.lastFile);window.localStorage.setItem("system",e),window.localStorage.setItem("file",t)}},{key:"getState",value:function(){try{this.lastSystem=JSON.parse(window.localStorage.getItem("system")),this.lastFile=JSON.parse(window.localStorage.getItem("file")),this.noPreviousSelections=null==this.lastFile}catch(e){console.log(e)}}}]),e}();ge.ctorParameters=function(){return[{type:C.b},{type:l.b},{type:U},{type:he.a}]},ge=a.a([Object(i.C)({providedIn:"root"}),a.c("design:paramtypes",[C.b,l.b,U,he.a])],ge);var me,ve=n("XNiG"),be=me=function(){function e(t,n,o,a,r){_classCallCheck(this,e),this.tapisFilesService=t,this.dialogRef=n,this.dialog=o,this.authService=a,this.agaveSystemsService=r,this.currentPath=new i.w,this.allowedExtensions=this.tapisFilesService.IMPORTABLE_TYPES,this.filesList=[],this.inProgress=!0,this.retrievalError=!1,this.selectedFiles=new Map,this.onClose=new ve.a}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.agaveSystemsService.list(),Object(te.a)([this.authService.currentUser,this.agaveSystemsService.systems,this.agaveSystemsService.projects]).pipe(Object(V.a)(1)).subscribe((function(t){var n=_slicedToArray(t,3),i=n[0],o=n[1],a=n[2];e.myDataSystem=o.find((function(e){return"designsafe.storage.default"===e.id})),e.communityDataSystem=o.find((function(e){return"designsafe.storage.community"===e.id})),e.publishedDataSystem=o.find((function(e){return"designsafe.storage.published"===e.id})),e.selectedSystem=e.tapisFilesService.lastSystem,null==e.selectedSystem&&(e.selectedSystem=e.myDataSystem,e.tapisFilesService.lastSystem=e.myDataSystem),e.currentDirectory=e.tapisFilesService.lastFile,e.projects=a,e.currentUser=i;var r={system:e.myDataSystem.id,type:"dir",path:e.currentUser.username};e.tapisFilesService.noPreviousSelections&&(e.selectedSystem=e.myDataSystem,e.tapisFilesService.lastFile=r,e.tapisFilesService.noPreviousSelections=!1),e.browse(e.tapisFilesService.lastFile)}))}},{key:"selectSystem",value:function(e){var t;t=e.id===this.myDataSystem.id?this.currentUser.username:"/";var n={system:e.id,type:"dir",path:t};this.selectedSystem=e,this.tapisFilesService.lastSystem=this.selectedSystem,this.browse(n)}},{key:"browse",value:function(e){this.selectedPath=e.path,this.selectedSystem=this.selectedSystem,"dir"===e.type&&(this.currentDirectory=e,this.tapisFilesService.lastFile=e,this.filesList=[],this.offset=0,this.inProgress=!1,this.getFiles())}},{key:"toRoot",value:function(){var e;e=this.selectedSystem.id===this.myDataSystem.id?this.currentUser.username:"/";var t={system:this.selectedSystem.id,type:"dir",path:e};this.browse(t)}},{key:"getFiles",value:function(){var e=this,t=this.offset%me.limit==0;!this.inProgress&&t&&(this.inProgress=!0,this.tapisFilesService.listFiles(this.currentDirectory.system,this.currentDirectory.path,this.offset,me.limit).subscribe((function(t){var n=t.result;if(n.length&&"."===n[0].name){var i=n.shift();e.currentPath.next(i.path),i.path=e.tapisFilesService.getParentPath(i.path),i.name="..",n.unshift(i)}var o=[],a=e.allowedExtensions;n.forEach((function(e,t){("file"==e.type&&a.includes(e.path.split(".").pop().toLowerCase())||"dir"==e.type)&&o.push(e)})),e.inProgress=!1,e.retrievalError=!1,e.filesList=e.filesList.concat(o),e.offset=e.offset+n.length}),(function(t){e.retrievalError=!0,e.inProgress=!1})))}},{key:"select",value:function(e,t,n){e.shiftKey?this.selectFilesShiftClick(n,t):this.tapisFilesService.checkIfSelectable(t)&&this.addSelectedFile(t,n)}},{key:"selectFilesShiftClick",value:function(e,t){this.selectShift(e,t)}},{key:"addSelectedFile",value:function(e,t){-1!=t&&(this.firstFileIndex=t),this.tapisFilesService.checkIfSelectable(e)&&(this.selectedFiles.has(e.path)?this.selectedFiles.delete(e.path):this.selectedFiles.set(e.path,e))}},{key:"chooseFiles",value:function(){this.tapisFilesService.saveState(),this.tapisFilesService.lastSystem=this.selectedSystem;var e=Array.from(this.selectedFiles.values());this.dialogRef.close(e)}},{key:"cancel",value:function(){this.tapisFilesService.saveState(),this.tapisFilesService.lastSystem=this.selectedSystem,this.dialogRef.close()}},{key:"selectAll",value:function(){var e,t=0,n=_createForOfIteratorHelper(this.filesList);try{for(n.s();!(e=n.n()).done;){var i=e.value;this.selectedFiles.has(i.path)||(this.select("",i,-1),t+=1)}}catch(o){n.e(o)}finally{n.f()}1==t&&this.selectedFiles.clear()}},{key:"selectShift",value:function(e,t){null!=this.firstFileIndex&&this.firstFileIndex!=e?this.addRangeFiles(this.firstFileIndex,e,!0):this.addSelectedFile(t,e)}},{key:"addRangeFiles",value:function(e,t,n){for(var i=Math.max(e,t),o=Math.min(e,t);o<i+1;++o)this.addSelectedFile(this.filesList[o],-1);n&&this.addSelectedFile(this.filesList[e],-1)}}]),e}();be.limit=200,be.ctorParameters=function(){return[{type:ge},{type:m.d},{type:m.b},{type:U},{type:fe}]},a.a([Object(i.R)(),a.c("design:type",i.w)],be.prototype,"currentPath",void 0),be=me=a.a([Object(i.n)({selector:"app-modal-file-browser",template:a.b(n("0NOL")).default,styles:[a.b(n("u6lZ")).default]}),a.c("design:paramtypes",[ge,m.d,m.b,U,fe])],be);var ye,xe=n("s7LF"),ke=ye=function(){function e(t,n,o,a,r){_classCallCheck(this,e),this.tapisFilesService=t,this.dialogRef=n,this.dialog=o,this.authService=a,this.agaveSystemsService=r,this.currentPath=new i.w,this.filesList=[],this.inProgress=!0,this.selectedFiles=new Map,this.onClose=new ve.a,this.passbackData=["","","",""],this.fileName="Custom File Name",this.fileExtension=".csv"}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.downloadSelectForm=new xe.c({Name:new xe.b(this.fileName),Extension:new xe.b(this.fileExtension)}),this.agaveSystemsService.list(),Object(te.a)([this.authService.currentUser,this.agaveSystemsService.systems,this.agaveSystemsService.projects]).pipe(Object(V.a)(1)).subscribe((function(t){var n=_slicedToArray(t,3),i=n[0],o=n[1],a=n[2];e.myDataSystem=o.find((function(e){return"designsafe.storage.default"===e.id})),e.communityDataSystem=o.find((function(e){return"designsafe.storage.community"===e.id})),e.publishedDataSystem=o.find((function(e){return"designsafe.storage.published"===e.id})),e.selectedSystem=e.myDataSystem,e.projects=a,e.currentUser=i;var r={system:e.myDataSystem.id,type:"dir",path:e.currentUser.username};e.browse(r)}))}},{key:"selectSystem",value:function(e){var t;t=e.id===this.myDataSystem.id?this.currentUser.username:"/";var n={system:e.id,type:"dir",path:t};this.browse(n)}},{key:"browse",value:function(e){"dir"===e.type&&(this.currentDirectory=e,this.filesList=[],this.offset=0,this.inProgress=!1,this.getFiles())}},{key:"getFiles",value:function(){var e=this,t=this.offset%ye.limit==0;!this.inProgress&&t&&(this.inProgress=!0,this.tapisFilesService.listFiles(this.currentDirectory.system,this.currentDirectory.path,this.offset,ye.limit).subscribe((function(t){var n=t.result;if(n.length&&"."===n[0].name){var i=n.shift();e.currentPath.next(i.path),e.passbackData[1]=i.path,i.path=e.tapisFilesService.getParentPath(i.path),i.name="..",n.unshift(i)}var o=[];n.forEach((function(e,t){"file"!=e.type&&"dir"!=e.type||o.push(e)})),e.inProgress=!1,e.filesList=e.filesList.concat(o),e.offset=e.offset+n.length}),(function(t){e.inProgress=!1})))}},{key:"chooseFiles",value:function(){this.passbackData[0]=this.selectedSystem.id,this.downloadSelectForm.dirty?this.passbackData[2]=this.downloadSelectForm.get("Name").value:this.passbackData[2]="",this.passbackData[3]=this.fileExtension,this.dialogRef.close(this.passbackData)}},{key:"cancel",value:function(){this.dialogRef.close()}}]),e}();ke.limit=200,ke.ctorParameters=function(){return[{type:ge},{type:m.d},{type:m.b},{type:U},{type:fe}]},a.a([Object(i.R)(),a.c("design:type",i.w)],ke.prototype,"currentPath",void 0),ke=ye=a.a([Object(i.n)({selector:"app-modal-download-selector",template:a.b(n("7E2L")).default,styles:[a.b(n("Ag+R")).default]}),a.c("design:paramtypes",[ge,m.d,m.b,U,fe])],ke);var Se=function(){function e(t,n,i){_classCallCheck(this,e),this.dialogRef=t,this.dialog=n,this.projectsService=i,this.onClose=new ve.a}return _createClass(e,[{key:"ngOnInit",value:function(){this.projCreateForm=new xe.c({name:new xe.b(""),description:new xe.b("")})}},{key:"close",value:function(e){this.dialogRef.close()}},{key:"submit",value:function(){var e=new G,t=new D;e.description=this.projCreateForm.get("description").value,e.name=this.projCreateForm.get("name").value,t.project=e,this.projectsService.create(t),this.dialogRef.close()}}]),e}();Se.ctorParameters=function(){return[{type:m.d},{type:m.b},{type:Q}]},Se=a.a([Object(i.n)({selector:"app-modal-create-project",template:a.b(n("nOsy")).default,styles:[a.b(n("fWOx")).default]}),a.c("design:paramtypes",[m.d,m.b,Q])],Se);var we=function(){function e(t,n,i){_classCallCheck(this,e),this.dialogRef=t,this.dialog=n,this.projectsService=i}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.projShareForm=new xe.c({name:new xe.b("")}),this.projectsService.activeProject.subscribe((function(t){e.activeProj=t})),this.projectsService.getProjectUsers(this.activeProj).subscribe((function(t){e.projectUsers=t,e.onlyOne=1==e.projectUsers.length}))}},{key:"close",value:function(){this.dialogRef.close()}},{key:"submit",value:function(){this.projectsService.addUserToProject(this.activeProj,this.projShareForm.get("name").value),this.dialogRef.close()}},{key:"delete",value:function(e){this.projectsService.deleteUserFromProject(this.activeProj,e),this.dialogRef.close()}}]),e}();we.ctorParameters=function(){return[{type:m.d},{type:m.b},{type:Q}]},we=a.a([Object(i.n)({selector:"app-modal-share-project",template:a.b(n("P1jy")).default,styles:[a.b(n("dp4s")).default]}),a.c("design:paramtypes",[m.d,m.b,Q])],we);var je=function(){function e(t,n,i,o){_classCallCheck(this,e),this.dialogRef=t,this.dialog=n,this.projectsService=i,this.projData=o}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.projectsService.activeProject.subscribe((function(t){e.activeProject=t})),this.projCreateForm=new xe.c({name:new xe.b(this.activeProject.name),description:new xe.b(this.activeProject.description)})}},{key:"close",value:function(){this.dialogRef.close()}},{key:"delete",value:function(){confirm("Are you sure you want to delete this project? This will also delete it from HazMapper, and anyone this project was shared with.")&&this.projectsService.delete(this.activeProject),this.dialogRef.close()}},{key:"update",value:function(){var e=new G,t=new D;e.description=this.projCreateForm.get("description").value,e.name=this.projCreateForm.get("name").value,e.id=this.activeProject.id,e.uuid=this.activeProject.uuid,t.project=e,this.projectsService.update(t),this.dialogRef.close()}}]),e}();je.ctorParameters=function(){return[{type:m.d},{type:m.b},{type:Q},{type:void 0,decorators:[{type:i.B,args:[m.a]}]}]},je=a.a([Object(i.n)({selector:"app-modal-current-project",template:a.b(n("moaK")).default,styles:[a.b(n("tw4j")).default]}),a.d(3,Object(i.B)(m.a)),a.c("design:paramtypes",[m.d,m.b,Q,Object])],je);var Fe=function(){function e(t){var n=this;_classCallCheck(this,e),this.geoDataService=t,this._features=new N.a({type:"FeatureCollection",features:[]}),this.features$=this._features.asObservable(),this.geoDataService.features.subscribe((function(e){n._features.next(e),n.featureCollection=e}))}return _createClass(e,[{key:"deleteFeature",value:function(e){this.featureCollection.features=this.featureCollection.features.filter((function(t){return t.id!=e.id})),this._features.next(this.featureCollection),this.geoDataService.deleteFeature(e)}},{key:"bulkFeatureDelete",value:function(e){var t=this;e.forEach((function(e){t.featureCollection.features=t.featureCollection.features.filter((function(t){return t.id!=e.id})),t.geoDataService.deleteFeature(e)})),this._features.next(this.featureCollection)}},{key:"saveFeature",value:function(e){this.geoDataService.updateFeatureProperty(e.project_id,Number(e.id),e.properties)}},{key:"updateFeatureProperties",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;null!=t&&(e.properties=t),this.featureCollection.features.forEach((function(t){t.id==e.id&&(t=e)})),this.saveFeature(e)}}]),e}();Fe.ctorParameters=function(){return[{type:W}]},Fe=a.a([Object(i.C)({providedIn:"root"}),a.c("design:paramtypes",[W])],Fe);var Ce=function(){function e(t,n,i,o,a,r,s,l,c,u,p,d,f){_classCallCheck(this,e),this.projectsService=t,this.geoDataService=n,this.bsModalService=i,this.groupsService=o,this.formsService=a,this.authService=r,this.cdr=s,this.filesService=l,this.router=c,this.dialog=u,this.scrollService=p,this.notificationsService=d,this.featureService=f,this.featureList=[],this.mapMouseLocation=new se.LatLng(0,0),this.showTagger=!1,this.invalidNameError=!1,this.existingNameError=!1,this.foundFilePaths=[]}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.filesService.getState(),this.featureService.features$.subscribe((function(t){e.features=t,null!=e.features&&(e.featureList=t.features.filter((function(e){return e.assets.length&&e.initialAsset()&&"image"===e.featureType()})))})),this.geoDataService.groups.subscribe((function(t){e.groups=t,e.groupsExist=!(!t||!t.size)})),Object(te.a)(this.geoDataService.activeGroup,this.geoDataService.groupsFeatures).subscribe((function(t){var n=_slicedToArray(t,2),i=n[0],o=n[1];e.activeGroup=i,e.groupsFeatures=o,i&&o&&(e.activeGroupFeatures=o.get(i.name),e.activeGroupFeatures&&(e.activeGroupFeaturesRotate=_toConsumableArray(e.activeGroupFeatures)))})),this.geoDataService.activeGroupFeature.subscribe((function(t){e.activeGroupFeature=t})),this.geoDataService.activeFeature.subscribe((function(t){e.activeFeature=t})),this.notificationsService.notifications.subscribe((function(t){var n=t.some((function(e){return"success"===e.status})),i=t.some((function(e){return"error"===e.status}));n&&e.geoDataService.getFeatures(e.selectedProject.id),i&&(t.forEach((function(t){if("Error importing "==t.message.substring(0,16)&&!e.foundFilePaths.some((function(e){return e===t.message.substring(16)}))){var n=t.message.substring(16);e.geoDataService.uploadNewFeature(e.selectedProject.id,e.createBlankFeature(),n),e.foundFilePaths.push(n)}})),e.geoDataService.getFeatures(e.selectedProject.id))})),this.authService.currentUser.subscribe((function(t){return e.currentUser=t})),this.projectsService.getProjects(),this.projectsService.projects.subscribe((function(t){var n;(e.projects=t,e.projects.length)&&("none"!=(n=e.projectsService.setActiveProject(e.projects[0]))&&null!=n||(n=e.projects[0]),e.projectsService.setActiveProject(n));e.groupsService.selectedImages.subscribe((function(t){e.selectedImages=t})),e.groupsService.showTagger.subscribe((function(t){e.showTagger=t}))})),this.projectsService.activeProject.subscribe((function(t){e.selectedProject=t,e.getDataForProject(e.selectedProject),e.hazmapperLink="https://hazmapper.tacc.utexas.edu/hazmapper/project/"+t.uuid})),this.geoDataService.mapMouseLocation.pipe(Object(ue.a)(1)).subscribe((function(t){e.mapMouseLocation=t}))}},{key:"ngAfterViewChecked",value:function(){this.cdr.detectChanges()}},{key:"clearAll",value:function(){this.groupsService.unselectAllImages()}},{key:"selectProject",value:function(e){this.projectsService.setActiveProject(e),this.getDataForProject(e)}},{key:"getDataForProject",value:function(e){this.geoDataService.getFeatures(e.id),this.geoDataService.getOverlays(e.id),this.geoDataService.getPointClouds(e.id)}},{key:"openFilePicker",value:function(){var e=this;this.foundFilePaths=[],this.dialog.open(be).afterClosed().subscribe((function(t){null!=t&&e.geoDataService.importFileFromTapis(e.selectedProject.id,t)}))}},{key:"createBlankFeature",value:function(){return{type:"Feature",geometry:{type:"Point",coordinates:[0,0]},properties:{}}}},{key:"openDownloadSelector",value:function(e){var t,n=this;this.dialog.open(ke).afterClosed().subscribe((function(e){t=e,n.saveFile(".json"==t[3],!0,t[0],t[1],t[2])}))}},{key:"openCreateProjectModal",value:function(){this.dialog.open(Se,{height:"400px",width:"600px"})}},{key:"openShareProjectModal",value:function(){this.dialog.open(we,{height:"400px",width:"600px"})}},{key:"openProjectModal",value:function(e){var t=this;this.dialog.open(je,{height:"400px",width:"600px",data:{id:e.id,name:e.name,description:e.description,uuid:e.uuid}}).afterClosed().subscribe((function(e){t.projectsService.setActiveProject(t.projects[0])}))}},{key:"addGroup",value:function(e){this.groupName=e,e&&0!==e.length?this.groups.get(e)?(this.invalidNameError=!1,this.existingNameError=!0):(this.invalidNameError=!1,this.existingNameError=!1,this.geoDataService.createNewGroup(this.selectedProject.id,this.selectedImages,e),this.dialog.closeAll(),this.groupsService.unselectAllImages()):(this.invalidNameError=!0,this.existingNameError=!1)}},{key:"openAddGroupModal",value:function(e){this.dialog.open(e)}},{key:"toggleTagger",value:function(){if(this.showTagger)this.scrollService.setScrollPosition();else{this.scrollService.setScrollRestored(!0);var e=_slicedToArray(this.groupsFeatures.keys(),1)[0],t=(this.groupsFeatures.get(e),this.groups.get(e));this.geoDataService.setActiveGroup(t),this.groupsService.setShowTagGenerator(!1),this.groupsService.unselectAllImages()}this.groupsService.toggleTagger()}},{key:"getAssetDisplay",value:function(){return this.activeGroupFeature.featureShortPath()}},{key:"otherPath",value:function(e){e?this.activeGroupFeaturesRotate.push(this.activeGroupFeaturesRotate.shift()):this.activeGroupFeaturesRotate.unshift(this.activeGroupFeaturesRotate.pop()),this.activeGroupFeature=this.activeGroupFeaturesRotate[0],this.geoDataService.setActiveGroupFeature(this.activeGroupFeature)}},{key:"saveFile",value:function(e){var t,n,i=this,o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",s=arguments.length>4?arguments[4]:void 0,l="FeatureID,longitude,latitude,src",c="",u="",p=!0,d=!1,f=0;this.featureList.forEach((function(t){u=t.project_id;var n,o,a,r=t.geometry.coordinates,s=E.apiUrl+"/assets/"+t.assets[0].path;s=s.replace(/([^:])(\/{2,})/g,"$1/");try{try{n=t.properties.group}catch(g){n=[{color:"#000000",name:"N/A",icon:"fa-house-damage"}]}try{o=t.properties.style}catch(m){o=[]}try{a=t.properties.tag}catch(v){a=[]}n.length>0&&!d&&(l+=",groupName,groupColor,groupIcon"),null!=a&&p&&!d?(l+=",Icon,Color,tagType,tagSelection",a.forEach((function(e){var t=0;e.options.forEach((function(e){++t>f&&(l+=",tagOption",f=t)}))})),d||(l+="\r\n",p=!1,d=!0)):d||(l+="\r\n",d=!0)}catch(b){}if(e)c+=i.compileJSON(r,t.id,s,n,a,o)+", \n";else if(null==n){l+="\r\n";var h=t.id+","+r[0]+","+r[1]+","+s+"\r\n";l+=h}else n.forEach((function(e){if(null!=a)try{a.forEach((function(n){var i=t.id+","+r[0]+","+r[1]+","+s+","+e.name+","+e.color+","+e.icon+","+o.faIcon+","+o.color+","+n.type+","+n.extra[0].option;n.options.forEach((function(e){i+=","+e.label})),l+=i+="\r\n"}))}catch(g){try{var n=t.id+","+r[0]+","+r[1]+","+s+","+e.name+","+e.color+","+e.icon+"\r\n";l+=n}catch(b){var i=t.id+","+r[0]+","+r[1]+","+s+"\r\n";l+=i}}else{var c=t.id+","+r[0]+","+r[1]+","+s+","+e.name+","+e.color+","+e.icon+"\r\n";l+=c}}))})),e?(t=c,n=".json"):(t=l,n=".csv"),o?(""==s?s=u+n:s+=n,this.filesService.export(a,r,s,n,t)):this.download(t,n,u)}},{key:"compileJSON",value:function(e,t,n){var i,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],r=arguments.length>5?arguments[5]:void 0,s="";return i={longitude:e[0],latitude:e[1],src:n},s+=JSON.stringify(i),0!=o.length&&o.forEach((function(e){i={groupName:e.name,groupColor:e.color},s+=JSON.stringify(i),a.length>0&&a.forEach((function(e){e.feature==t&&(i={icon:r.faIcon,"icon color":r.color,"tag name":e.label,"tag type":e.type,"tag selection":e.extra[0].option},s+=JSON.stringify(i))}))})),""==s&&(i={longitude:e[0],latitude:e[1],src:n},s+=JSON.stringify(i)),s}},{key:"download",value:function(e,t,n){var i=new Blob(["\ufeff"+e],{type:"text/csv;charset=utf-8;"}),o=document.createElement("a"),a=URL.createObjectURL(i),r="taggit-proj-"+n;-1!=navigator.userAgent.indexOf("Safari")&&-1==navigator.userAgent.indexOf("Chrome")&&o.setAttribute("target","_blank"),o.setAttribute("href",a),o.setAttribute("download",r+t),o.style.visibility="hidden",document.body.appendChild(o),o.click(),document.body.removeChild(o)}}]),e}();Ce.ctorParameters=function(){return[{type:Q},{type:W},{type:d.c},{type:q},{type:X},{type:U},{type:i.k},{type:ge},{type:_.b},{type:m.b},{type:$},{type:H},{type:Fe}]},Ce=a.a([Object(i.n)({selector:"app-control-bar",template:a.b(n("vlUF")).default,styles:[a.b(n("uV4w")).default]}),a.c("design:paramtypes",[Q,W,d.c,q,X,U,i.k,ge,_.b,m.b,$,H,Fe])],Ce);var _e=n("z6cu"),Oe=n("JIr8"),Pe=function(){function e(t){_classCallCheck(this,e),this.authService=t}return _createClass(e,[{key:"intercept",value:function(e,t){var n=this;return t.handle(e).pipe(Object(Oe.a)((function(e){401===e.status&&(n.authService.logout(),location.reload());var t=e.error.message||e.statusText;return Object(_e.a)(t)})))}}]),e}();Pe.ctorParameters=function(){return[{type:U}]},Pe=a.a([Object(i.C)(),a.c("design:paramtypes",[U])],Pe);var Ie=function(){function e(t){_classCallCheck(this,e),this.authSvc=t}return _createClass(e,[{key:"intercept",value:function(e,t){return e.url.indexOf("https://agave.designsafe-ci.org")>-1&&this.authSvc.isLoggedIn()&&(e=e.clone({setHeaders:{Authorization:"Bearer "+this.authSvc.userToken.token}})),e.url.indexOf("http://localhost")>-1&&this.authSvc.isLoggedIn()&&(e=e.clone({setHeaders:{"X-JWT-Assertion-designsafe":E.jwt}})),t.handle(e)}}]),e}();Ie.ctorParameters=function(){return[{type:U}]},Ie=a.a([Object(i.C)(),a.c("design:paramtypes",[U])],Ie);var Te=function(){function e(t,n,i,o,a,r,s,l,c){_classCallCheck(this,e),this.geoDataService=t,this.projectsService=n,this.groupsService=i,this.cdr=o,this.renderer=a,this.spinner=r,this.dialog=s,this.scrollService=l,this.featureService=c,this.showTagger=!1,this.scrolling=!1,this.featureList=[],this.scrollSum=15}return _createClass(e,[{key:"ngAfterViewChecked",value:function(){this.scrollService.scrollRestored&&this.scrollService.scroll(),this.cdr.detectChanges()}},{key:"ngOnInit",value:function(){var e=this;this.environment=E,this.geoDataService.loaded.subscribe((function(t){e.loaded=t}),(function(t){e.projectsExist=!1})),this.featureService.features$.subscribe((function(t){t&&(t.features.length>0?(e.imagesExist=!0,e.featureList=t.features.filter((function(e){try{return e.initialAsset()&&"image"===e.featureType()}catch(t){return console.error(t),e.assets.push({path:"../../images/Image-not-found.png"}),!1}})),e.featureListScroll=e.featureList.slice(0,e.scrollSum)):e.imagesExist=!1)})),this.projectsService.projects.subscribe((function(t){e.projects=t,e.projects.length?e.projectsExist=!0:e.projectsExist=!1})),this.geoDataService.groupsFeatures.subscribe((function(t){e.groupsFeatures=t})),this.geoDataService.groups.subscribe((function(t){e.groups=t})),this.geoDataService.activeFeature.subscribe((function(t){t&&(e.activeFeature=t)})),this.geoDataService.activeGroup.subscribe((function(t){e.activeGroup=t})),this.geoDataService.activeGroupFeature.subscribe((function(t){e.activeGroupFeature=t})),this.geoDataService.groups.subscribe((function(t){e.groups=t})),this.groupsService.showTagger.subscribe((function(t){e.showTagger=t,e.scrollStatus=t?"success":"danger"}))}},{key:"getPath",value:function(){return this.environment.apiUrl+"/assets/"+this.activeGroupFeature.assets[0].path.replace(/([^:])(\/{2,})/g,"$1/")}},{key:"appendSum",value:function(){var e=this;if(0!=this.featureList.length){if(this.scrollSum==this.featureList.length)return this.spinner.hide(),void(this.scrolling=!1);this.scrollSum>this.featureList.length&&(this.scrollSum=this.featureList.length)}this.featureListScroll=this.featureList.slice(0,this.scrollSum),setTimeout((function(){e.spinner.hide(),e.scrolling=!1}),1300)}},{key:"onScroll",value:function(){this.scrolling||(this.spinner.show(),this.scrollSum+=10,this.appendSum(),this.scrolling=!0)}},{key:"openCreateProjectModal",value:function(){this.dialog.open(Se,{height:"400px",width:"600px"})}}]),e}();Te.ctorParameters=function(){return[{type:W},{type:Q},{type:q},{type:i.k},{type:i.Z},{type:p.b},{type:m.b},{type:$},{type:Fe}]},Te=a.a([Object(i.n)({selector:"app-image-gallery",template:a.b(n("Pwca")).default,styles:[a.b(n("N3QO")).default]}),a.c("design:paramtypes",[W,Q,q,i.k,i.Z,p.b,m.b,$,Fe])],Te);var Ge=function(){function e(t,n,i,o,a,r){_classCallCheck(this,e),this.geoDataService=t,this.groupsService=n,this.projectsService=i,this.dialog=o,this.scrollService=a,this.featureService=r,this.status=!1,this.imageSelected="img-unselected",this.hasGroup=!1,this.colors=[]}return _createClass(e,[{key:"ngOnInit",value:function(){var e,t=this;this.environment=E,e=(e="../../images/Image-not-found.png"!=this.feature.assets[0].path?this.environment.apiUrl+"/assets/"+this.feature.assets[0].path:this.feature.assets[0].path).replace(/([^:])(\/{2,})/g,"$1/"),this.featureSource=e,this.coordinates=this.feature.geometry.coordinates,this.projectsService.activeProject.subscribe((function(e){t.activeProject=e})),this.geoDataService.groups.subscribe((function(e){t.groups=e})),this.groupsService.selectedImages.subscribe((function(e){t.selectedImages=e,t.imageSelected=t.groupsService.imageSelected(t.feature)?"img-selected":"img-unselected"})),this.featurePath=this.feature.featurePath()}},{key:"imageSelect",value:function(){this.groupsService.toggleImageSelect(this.feature)}},{key:"imageZoom",value:function(e){this.dialog.open(e)}},{key:"imageDelete",value:function(){var e=this.featureService;this.selectedImages.forEach((function(t){e.deleteFeature(t)})),this.groupsService.unselectAllImages(),this.scrollService.setScrollRestored(!0)}},{key:"openMoreGroupsModal",value:function(e){this.dialog.open(e)}},{key:"openImageDeleteModal",value:function(e){this.scrollService.setScrollPosition(),this.dialog.open(e)}},{key:"deleteFromGroup",value:function(e,t){this.geoDataService.deleteGroupFeatures(this.activeProject.id,[e],t)}},{key:"openImageAddModal",value:function(e){this.scrollService.setScrollPosition(),this.dialog.open(e)}},{key:"addGroup",value:function(e){this.geoDataService.createGroupFeatures(this.activeProject.id,this.selectedImages,this.groups.get(e.name)),this.groupsService.unselectAllImages(),this.scrollService.setScrollRestored(!0)}}]),e}();Ge.ctorParameters=function(){return[{type:W},{type:q},{type:Q},{type:m.b},{type:$},{type:Fe}]},a.a([Object(i.F)(),a.c("design:type",Object)],Ge.prototype,"feature",void 0),Ge=a.a([Object(i.n)({selector:"app-image-box",template:a.b(n("ay+3")).default,styles:[a.b(n("if2z")).default]}),a.c("design:paramtypes",[W,q,Q,m.b,$,Fe])],Ge);var De=function(){function e(){_classCallCheck(this,e),this.newValue=new i.w,this.checked=!1,this.colorArray=[],this.values=[],this.name=new xe.b("")}return _createClass(e,[{key:"ngOnInit",value:function(){this.generateColors()}},{key:"generateColors",value:function(){var e=this.form.options.length,t=!1;e%2==1&&(t=!0,e--),e=(e-2)/2;var n=Math.floor(255/e);255===n&&(n=Math.floor(n/2)),this.colorArray.push("#00FF00");for(var i,o=0,a=0;a<e;a++)i=(o+=n).toString(16),this.colorArray.push("#".concat(i,"FF00"));t&&this.colorArray.push("#FFFF00"),o=255;for(var r=0;r<e;r++)2!=(i=(o-=n).toString(16)).length&&(i="0"+i),this.colorArray.push("#FF".concat(i,"00"));this.colorArray.push("#FF0000")}},{key:"setValue",value:function(e){this.newValue.emit(e)}}]),e}();a.a([Object(i.F)(),a.c("design:type",I)],De.prototype,"form",void 0),a.a([Object(i.R)(),a.c("design:type",i.w)],De.prototype,"newValue",void 0),De=a.a([Object(i.n)({selector:"app-form-generator",template:a.b(n("zusP")).default,styles:[a.b(n("ld75")).default]}),a.c("design:paramtypes",[])],De);var Ae=function(){function e(t){_classCallCheck(this,e),this.groupsService=t,this.showTagGenerator=!1}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.groupsService.showTagGenerator.subscribe((function(t){e.showTagGenerator=t}))}}]),e}();Ae.ctorParameters=function(){return[{type:q}]},Ae=a.a([Object(i.n)({selector:"app-side-bar",template:a.b(n("c6cR")).default,styles:[a.b(n("IElf")).default]}),a.c("design:paramtypes",[q])],Ae);var Le=[{id:"fa-house-damage",unicode:"&#xf6f1; house-damage"},{id:"fa-car",unicode:"&#xf1b9; car"},{id:"fa-tree",unicode:"&#xf1bb; tree"},{id:"fa-school",unicode:"&#xf549; school"},{id:"fa-archway",unicode:"&#xf557; archway"},{id:"fa-building",unicode:"&#xf1ad; building"},{id:"fa-bus",unicode:"&#xf207; bus"},{id:"fa-church",unicode:"&#xf51d; church"},{id:"fa-helicopter",unicode:"&#xf533; helicopter"},{id:"fa-hospital-alt",unicode:"&#xf47d; hospital"},{id:"fa-hotel",unicode:"&#xf594; hotel"},{id:"fa-igloo",unicode:"&#xf7ae; igloo"},{id:"fa-motorcycle",unicode:"&#xf21c; motorcycle"},{id:"fa-place-of-worship",unicode:"&#xf67f; place-of-worship"},{id:"fa-plane",unicode:"&#xf072; plane"},{id:"fa-school",unicode:"&#xf549; school"},{id:"fa-rocket",unicode:"&#xf135; rocket"},{id:"fa-ship",unicode:"&#xf21a; ship"},{id:"fa-shopping-cart",unicode:"&#xf07a; shopping-cart"},{id:"fa-shuttle-van",unicode:"&#xf5b6; shuttle-van"},{id:"fa-monument",unicode:"&#xf5a6; monument"},{id:"fa-store",unicode:"&#xf54e; store"},{id:"fa-subway",unicode:"&#xf239; subway"},{id:"fa-taxi",unicode:"&#xf1ba; taxi"},{id:"fa-train",unicode:"&#xf238; train"},{id:"fa-truck",unicode:"&#xf0d1; truck"},{id:"fa-truck-pickup",unicode:"&#xf63c; truck-pickup"},{id:"fa-university",unicode:"&#xf19c; university"},{id:"fa-warehouse",unicode:"&#xf494; warehouse"},{id:"fa-bolt",unicode:"&#xf0e7; bolt"}],Ee=function(){function e(t,n,i,o){_classCallCheck(this,e),this.groupsService=t,this.geoDataService=n,this.projectsService=i,this.dialog=o,this.iconList=Le,this.selectedIcon="fa-house-damage",this.showSubitem=!0}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.projectsService.activeProject.subscribe((function(t){e.selectedProject=t})),this.groups$=this.geoDataService.groups.subscribe((function(t){e.groups=t})),this.geoDataService.groupsFeatures.subscribe((function(t){e.groupsFeatures=t})),this.activeGroup$=this.geoDataService.activeGroup.subscribe((function(t){e.activeGroup=t,t||e.groupsService.toggleTagger()}))}},{key:"selectGroupForm",value:function(e){this.geoDataService.setActiveGroup(e)}},{key:"openRenameOptionModal",value:function(e){this.dialog.open(e)}},{key:"deleteGroup",value:function(e){var t=this.groupsFeatures.get(e.name);this.geoDataService.deleteGroupFeatures(this.selectedProject.id,t,e)}},{key:"openRenameModal",value:function(e,t){this.selectedGroup=t,this.dialog.open(e)}},{key:"openIconSelection",value:function(e,t){this.selectedGroup=t,this.selectedIcon=t.icon,this.dialog.open(e)}},{key:"saveIcon",value:function(e){this.geoDataService.reiconGroup(this.selectedProject.id,this.groupsFeatures.get(this.selectedGroup.name),this.groups.get(this.selectedGroup.name),e),this.dialog.closeAll()}},{key:"isChecked",value:function(e){return this.activeGroup&&this.activeGroup.name===e?"checked":""}},{key:"renameGroup",value:function(e){this.geoDataService.renameGroup(this.selectedProject.id,this.groupsFeatures.get(this.selectedGroup.name),this.groups.get(this.selectedGroup.name),e),this.dialog.closeAll()}},{key:"expandPanel",value:function(){this.showSubitem=!this.showSubitem}},{key:"ngOnDestroy",value:function(){this.groups$.unsubscribe(),this.activeGroup$.unsubscribe()}}]),e}();Ee.ctorParameters=function(){return[{type:q},{type:W},{type:Q},{type:m.b}]},Ee=a.a([Object(i.n)({selector:"app-select-group",template:a.b(n("s9wi")).default,styles:[a.b(n("I57P")).default]}),a.c("design:paramtypes",[q,W,Q,m.b])],Ee);var Me=function(){function e(t,n){_classCallCheck(this,e),this.geoDataService=t,this.projectsService=n,this.showSubitem=!0}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.projectsService.activeProject.subscribe((function(t){e.activeProject=t})),this.geoDataService.groups.subscribe((function(t){e.groups=t})),this.geoDataService.activeGroup.subscribe((function(t){e.activeGroup=t})),this.geoDataService.activeGroupFeature.subscribe((function(t){e.activeGroupFeature=t})),this.geoDataService.groupsFeatures.subscribe((function(t){if(e.groupsFeatures=t,t&&e.activeGroup){var n=e.groupsFeatures.get(e.activeGroup.name);if(n)n.some((function(t){return t.id===e.activeGroupFeature.id}))||e.geoDataService.setActiveGroupFeature(n[0]);else{var i=_slicedToArray(e.groups.values(),1)[0];i?e.geoDataService.setActiveGroup(i):e.geoDataService.setActiveGroup(null)}}}))}},{key:"getActiveFeatures",value:function(){if(this.activeGroup){var e=this.groupsFeatures.get(this.activeGroup.name);if(this.groups.get(this.activeGroup.name))return e;var t=_slicedToArray(this.groups.values(),1)[0];return t?(this.geoDataService.setActiveGroup(t),this.groupsFeatures.get(t.name)):[]}return[]}},{key:"jumpToImage",value:function(e){this.geoDataService.setActiveGroupFeature(e)}},{key:"isActiveFeature",value:function(e){return this.activeGroupFeature.id===e.id}},{key:"deleteFeature",value:function(e){this.geoDataService.deleteGroupFeatures(this.activeProject.id,[e],this.groups.get(this.activeGroup.name))}},{key:"getFeaturePath",value:function(e){return e.featureShortPath()}},{key:"expandPanel",value:function(){this.showSubitem=!this.showSubitem}}]),e}();Me.ctorParameters=function(){return[{type:W},{type:Q}]},Me=a.a([Object(i.n)({selector:"app-select-image",template:a.b(n("033P")).default,styles:[a.b(n("T7o7")).default]}),a.c("design:paramtypes",[W,Q])],Me);var Re=n("hOhj"),Ue=n("W5yJ"),Ne=n("AaDx"),Ve=n("8P0U"),ze=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}();ze=a.a([Object(i.n)({selector:"app-form-fields",template:a.b(n("T+fY")).default}),a.c("design:paramtypes",[])],ze);var Je=function(){function e(t,n,o,a,r){_classCallCheck(this,e),this.formsService=t,this.groupsService=n,this.geoDataService=o,this.projectsService=a,this.featureService=r,this.formValue=new i.w,this.value=[]}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.geoDataService.activeGroupFeature.subscribe((function(t){e.activeGroupFeature=t,e.value=e.formsService.getTagValue(t,e.form),e.formValue.emit({id:e.form.id,value:e.value})})),this.geoDataService.activeGroup.subscribe((function(t){e.activeGroup=t})),this.projectsService.activeProject.subscribe((function(t){e.activeProject=t}))}},{key:"isChecked",value:function(e){return this.value.some((function(t){return t.label===e.label}))}},{key:"selected",value:function(e,t){this.value=this.value.filter((function(e){return e.label!==t.label})),e.target.checked&&this.value.push(t),this.formValue.emit({id:this.form.id,value:this.value})}}]),e}();Je.ctorParameters=function(){return[{type:X},{type:q},{type:W},{type:Q},{type:Fe}]},a.a([Object(i.R)(),a.c("design:type",i.w)],Je.prototype,"formValue",void 0),a.a([Object(i.F)(),a.c("design:type",Object)],Je.prototype,"field",void 0),a.a([Object(i.F)(),a.c("design:type",I)],Je.prototype,"form",void 0),Je=a.a([Object(i.n)({selector:"app-form-checkbox",template:a.b(n("yXUO")).default}),a.c("design:paramtypes",[X,q,W,Q,Fe])],Je);var He=function(){function e(t,n){_classCallCheck(this,e),this.formsService=t,this.geoDataService=n,this.formValue=new i.w,this.field={}}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.geoDataService.activeGroupFeature.subscribe((function(t){e.value=e.formsService.getTagValue(t,e.form),e.formValue.emit({id:e.form.id,value:e.value})}))}},{key:"updateCheckedTag",value:function(){this.formValue.emit({id:this.form.id,value:this.value})}}]),e}();He.ctorParameters=function(){return[{type:X},{type:W}]},a.a([Object(i.R)(),a.c("design:type",i.w)],He.prototype,"formValue",void 0),a.a([Object(i.F)(),a.c("design:type",Object)],He.prototype,"field",void 0),a.a([Object(i.F)(),a.c("design:type",I)],He.prototype,"form",void 0),He=a.a([Object(i.n)({selector:"app-form-dropdown",template:a.b(n("/WLi")).default}),a.c("design:paramtypes",[X,W])],He);var $e=function(){function e(){_classCallCheck(this,e),this.field={}}return _createClass(e,[{key:"ngOnChange",value:function(){console.log(this.field.value)}}]),e}();$e=a.a([Object(i.n)({selector:"app-form-file",template:a.b(n("503e")).default,styles:[a.b(n("1NWJ")).default]}),a.c("design:paramtypes",[])],$e);var Be=function(){function e(t,n){_classCallCheck(this,e),this.formsService=t,this.geoDataService=n,this.formValue=new i.w,this.field={}}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.geoDataService.activeGroupFeature.subscribe((function(t){e.value=e.formsService.getTagValue(t,e.form),e.formValue.emit({id:e.form.id,value:e.value})}))}},{key:"updateCheckedTag",value:function(){this.formValue.emit({id:this.form.id,value:this.value})}}]),e}();Be.ctorParameters=function(){return[{type:X},{type:W}]},a.a([Object(i.R)(),a.c("design:type",i.w)],Be.prototype,"formValue",void 0),a.a([Object(i.F)(),a.c("design:type",Object)],Be.prototype,"field",void 0),a.a([Object(i.F)(),a.c("design:type",I)],Be.prototype,"form",void 0),a.a([Object(i.F)(),a.c("design:type",String)],Be.prototype,"label",void 0),Be=a.a([Object(i.n)({selector:"app-form-radio",template:a.b(n("fIZ9")).default}),a.c("design:paramtypes",[X,W])],Be);var We=function(){function e(t,n){_classCallCheck(this,e),this.formsService=t,this.geoDataService=n,this.formValue=new i.w,this.field={},this.value=""}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.geoDataService.activeGroupFeature.subscribe((function(t){e.value=e.formsService.getTagValue(t,e.form),e.formValue.emit({id:e.form.id,value:e.value})}))}},{key:"updateValue",value:function(){this.formValue.emit({id:this.form.id,value:this.value})}}]),e}();We.ctorParameters=function(){return[{type:X},{type:W}]},a.a([Object(i.R)(),a.c("design:type",i.w)],We.prototype,"formValue",void 0),a.a([Object(i.F)(),a.c("design:type",Object)],We.prototype,"field",void 0),a.a([Object(i.F)(),a.c("design:type",I)],We.prototype,"form",void 0),We=a.a([Object(i.n)({selector:"app-form-textbox",template:a.b(n("dagV")).default}),a.c("design:paramtypes",[X,W])],We);var Ze=function(){function e(t,n){_classCallCheck(this,e),this.formsService=t,this.geoDataService=n,this.formValue=new i.w,this.field={},this.chosenColor="#ffffff",this.value={}}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.geoDataService.activeGroupFeature.subscribe((function(t){e.value=e.formsService.getTagValue(t,e.form),e.chosenTag=e.value.label,e.formValue.emit({id:e.form.id,value:e.value})}))}},{key:"updateCheckedTag",value:function(){var e=this;this.value=this.form.options.find((function(t){return t.label===e.chosenTag})),this.formValue.emit({id:this.form.id,value:this.value})}}]),e}();Ze.ctorParameters=function(){return[{type:X},{type:W}]},a.a([Object(i.R)(),a.c("design:type",i.w)],Ze.prototype,"formValue",void 0),a.a([Object(i.F)(),a.c("design:type",Object)],Ze.prototype,"field",void 0),a.a([Object(i.F)(),a.c("design:type",I)],Ze.prototype,"form",void 0),a.a([Object(i.F)(),a.c("design:type",String)],Ze.prototype,"color",void 0),a.a([Object(i.F)(),a.c("design:type",String)],Ze.prototype,"label",void 0),Ze=a.a([Object(i.n)({selector:"app-form-color",template:a.b(n("m/u+")).default,styles:[a.b(n("FN4D")).default]}),a.c("design:paramtypes",[X,W])],Ze);var Ke=n("igqZ"),Xe=function e(){_classCallCheck(this,e)};Xe=a.a([Object(i.K)({declarations:[re,de,O,Z,Ce,K,be,Te,Ge,De,Ae,Ee,Me,ee,ne,Se,je,Ve.a,ke,ze,Je,He,$e,Be,We,we,Ze],imports:[C.a.forRoot({rootUrl:"https://agave.designsafe-ci.org/"}),r.a,ae,l.c,s.b,u.a,p.a,w.a,j.a.forRoot(),d.d.forRoot(),f.a,h.a,g.a,m.c,v.a,b.a,x.a,S.a,k.a,y.a,d.a.forRoot(),xe.j,xe.e,F.a,d.b.forRoot(),c.b,Ue.a,Re.b,Ne.a,he.b,Ke.a],providers:[U,{provide:l.a,multi:!0,useClass:Pe},{provide:l.a,multi:!0,useClass:Ie},{provide:c.a,useValue:E.baseHref}],bootstrap:[re],entryComponents:[be,ke,Se,je,we]})],Xe),E.production&&Object(i.sb)(),Object(o.a)().bootstrapModule(Xe).catch((function(e){return console.error(e)}))},zXfM:function(e,t,n){"use strict";n.r(t),t.default='<div class="tag-forms">\n  <div class="subitem-title" (click)="expandPanel()">\n    <span> Tag Images </span>\n    <span>\n      <span\n        style="cursor: pointer"\n        (click)="showTagGenerator()"\n        matTooltip="Add New Tag Form"\n        style="cursor: pointer; margin-right: 10px"\n        matTooltipPosition="above"\n      >\n        <i class="fas fa-plus"></i>\n      </span>\n    </span>\n  </div>\n  \x3c!-- subitem-title --\x3e\n\n  <div *ngIf="showSubitem" class="subitem">\n    <div class="subitem-scroll">\n      <div *ngFor="let form of formList">\n        <div class="form-item-container">\n          <div class="name-group">{{ form.label }} ({{ form.type }})</div>\n          <div class="button-group">\n            <div (click)="deleteForm(form)">\n              <i\n                class="fas fa-minus"\n                matTooltip="Delete"\n                matTooltipPosition="above"\n                style="cursor: pointer"\n              >\n              </i>\n            </div>\n            \x3c!-- delete button --\x3e\n\n            <div (click)="openRenameOptionModal(renameFormItemModal)">\n              <i\n                class="fas fa-edit"\n                matTooltip="Rename"\n                matTooltipPosition="above"\n                style="cursor: pointer"\n              >\n              </i>\n            </div>\n\n            <ng-template #renameFormItemModal>\n              <input\n                matInput\n                #formItemRename\n                [(ngModel)]="newTagValue"\n                value="{{ form.label }}"\n                placeholder="Rename Form Item"\n                (keyup.enter)="renameForm(form)"\n              />\n              <br />\n              <br />\n              <div class="button-group">\n                <button\n                  matDialogClose\n                  mat-raised-button\n                  color="primary"\n                  (click)="renameForm(form.label)"\n                >\n                  Rename\n                </button>\n                <button matDialogClose mat-button>Cancel</button>\n              </div>\n            </ng-template>\n            \x3c!-- rename modal --\x3e\n          </div>\n          \x3c!-- button group --\x3e\n        </div>\n        \x3c!-- form-item-container --\x3e\n        <app-form-generator\n          (newValue)="setValue($event)"\n          [form]="form"\n        ></app-form-generator>\n      </div>\n      <div *ngIf="formList && formList.length">\n        <button mat-raised-button color="primary" (click)="saveTags()">\n          Save\n        </button>\n      </div>\n    </div>\n    \x3c!-- subitem scroll --\x3e\n  </div>\n  \x3c!--subitem --\x3e\n</div>\n\x3c!-- tag-forms --\x3e\n'},zusP:function(e,t,n){"use strict";n.r(t),t.default='<div>\n  <div [ngSwitch]="form.type" class="form-controls">\n    <ng-container *ngSwitchCase="\'text\'">\n      <app-form-textbox\n        (formValue)="setValue($event)"\n        [field]="form.options"\n        [form]="form"\n      ></app-form-textbox>\n    </ng-container>\n\n    <ng-container *ngSwitchCase="\'dropdown\'">\n      <app-form-dropdown\n        (formValue)="setValue($event)"\n        [field]="form.options"\n        [form]="form"\n      ></app-form-dropdown>\n    </ng-container>\n\n    <ng-container *ngSwitchCase="\'radio\'">\n      <app-form-radio\n        (formValue)="setValue($event)"\n        [field]="opt"\n        [form]="form"\n        label="{{ form.label }}"\n      ></app-form-radio>\n    </ng-container>\n\n    <ng-container *ngSwitchCase="\'checkbox\'">\n      <app-form-checkbox\n        (formValue)="setValue($event)"\n        [form]="form"\n      ></app-form-checkbox>\n    </ng-container>\n\n    <ng-container *ngSwitchCase="\'color\'">\n      <app-form-color\n        (formValue)="setValue($event)"\n        [field]="opt"\n        [form]="form"\n        label="{{ form.label }}"\n        [color]="colorArray[form.options.indexOf(opt)]"\n      ></app-form-color>\n    </ng-container>\n  </div>\n</div>\n'}},[[0,0,5]]]);
//# sourceMappingURL=main-es5.0f7099dec4445f5b898f.js.map